/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */
function algaeTank(){function t(t,e){this.x=t,this.y=e,this.state="dead",this.draw=function(){s.beginPath(),s.fillStyle="alive"==this.state?"#1bbd61":"#e8effa",s.strokeStyle="#d3e0f5",s.fillRect(this.x,this.y,h,h),s.strokeRect(this.x,this.y,h,h),s.closePath()}}function e(){for(var e=0,i=0,o=0;o<c*l/Math.pow(h,2);o++)u.push(new t(e,i)),e+=h,e%l/h==0&&(e=0,i+=h);_.each(u,function(t){t.draw()}),$("#run").removeClass("disable").addClass("start"),$("#run").on("click",function(){$("#run").removeClass("start").addClass("disable"),n(),$("#run").off()})}function n(){var t=[];_.each(u,function(e,n){var o=i(e.x,n),r=$.extend({},e,r),a=0;_.each(o,function(t){"alive"==t.state&&(a+=1)}),"alive"==r.state?(2>a||a>3)&&(r.state="dead"):3==a&&(r.state="alive"),t.push(r)}),u=t,d=setTimeout(o,40)}function i(t,e){var n=[u[e+1],u[e-1],u[e+l/h],u[e-l/h],u[e+l/h+1],u[e-l/h+1],u[e+l/h-1],u[e-l/h-1]];return 0==t?(n[1]=void 0,n[6]=void 0,n[7]=void 0):t==l-h&&(n[0]=void 0,n[4]=void 0,n[5]=void 0),n=_.reject(n,function(t){return void 0==t})}function o(){s.clearRect(0,0,l,c),_.each(u,function(t){t.draw()}),n()}function r(t,e){_.each(u,function(n){t>n.x&&t<n.x+h&&e>n.y&&e<n.y+h&&(n.state="alive",n.draw())})}var a=$("canvas")[0],s=a.getContext("2d"),c=550,l=900,h=10,u=[],d=null;a.height=c,a.width=l,e(),$("body").on("mousedown",function(t){var e=t.pageX-a.offsetLeft,n=t.pageY-a.offsetTop;r(e,n),$("canvas").on("mousemove",function(t){var e=t.pageX-a.offsetLeft,n=t.pageY-a.offsetTop;r(e,n)}),$("body").on("mouseup",function(){$("canvas").off()})}),$(".reset").on("click",function(){clearTimeout(d),u=[],e()}),$("body").disableSelection()}function assault(){function t(t,e,n,i){$({deg:t}).animate({deg:e},{duration:800,step:function(t){n.css({transform:"rotate("+t+"deg)"}),t==e&&i&&i()}})}function e(){a.addClass("salt_shake"),i()}function n(){a.shaking=!1,a.removeClass("salt_shake"),t(180,0,a),clearTimeout(r),$("#grains").html(""),c=0}function i(){$("<div>",{"class":"grain"}).css({left:randomInt(130,170)}).animate({bottom:-200,opacity:0}).appendTo("#grains"),c+=1,a.shaking&&300>c?r=setTimeout(i,15):(n(),clearTimeout(r))}function o(t){var e=randomColorRGB();$("body").css("background-color","rgb("+e+")"),$("#lightning").css({top:randomInt(-400,200),left:randomInt(-300,300)}).show(),12>t?setTimeout(function(){o(t+=1)},30):($("body").css("background-color","#cc0000"),s.removeClass("battery_shake"),$("#lightning").hide())}var r,a=$("#salt"),s=$("#battery"),c=0;a.shaking=!1,a.on("click",function(){a.shaking?(a.shaking=!1,n()):(a.shaking=!0,t(0,180,a,e))}),s.on("click",function(){s.addClass("battery_shake"),o(0)})}function audioGarden(){function t(t,e,n){this.x=Number(t),this.y=Number(e),this.radius=Number(n),this.playing=!1,this.draw=function(){this.playing?(this.opacity=1,a.shadowBlur=30,a.shadowColor="rgba("+this.playing+", 1)",a.strokeStyle="rgba("+this.playing+", 1)"):(this.opacity=.5,a.shadowBlur=0,a.shadowColor="none",a.strokeStyle="rgba(255,255,255,0.5)"),a.beginPath(),a.lineWidth=2,a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.stroke(),a.closePath(),this.radius+=1;var t=o(this.x,this.y,r.width,r.height);t<this.radius&&(this.radius=0)}}function e(t,e,n,i){function r(t){_.each(h,function(e){var n=o(e.x,e.y,t.x,t.y);Math.round(n)==e.radius&&(t.sound.play(),t.playing=!0,e.playing=t.color,setTimeout(function(){t.playing=!1,e.playing=!1},160))})}this.x=Number(t),this.y=Number(e),this.color=i,this.sound_name=n,this.radius=15,this.opacity=.5,this.playing=!1,this.sound=new Howl({urls:["/assets/"+this.sound_name+".mp3","/assets/"+this.sound_name+".ogg"],volume:.5}),this.draw=function(){this.playing?(a.shadowBlur=14,a.shadowColor="rgba("+this.color+", 1)",this.opacity=1):(a.shadowBlur=0,a.shadowColor="none",this.opacity=.5),a.beginPath(),a.fillStyle="rgba("+this.color+","+this.opacity+")",a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.fill(),a.closePath(),r(this)},this.drag=function(t,e){this.x=t,this.y=e}}function n(){var t=_.map(h,function(t){return{x:t.x,y:t.y,radius:t.radius}}),e=_.map(l,function(t){return{x:t.x,y:t.y,sound_name:t.sound_name,color:t.color}}),n={beats:t,notes:e,width:r.width,height:r.height};$.ajax({url:"/audio_garden/gardens",type:"POST",data:{garden:n},dataType:"json",success:function(t){window.location="/audio_garden/gardens/"+t},error:function(){alert("There was a problem with your request. Please try again.")}})}function i(){a.clearRect(0,0,r.width,r.height),_.each(h,function(t){t.draw()}),_.each(l,function(t){t.draw()}),setTimeout(i,10)}function o(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}var r=$("canvas")[0],a=r.getContext("2d"),s=window.innerHeight,c=window.innerWidth,l=[],h=[],u=!0,d=$("canvas").data("garden"),f=[{name:"ukulele_gsharp1",color:"255, 158, 0"},{name:"ukulele_b2",color:"255, 251, 0"},{name:"ukulele_asharp2",color:"2178, 255, 0"},{name:"ukulele_a2",color:"0, 255, 46"},{name:"ukulele_dsharp1",color:"96, 13, 122"},{name:"ukulele_d1",color:"0, 255, 159"},{name:"ukulele_e1",color:"0, 238, 255"},{name:"ukulele_csharp1",color:"0, 153, 255"},{name:"ukulele_c2",color:"14, 0, 255"},{name:"ukulele_f1",color:"99, 0, 255"},{name:"ukulele_g1",color:"179, 0, 255"},{name:"ukulele_fsharp1",color:"255, 0, 162"},{name:"ukulele_c1",color:"255, 0, 50"}];if(r.height=s,r.width=c,d){var p=d.notes,g=d.beats;r.width=d.width,r.height=d.height,_.each(p,function(t){l.push(new e(t.x,t.y,t.sound_name,t.color))}),_.each(g,function(e){h.push(new t(e.x,e.y,e.radius))}),i()}else{var m=f[randomInt(0,f.length-1)];h.push(new t(r.width/2,r.height/2,0)),l.push(new e(randomInt(30,r.width-30),randomInt(30,r.height-30),m.name,m.color)),i(),$("canvas").on("mousedown",function(t){var e=t.pageX-r.offsetLeft,n=t.pageY-r.offsetTop,i=_.find(l,function(t){var i=o(t.x,t.y,e,n);return i<t.radius});u=!0,i&&(u=!1,t.shiftKey?l=_.reject(l,function(t){var i=o(t.x,t.y,e,n);return i<t.radius}):($("canvas").on("mousemove",function(t){var e=t.pageX-r.offsetLeft,n=t.pageY-r.offsetTop;i.drag(e,n)}),$("canvas").on("mouseup",function(){$("canvas").off("mousemove")})))}),$("canvas").on("click",function(t){if(u){var n=t.pageX-r.offsetLeft,i=t.pageY-r.offsetTop,o=f[randomInt(0,f.length-1)];l.push(new e(n,i,o.name,o.color))}}),$("canvas").on("contextmenu",function(e){e.preventDefault(),h.push(new t(r.width/2,r.height/2,0))}),$(".reset").on("click",function(){h=[],l=[],h.push(new t(r.width/2,r.height/2,0))}),$(".save").on("click",function(){n()}),$("body").disableSelection()}}function audioRecorder(){function t(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,window.URL=window.URL||window.webkitURL,s=new AudioContext,navigator.getUserMedia?navigator.getUserMedia({audio:!0},i,function(){alert("This app requires access to your microphone.")}):n()}catch(t){n()}}function e(){var t=$.trim($("#title_input").val());t&&(l=t+".wav")}function n(){$("#container").html(""),$("#replacement_container").show()}function i(t){var e=s.createMediaStreamSource(t);e.connect(s.destination),c=new Recorder(e),$("#start").attr("disabled",!1)}function o(){c&&c.record(),$("#start").attr("disabled",!0),$("#stop").attr("disabled",!1),$(".rec_light_bulb").addClass("recording")}function r(){c&&c.stop(),$("#stop").attr("disabled",!0),$("#start").attr("disabled",!1),$(".rec_light_bulb").removeClass("recording"),a()}function a(){c&&c.exportWAV(function(t){var e=URL.createObjectURL(t),n=document.createElement("li"),i=document.createElement("audio"),o=document.createElement("p"),r=document.createElement("a"),a=document.getElementById("recordings_list");i.controls=!0,i.src=e,o.innerHTML=l,r.href=e,r.className="btn",r.download=l,r.innerHTML="Download",n.appendChild(i),n.appendChild(o),n.appendChild(r),a.appendChild(n)}),c.clear()}var s,c,l="my_recording.wav";t(),$("#start").on("click",function(){o(),e()}),$("#stop").on("click",function(){r()})}function balloon(){function t(n,i){var o=new Date,r=o.getTime(),a=r-n;c.draw(),e(a,i),requestAnimFrame(function(){t(r,i)})}function e(t,e){var c=e.getX(),l=e.getY(),h=s.getMousePosition();if(e.isDragging()){if(h){var u=h.y,d=h.x;e.vx=a*(d-e.last_mouse_x),e.vy=a*(u-e.last_mouse_y),e.last_mouse_x=d,e.last_mouse_y=u}}else e.vy+=o*t/1e3,e.setX(c+e.vx),e.setY(l+e.vy),0>c&&(e.setX(0),e.vx*=-1*r),c>n-e.getWidth()&&(e.setX(n-e.getWidth()),e.vx*=-1*r),0>l&&(e.setY(0),e.vy*=-1*r,e.vx*=r/1.3),l>i-e.getHeight()&&(e.setY(i-e.getHeight()),e.vy*=-1*r)}var n=window.innerWidth,i=window.innerHeight,o=-2.5,r=.6,a=.06,s=new Kinetic.Stage({container:"container",width:n,height:i}),c=new Kinetic.Layer,l=new Image;l.onload=function(){var e=l.width,o=l.height,r=new Kinetic.Image({x:n/4,y:i/2,image:l,width:e,height:o,draggable:!0});r.vx=2,r.vy=0,r.createImageHitRegion(function(){c.draw()}),c.add(r),s.add(c),r.on("dragstart",function(){r.vx=0,r.vy=0}),r.on("mouseover",function(){document.body.style.cursor="pointer"}),r.on("mouseout",function(){document.body.style.cursor="default"});var a=new Date,h=a.getTime();t(h,r)},l.src="/assets/blue_balloon.png"}function boomPage(){function t(t,e){function n(t){t.width=t.orig_width/(t.time*t.time)*y,t.height=t.orig_height/(t.time*t.time)*y,t.x=(t.orig_width-t.width)/2+t.x_offset,t.y=(t.orig_height-t.height)/2+t.y_offset,t.time+=1,_.each(t.orbs,function(e){e.x=t.x+t.width*e.x_offset,e.y=t.y+t.height*e.y_offset,e.radius=250/(t.time*t.time)*y}),t.draw()}this.orig_width=this.width=t,this.orig_height=this.height=e,this.x=(l.width-t)/2,this.y=(l.height-e)/2,this.x_offset=(l.width-t)/2,this.y_offset=(l.height-e)/2,this.time=1,this.orbs=[],this.makeOrb=function(){var t={},e=randomNumWithGap(0,20,80,100)/100,n=randomNumWithGap(0,20,80,100)/100;t.radius=400,t.x_offset=e,t.y_offset=n,t.x=this.width*e-this.x_offset,t.y=this.height*n-this.y_offset,this.orbs.push(t)},this.evolve=function(){n(this)},this.draw=function(){h.beginPath(),h.fillStyle="transparent",h.fillRect(this.x,this.y,this.width,this.height),h.closePath(),_.each(this.orbs,function(t){h.beginPath(),h.fillStyle="rgba(255,255,255,0.4)",h.arc(t.x,t.y,t.radius,0,2*Math.PI),h.fill(),h.closePath(),h.beginPath(),h.fillStyle="rgba(255,255,255,0.85)",h.arc(t.x,t.y,t.radius/1.2,0,2*Math.PI),h.fill(),h.closePath()})};for(var i=0;i<randomInt(1,3);i++)this.makeOrb()}function e(){g.push(new t(2*l.width,2*l.height,2))}function n(t,e,n){for(var o=0;100>o;o++)b.push(new i(t,e,w,5.2*Math.random()/(.002*n),n))}function i(t,e,n,i,o){this.x=t,this.y=e,this.x0=t,this.y0=e,this.v0=Math.random()/(.003*o),this.angle=Math.random()*(360*Math.PI/180),this.time=0,this.r=i,this.color=n,this.scale=o}function o(){_.each(b,function(t){d.fillStyle=t.color,d.beginPath(),d.arc(t.x,t.y,t.r,0,2*Math.PI),d.fill(),d.closePath()}),r()}function r(){b=_.reject(b,function(t){var e=t.v0*Math.sin(t.angle),n=t.v0*Math.cos(t.angle);return t.time+=x,t.x=t.x0+e*t.time,t.y=t.y0-n*t.time+k*Math.pow(t.time,2),t.time>randomInt(500,1200)?!0:void 0})}function a(){h.clearRect(0,0,l.width,l.height),_.each(g,function(e,n){e.evolve(),e.width<10&&(g[n]=new t(2*l.width,2*l.height,2))}),o(),setTimeout(a,m)}function s(t,e,n,i,o){var r=t-n,a=e-i;return o*o>=r*r+a*a}function c(){e(),g.length<10&&setTimeout(c,3e3)}var l=$("canvas")[0],h=l.getContext("2d"),u=$("canvas")[1],d=l.getContext("2d"),f=window.innerHeight,p=window.innerWidth,g=[],m=40,v={},y=300,b=[],w="#ebf9ff",x=10,k=1e-4,T=new Howl({urls:["/assets/bells.mp3","/assets/bells.ogg"],volume:.5}),S=new Howl({urls:["/assets/boom.mp3","/assets/boom.ogg"],volume:.75});l.height=f,l.width=p,u.height=f,u.width=p,c(),a(),$("canvas").on("mousemove",function(t){v.x=t.pageX-l.offsetLeft,v.y=t.pageY-l.offsetTop}),document.addEventListener("touchmove",function(t){t.preventDefault(),v.x=t.pageX-l.offsetLeft,v.y=t.pageX-l.offsetTop},!1),$("canvas").on("click",function(t){var e=t.pageX-l.offsetLeft,i=t.pageY-l.offsetTop;_.each(g,function(t){var o=t.time*t.time;t.orbs=_.reject(t.orbs,function(t){return s(e,i,t.x,t.y,t.radius)?(n(t.x,t.y,o),T.play(),S.play(),!0):void 0})})}),$("body").disableSelection()}function brickSmasher(){function t(){k.move(c,l),y.draw(),k.getY()>x.getHeight()+k.getRadius()?($("h2").text("Bricks Smashed: "+g),$(".modal").fadeIn(500)):i()}function e(t,e,n,i){this.x=t,this.y=e,this.i=i,this.color=n,this.top=e,this.bottom=e+f,this.left=t,this.right=t+d,this.dead=!1;var o=new Kinetic.Rect({x:this.x,y:this.y,width:d,height:f,fill:this.color,id:"brick"+i});w.add(o)}function n(){var t=0,n=v[t],i=0,o=50;_.each(_.range(m),function(r){p.push(new e(i,o,n,r)),i+=d,i>=x.getWidth()&&(i=0,o+=f+3,t+=1,n=v[t])})}function i(){var e=k.getRadius(),n=k.getX(),i=k.getY(),r=T.getX(),a=T.getY();(0+e>n||n>x.getWidth()-e)&&(c*=-1),0+e>i+e&&(l*=-1),n-e>r-T.getOffsetX()&&n+e<r+T.getOffsetX()&&i+e>=a&&(k.setY(a-1-e),l*=-1,r>n?c=-1*Math.abs(c):n>=r&&(c=Math.abs(c))),p=_.reject(p,function(t){return t.left<=n&&n<=t.right&&(t.top<=i-e&&i-e<=t.bottom||t.top<=i-e&&i-e<=t.bottom)?(l*=-1,x.get("#brick"+t.i).destroy(),w.draw(),g+=1,o(),!0):t.top<=i&&i<=t.bottom&&(t.left<=n-e&&n-e<=t.right||t.left<=n-e&&n-e<=t.right)?(l*=-1,x.get("#brick"+t.i).destroy(),w.draw(),g+=1,o(),!0):!1}),setTimeout(t,S)}function o(){g%4==0&&0!=g&&(S*=.85)}var r=600,a=500,s=2*randomInt(0,1)-1,c=3*s,l=-3,h=150,u=10,d=50,f=30,p=[],g=0,m=r/d*8,v=["#e8566c","#e8566c","#1CCFC7","#1CCFC7","#FFC54A","#FFC54A","#19E1B2","#19E1B2"],y=new Kinetic.Layer,b=new Kinetic.Layer,w=new Kinetic.Layer,x=new Kinetic.Stage({container:"game",width:r,height:a}),k=new Kinetic.Circle({x:randomInt(30,x.getWidth()-30),y:x.getHeight()-30,radius:10,fill:"#0f0b7a",id:"ball"}),T=new Kinetic.Rect({x:x.getWidth()/2,y:x.getHeight()-10,width:h,height:u,offsetX:h/2,fill:"#e8566c",id:"paddle"}),S=20;n(),y.add(k),b.add(T),x.add(y),x.add(b),x.add(w),t(),$("body").on("mousemove",function(){var t=x.getMousePosition();t&&(T.setX(t.x),b.draw())})}function buttonMaker(){var t=!1;$("#arrow").on("click",function(){t?($(".css_code").animate({opacity:0},500),$(this).text("\u25b2")):($(this).text("\u25bc"),$(".css_code").animate({opacity:1},500)),t=!t}),$(".button").on("click",function(t){t.preventDefault()}),$("#background-color").on("change",function(){$(".button").css("background-color","#"+this.color)}),$("#font-color").on("change",function(){$(".button").css("color","#"+this.color)}),$("#box-shadow").on("change",function(){$(".button").css("box-shadow",$(this).val())}),$("#text-shadow").on("change",function(){$(".button").css("text-shadow",$(this).val())}),$("#font-size").on("change",function(){$(".button").css("font-size",$(this).val())}),$("#line-height").on("change",function(){$(".button").css("line-height",$(this).val())}),$("#border-left").on("change",function(){$(".button").css("border-left",$(this).val())}),$("#border-right").on("change",function(){$(".button").css("border-right",$(this).val())}),$("#border-top").on("change",function(){$(".button").css("border-top",$(this).val())}),$("#border-bottom").on("change",function(){$(".button").css("border-bottom",$(this).val())}),$("#border-radius").on("change",function(){$(".button").css("border-radius",$(this).val())}),$("#padding").on("change",function(){$(".button").css("padding",$(this).val())}),$("#line-height").on("change",function(){$(".button").css("line-height",$(this).val())})}function captureGame(){function t(){p.fillStyle="#fff",p.fillRect(0,0,m,g),l(),_.each(v,function(t){t.move()}),_.each(y,function(t){t.draw()}),T&&(v=a(),y=s(),c())}function e(){v=[],w=0,_.each(_.range(S[k].num_balls),function(){o(randomInt(20,m-20),randomInt(20,g-42))}),$("canvas").on("click",function(t){var e=t.pageX-f.offsetLeft,n=t.pageY-f.offsetTop;r(e,n,"100, 100, 100"),T=!0,$("canvas").off()})}function n(t,e,n,i){this.x=t,this.y=e,this.vx=n,this.vy=i,this.r=8,this.color=randomColorRGB(),this.move=function(){this.x>m-8?(this.x=m-8,this.vx=-this.vx):this.x<8&&(this.x=8,this.vx=-this.vx),this.y>g-8?(this.y=g-8,this.vy=-this.vy):this.y<38&&(this.y=38,this.vy=-this.vy),this.x+=this.vx,this.y+=this.vy,p.fillStyle="rgba("+this.color+", 1)",p.beginPath(),p.arc(this.x,this.y,this.r,0,2*Math.PI),p.closePath(),p.fill()}}function i(t,e,n){this.x=t,this.y=e,this.r=40,this.color=n,this.time=x,this.draw=function(){p.fillStyle="rgba("+this.color+", 0.75)",p.beginPath(),p.arc(this.x,this.y,this.r,0,2*Math.PI),p.closePath(),p.fill(),this.time+=50}}function o(t,e){var i=randomFloat(-5,5),o=randomFloat(-5,5);3>i&&i>0?i+=3:i>-3&&0>i&&(i-=3),3>o&&o>0?o+=3:o>-3&&0>o&&(o-=3),v.push(new n(t,e,i,o))}function r(t,e,n){y.push(new i(t,e,n))}function a(){return _.reject(v,function(t){var e=!1;return _.each(y,function(n){t.x-t.r>n.x-n.r&&t.x+t.r<n.x+n.r&&t.y-t.r>n.y-n.r&&t.y+t.r<n.y+n.r&&(r(t.x,t.y,t.color),w=S[k].num_balls-v.length,e=!0)}),e})}function s(){return _.reject(y,function(t){return t.time>1500})}function c(){w=S[k].num_balls-v.length,0==y.length&&(T=!1,w<S[k].target?setTimeout(function(){h(),e()},300):(b+=w,k++,k<=S.length-1?setTimeout(function(){u(),e()},300):d()))}function l(){p.fillStyle="#eb7405",p.fillRect(0,0,m,30),p.fillStyle="#fff",p.font="16px Open Sans",p.fillText("Target: "+S[k].target,20,20),p.fillText("Captured: "+w,120,20),p.fillText("Score: "+100*b,250,20)}function h(){$(".fail").fadeIn("300")}function u(){$(".next h2").text("Target: "+S[k].target),$(".next").fadeIn("300"),setTimeout(function(){$(".next").fadeOut("300")},800)}function d(){$(".win").fadeIn("300")}var f=$("canvas")[0],p=f.getContext("2d"),g=500,m=700,v=[],y=[],b=0,w=0,x=50,k=0,T=!1,S=[{num_balls:3,target:1},{num_balls:8,target:2},{num_balls:12,target:4},{num_balls:20,target:6},{num_balls:25,target:8},{num_balls:25,target:10},{num_balls:40,target:13},{num_balls:40,target:15},{num_balls:45,target:20},{num_balls:40,target:25},{num_balls:50,target:30},{num_balls:50,target:35},{num_balls:55,target:40},{num_balls:58,target:45},{num_balls:65,target:55},{num_balls:73,target:65},{num_balls:80,target:70},{num_balls:80,target:75},{num_balls:80,target:78}];f.height=g,f.width=m,$("body").disableSelection(),setInterval(function(){t()},x),e(),$(".retry").on("click",function(){$(".modal").fadeOut("300")})}function catWall(){function t(t){t.target.mute(),t.target.playVideo()}var e=["INscMGmhmX4","0M7ibPk37_U","R7ssVT6T3mQ","2CNd6OGdMO8","bzvUyu3zOmE","pwHy4gMO6sU","fzzjgBAaWZw","C_S5cXbXe-4","hPzNl6NKAG0","REQRHdMRimw","0Bmhjf0rKe8","SaOqf2d-y30"],n=document.createElement("script");n.src="http://www.youtube.com/player_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i);var o;window.onYouTubePlayerAPIReady=function(){"/cat_wall/page"==window.location.pathname&&_.each(e,function(e,n){$("<div />",{id:"player"+n,"class":"video"}).appendTo("#video_container"),o=new YT.Player("player"+n,{playerVars:{autohide:1,wmode:"opaque",controls:0,playlist:e,loop:1},videoId:e,events:{onReady:t}})})}}function checkSketch(){var t=window.innerHeight,e=window.innerWidth,n=t*e/324,i=!1;$("#sketch_pad").css({height:t,width:e}),_.each(_.range(1,n),function(){$("<input>",{type:"checkbox"}).on("mouseover",function(){i&&this.setAttribute("checked","checked")}).appendTo("#sketch_pad")}),$("#turbo").on("click",function(){i?$(this).text("Turbo Mode Off").addClass("turbo_off"):$(this).text("Turbo Mode On").removeClass("turbo_off"),i=!i}),$("#reset").on("click",function(){window.location="/check_sketch/page"})}function chromatones(){function t(){this.color=randomColorHex(),this.buildSwatch=function(){var t=this,e=$("<div>",{"class":"swatch"}),n=$("<div>",{"class":"swatch_color",style:"background-color:"+t.color}),i=$("<div />",{"class":"close",text:"X"}).on("click",function(){r=_.reject(r,function(e){return e==t}),$(this).parent().remove()}),o=$("<div>",{"class":"swatch_info"}).append("<label>Color: </label>"),a=$("<input>",{"class":"color",value:t.color}).on("change",function(){t.color="#"+$(this).val(),$(n).css("background-color",t.color)}).appendTo(o);new jscolor.color(a.get(0)),$(e).append(i).append(n).append(o).appendTo("#swatch_container_new")},this.buildSwatch()}function e(t,e){this.color=t,this.buildSwatch=function(){var t=this,n=$("<div>",{"class":"swatch"}),i=$("<div>",{"class":"swatch_color",style:"background-color:"+t.color}),o=$("<div>",{"class":"swatch_info"}).append("<label>Color: "+t.color+"</label>");$(n).append(i).append(o).appendTo(e)},this.buildSwatch()}function n(t){var e=$.trim($("#title").val()),n=$.trim($("#name").val());if(!(e.length>100||n.length>100)){var i=_.map(t,function(t){return{color:t.color}});return i.push({title:e}),i.push({name:n}),i}alert("Character limit for title and name is 100.")}function i(t){var e=n(t);e&&($("#throbber").show(),$.ajax({url:"/chromatones/palettes",type:"POST",data:{colors:e},dataType:"json",success:function(){window.location="/chromatones/palettes/"},error:function(){$("#throbber").hide(),alert("There was a problem with your request. Please try again.")}}))}if($("#recent_palettes").length>0&&(palettes=$(".palette_container"),_.each(palettes,function(t,n){for(var i=$(t).data("colors"),n=0;10>n;n++)color=i[n],color&&e(color.color,t);i.length>10&&$(t).append('<div class="more">and '+(i.length-10)+" more colors.</div>")})),$("#swatch_container_show").length>0){var o=$("#palette_data").data("palette");_.each(o,function(t){e(t.color,"#swatch_container_show")})}if($("#swatch_container_new").length>0){for(var r=[],a=0;5>a;a++)r.push(new t);$("#add").on("click",function(e){e.preventDefault(),r.push(new t)}),$("#save").on("click",function(t){t.preventDefault(),i(r)})}}function clickCounter(){function t(){var t=$("#click_num").text();t++,$("#click_num").text(t)}$("button").on("click",function(e){function n(){$(this).removeAttr("disabled")}e.preventDefault(),$(this).attr("disabled","disabled"),$.ajax({type:"PUT",url:"/click_counter/buttons/1"}),t(),setTimeout($.proxy(n,this),400)}),$("body").disableSelection()}function codedMessages(){function t(){r.beginPath(),r.clearRect(0,0,o.width,o.height),r.fillStyle="#00cc99",r.fillRect(0,o.height-l,o.width,l),r.closePath(),_.each(d,function(t){t.draw()})}function e(e,n){this.x=e,this.y=0,this["char"]=n,this.chars=[],this.char_spacing=l,this.width=c,this.rotating=!1,this.init=function(){this.chars.push(this["char"]);for(var t=0;9>t;t+=1)this.chars.push(i[randomInt(0,i.length-1)]);this.chars=_.shuffle(this.chars)},this.draw=function(){var t=this,e=this.y+5;r.beginPath(),r.fillStyle="#222",r.strokeStyle="#888",r.textBaseline="top",r.textAlign="center",r.font="20px monospace",_.each(t.chars,function(n){r.fillText(n,t.x+t.width/2,e),e+=t.char_spacing}),r.moveTo(this.x,0),r.lineTo(this.x,o.height),r.moveTo(this.x+this.width,0),r.lineTo(this.x+this.width,o.height),r.stroke(),r.closePath()},this.rotate=function(e){var n=this;if(n.rotating=!0,e=e?e:0,e<n.char_spacing)n.y+=1,t(),setTimeout(function(){n.rotate(e+1)},7);else{var i=n.chars.pop();n.chars.unshift(i),n.y=0,t(),n.rotating=!1}},this.init()}function n(){var t=[];_.each(d,function(e){t.push(e.chars[e.chars.length-1])}),alert(t.join("")==s?"CORRECT! Excellent decoding work!":"NOPE! "+t.join("")+" is not the correct answer.")}var i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","!","@","#","%","$","^","&","*","(",")","?",".",",","'","/"," "];if($("form").length&&$("form").on("submit",function(t){var e=$.trim($("#message_input").val()),n=$.trim($("#title_input").val());e.length<1?(t.preventDefault(),alert("Please enter a message.")):e.length>40?(t.preventDefault(),alert("Your message is too long. Limit is 140 characters.")):n.length<1?(t.preventDefault(),alert("Please enter a hint or title.")):n.length>255?(t.preventDefault(),alert("Your title is too long. Limit is 255 characters.")):(e=utf8_to_b64(e),$("#message").val(e))}),$("canvas").length){var o=$("canvas")[0],r=o.getContext("2d"),a=$("#message").data("message"),s=b64_to_utf8(a).toUpperCase(),c=30,l=38,h=s.length*c,u=10*l,d=[],f=0;o.width=h,o.height=u,_.each(s.split(""),function(t){d.push(new e(f,t)),f+=c}),t(),$("canvas").on("click",function(t){var e=t.pageX-o.offsetLeft;_.each(d,function(t){e>t.x&&e<t.x+t.width&&!t.rotating&&t.rotate()})}),$("#solve").on("click",n),$("body").disableSelection()}}function colorPickerPage(){function t(t){var e=$("<div />",{"class":"swatch_container"}),n=$("<div />",{"class":"swatch",style:"background-color: rgb("+t.r+", "+t.g+", "+t.b+")"}),i=$("<div />",{"class":"close",text:"X"}).on("click",function(){$(this).parent().remove()});$(e).append(i).append(n).append('<div class="swatch_info"><div class="label">RGB: '+t.r+", "+t.g+", "+t.b+'</div><div class="label">HEX: #'+rgbComponentToHex(t.r)+rgbComponentToHex(t.g)+rgbComponentToHex(t.b)+"</div>").prependTo("#palette_container")}var e=$("canvas")[0],n=e.getContext("2d"),i=$("canvas")[1],o=i.getContext("2d"),r=300,a=300,s=40,c=300,l=new Image;e.width=r,e.height=a,i.width=s,i.height=c;var h={color:{r:255,g:0,b:0},makePalette:function(){var t=o.createLinearGradient(0,0,0,i.height);t.addColorStop(0,"rgb(255,   0,   0)"),t.addColorStop(.02,"rgb(255,   0,   0)"),t.addColorStop(.15,"rgb(255,   0, 255)"),t.addColorStop(.33,"rgb(0,     0, 255)"),t.addColorStop(.49,"rgb(0,   255, 255)"),t.addColorStop(.67,"rgb(0,   255,   0)"),t.addColorStop(.84,"rgb(255, 255,   0)"),t.addColorStop(.98,"rgb(255,   0,   0)"),t.addColorStop(1,"rgb(255,   0,   0)"),o.fillStyle=t,o.fillRect(0,0,i.width,i.height),l.onload=function(){n.fillStyle="rgb(255, 0, 0)",n.fillRect(0,0,e.width,e.height),n.drawImage(l,0,0,e.width,e.height)},$("#hue").on("mousedown",function(){$("#hue").on("mousemove",function(t){var e=t.pageX-i.offsetLeft,n=t.pageY-i.offsetTop,r=h.color,a=o.getImageData(e,n,1,1);$(document).css("cursor","crosshair"),h.color={r:a.data[0],g:a.data[1],b:a.data[2]},h.drawMainCanvas("rgb("+r.r+", "+r.g+", "+r.b+")")}),$(document).on("mouseup",function(){$("canvas").off("mousemove")})}),$("#main").on("mousedown",function(){$("#main").on("mousemove",function(t){var i=t.pageX-e.offsetLeft,o=t.pageY-e.offsetTop,r=n.getImageData(i,o,1,1);$(document).css("cursor","crosshair"),h.color={r:r.data[0],g:r.data[1],b:r.data[2]},h.updateSwatch()}),$(document).on("mouseup",function(){$("canvas").off("mousemove")})})},drawMainCanvas:function(t){h.color;n.clearRect(0,0,n.width,n.height),n.fillStyle=t,n.fillRect(0,0,e.width,e.height),n.drawImage(l,0,0,e.width,e.height),h.updateSwatch()},colorAsRGB:function(){var t=h.color;return t.r+", "+t.g+", "+t.b},colorAsHex:function(){var t=h.color,e=rgbComponentToHex(t.r),n=rgbComponentToHex(t.g),i=rgbComponentToHex(t.b);return e+n+i},updateSwatch:function(){$("#swatch").css("background-color","#"+h.colorAsHex()),$("#rgb").val(h.colorAsRGB),$("#hex").val(h.colorAsHex)}};$("input").on("change",function(){var t=$(this).val().replace(" ","");if("hex"==this.id){if(t=hexToRgb(t.replace("#",""))){var e=180/Math.PI*Math.atan2(Math.sqrt(3)*(t.g-t.b),2*t.r-t.g-t.b)+360;h.color=t,h.updateSwatch(),h.drawMainCanvas("hsl("+e+", 100%, 50%)")}}else if("rgb"==this.id){var n=[];if(t=t.replace(" ","").split(","),_.each(t,function(t){var e=parseInt(t);255>=e&&e>=0&&n.push(e)}),3==n.length){var e=180/Math.PI*Math.atan2(Math.sqrt(3)*(t[1]-t[2]),2*t[0]-t[1]-t[2])+360;h.color.r=n[0],h.color.g=n[1],h.color.b=n[2],h.updateSwatch(),h.drawMainCanvas("hsl("+e+", 100%, 50%)")}}}),h.makePalette(),$("button").on("click",function(){t(h.color)}),$("canvas").disableSelection(),l.src="/assets/color_picker_gradient.png"}function colorWalk(){function t(t,e,n,i,o){this.x=t,this.y=e,this.color=n,this.position=i,this.isDead=o,this.init=function(){$("<div>",{id:"block"+this.position,"class":"block",style:"left:"+this.x+"px; top: "+this.y+"px; background-color:"+this.color}).appendTo("#gameboard")},this.init()}function e(t){function e(t){var e=t.color;_.each(i,function(t){t.isDead&&n(t,e)}),c+=1,$(".score").text(c)}function n(t,e){var n=t.position,i=[n-1,n+1,n-r,n+r];n%r==0?i[0]=!1:n%r==r-1&&(i[1]=!1),i=_.reject(i,function(t){return 0>t||t>r*a-1?!0:t===!1?!0:void 0}),o(i,e)}function o(t,e){_.each(t,function(t){var n=i[t];n.color!=e||n.isDead||(n.isDead=!0,$("#block"+t).css("background-color","#d9d9d9"),s(n,e))})}function s(t,e){var o=_.some(i,function(t){return 0==t.isDead});o?n(t,e):$("#game_over").fadeIn(300)}this.color=t;var l=this;this.init=function(){$("<div>",{"class":"control btn",style:"background-color:"+this.color}).on("click",function(){e(l)}).appendTo("#control_container")},this.init()}function n(){var e=0,n=0;i=[],c=0,$("#gameboard").html(""),$("#wrapper").css({width:s*r,height:s*a}),$("#score").text("Moves: "+c),_.each(_.range(r*a),function(a){var c=o[randomInt(0,4)],l=!1;0==a&&(l=!0,c="#d9d9d9"),i.push(new t(e,n,c,a,l)),e+=s,e>=r*s&&(n+=s,e=0)})}var i=[],o=["#14b19f","#0e274e","#ec5257","#6c2275","#f9ac00"],r=30,a=20,s=20,c=0;n(),_.each(o,function(t){new e(t)}),$(".close").on("click",function(){$(".modal").fadeOut(300)})}function colorWorks(){function t(){var t=$("#color").val();/^([0-9a-fA-F]{6})?$/.test(t)&&""!=t?$("#submit").removeAttr("disabled"):$("#submit").attr("disabled","disabled")}function e(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}}function n(t,e,n){t/=255,e/=255,n/=255;var i,o,r=Math.max(t,e,n),a=Math.min(t,e,n),s=(r+a)/2;if(r==a)i=o=0;else{var c=r-a;switch(o=s>.5?c/(2-r-a):c/(r+a),r){case t:i=(e-n)/c+(n>e?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4}i/=6}return[i,o,s]}function i(t,e){var n=t[0],i=t[1],o=t[2],r="Lightened",a=[];return 0>e&&(r="Darkened"),_.each(_.range(5),function(t){var s=o+e*t;s=1>s?s:1,s=s>0?s:0,a.push({h:n,s:i,l:s,label:r,percent:(e*t*100).toFixed(2)})}),a}function o(t,e){var n=t[0],i=t[1],o=t[2],r="Saturated",a=[];return 0>e&&(r="Desaturated"),_.each(_.range(5),function(t){var s=i+e*t;s=1>s?s:1,s=s>0?s:0,a.push({h:n,s:s,l:o,label:r,percent:(e*t*100).toFixed(2)})}),a}function r(t,e,n){function i(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var o,r,a;if(0==e)o=r=a=n;else{var s=.5>n?n*(1+e):n+e-n*e,c=2*n-s;o=i(c,s,t+1/3),r=i(c,s,t),a=i(c,s,t-1/3)}return Math.round(255*o+65536).toString(16).substr(-2)+Math.round(255*r+65536).toString(16).substr(-2)+Math.round(255*a+65536).toString(16).substr(-2)}function a(t){var e=$("<div />",{"class":"swatch_row"}).prependTo("#swatch_section");_.each(t,function(t){var n=r(t.h,t.s,t.l),i=$("<div />",{"class":"swatch_container"}),o=$("<div />",{"class":"swatch","data-color":n,style:"background-color: #"+n}).on("click",function(){$("#color").val($(this).data("color")),$("#color").focus()});$(i).append(o).append('<div class="swatch_info"><div class="label">HEX: '+n+'</div><div class="label">'+t.label+": "+Math.abs(t.percent)+"%</div></div>").appendTo(e)})}$("#color_input").on("keyup",function(){t()}),$("#color_input").on("change",function(){t()}),$("form").on("submit",function(t){t.preventDefault();var r=$("#color").val();if(/^([0-9a-fA-F]{6})?$/.test(r)&&""!=r){var s,c=$("input:radio:checked").val(),l=.01*$("#percent").val().replace("%",""),h=e(r),u=n(h.r,h.g,h.b);("darken"==c||"desaturate"==c)&&(l*=-1),"darken"==c||"lighten"==c?s=i(u,l):("saturate"==c||"desaturate"==c)&&(s=o(u,l)),a(s)}else alert("Please enter a 6 digit hex number.")}),$("#reset").on("click",function(){$("#swatch_section").html(""),$("#submit").attr("disabled","disabled")})}function commerce(){function t(t){$.ajax({type:"POST",url:document.location.pathname,dataType:"json",data:{keyword:t},success:function(t){e(t)},error:function(){$("#loading").css("opacity","0"),alert("There was a problem with your request. Please try again.")}})}function e(t){i=t,null!=i[0].error?($("#loading").css("opacity","0"),alert(i[0].error)):i.length<=1?($("#loading").css("opacity","0"),alert("No results found.")):n()}function n(){_.each(i,function(t){if(t.image){var e=null==t.availability?"unknown":t.availability;$("<div>",{"class":"product_container"}).html('<div class="info"><p>'+t.title+'</p><a href="'+t.url+'"></a></div><img class="product_img" src='+t.image+'><div class="availability">Available '+e+"</div>").prependTo("#item_container")}}),$("#loading").css("opacity","0")}var i;$("#keyword").focus(),$("form").on("submit",function(e){e.preventDefault();var n=$("#keyword").val();$("#loading").css("opacity","1"),t(n)})}function confusedTwitter(){}function countdownClock(){function t(){var n=new Date,i=c-n;d=Math.floor(i/864e5);var o=i%864e5;u=Math.floor(o/36e5),o=i%36e5,h=Math.floor(o/6e4),o=i%6e4,l=Math.floor(o/1e3),d>9999?(a(),alert("Date too far in the future.")):(e(),setTimeout(t,500))}function e(){n(l,"sec_ones"),n(h,"min_ones"),n(u,"hour_ones"),n(d,"day_ones"),i(l,"sec_tens"),i(h,"min_tens"),i(u,"hour_tens"),i(d,"day_tens"),o(d,"day_hundreds"),r(d,"day_thousands")}function n(t,e){var n=t%10;s(n,e)}function i(t,e){var n=Math.floor(t/10);s(n,e)}function o(t,e){var n=Math.floor(t/100);
$(".hundreds").show(),0===n&&$(".hundreds").hide(),s(n,e)}function r(t,e){var n=Math.floor(t/1e3);$(".thousands").show(),0===n&&$(".thousands").hide(),s(n,e)}function a(){n(0,"sec_ones"),n(0,"min_ones"),n(0,"hour_ones"),n(0,"day_ones"),i(0,"sec_tens"),i(0,"min_tens"),i(0,"hour_tens"),i(0,"day_tens"),o(0,"day_hundreds"),r(0,"day_thousands")}function s(t,e){var e="."+e;0==t&&($(e+".bar").show(),$(e+".hor.mid").hide()),1==t&&($(e+".bar").hide(),$(e+".ver.top.right,"+e+".ver.bottom.right").show()),2==t&&($(e+".bar").show(),$(e+".ver.top.left,"+e+".ver.bottom.right").hide()),3==t&&($(e+".bar").show(),$(e+".ver.top.left,"+e+".ver.bottom.left").hide()),4==t&&($(e+".bar").show(),$(e+".hor.top,"+e+".hor.bottom,"+e+".ver.bottom.left").hide()),5==t&&($(e+".bar").show(),$(e+".ver.top.right,"+e+".ver.bottom.left").hide()),6==t&&($(e+".bar").show(),$(e+".ver.top.right").hide()),7==t&&($(e+".bar").hide(),$(e+".ver.top.right,"+e+".ver.bottom.right,"+e+".hor.top").show()),8==t&&$(e+".bar").show(),9==t&&($(e+".bar").show(),$(e+".ver.bottom.left").hide())}var c,l=0,h=0,u=0,d=0;a(),$("form").on("submit",function(e){e.preventDefault(),a();var n=Number($(".year").val()),i=Number($(".month").val()),o=Number($(".day").val()),r=$(".name").val();_.isNaN(n)?alert("Not a valid year."):_.isNaN(i)?alert("Please enter the month as a number, e.g. enter 3 for March."):_.isNaN(o)?alert("You haven't learned your days yet?"):(c=new Date(n,i-1,o),t(),$(".modal").fadeOut("600"),$("#event_name").text(r),$("#container").fadeIn("600"))})}function downTheWeight(){function t(){var t=$("#current_weight").val().replace(" ",""),n=$("#goal_weight").val().replace(" ",""),i=$("#diet_length").val().replace(" ",""),a=$("#height").val(),s="male"==$("input:radio:checked").val()?o:r,c=s[a];if(0>=t||0>=n||0>=i||isNaN(t)||isNaN(n)||isNaN(i))alert("All fields must be filled in with values greater than 0.");else{var l=t-c,h=-1/i*Math.log((n-c)/(t-c)),u=_.range(0,Number(i)+1),d=_.map(u,function(t){return(l*Math.exp(-h*t)+c).toFixed(2)});"NaN"==d[0]?alert("You're goal weight is too low. Please enter a higher number for your goal weight."):e(d)}}function e(t){var e=0,i=t[0],o=new Date;_.each(t,function(t,r){var a=n(o,r);e+=i-t,$("<tr />").append("<td>"+a+"</td>").append("<td>"+t+"</td>").append("<td>"+e.toFixed(2)+"</td>").appendTo("#weight_chart"),i=t}),$("#chart_container").fadeIn(300),$(".modal").fadeOut(300)}function n(t,e){return new_date=new Date(t.getTime()+24*e*60*60*1e3),new_date.getMonth()+1+"/"+new_date.getDate()+"/"+new_date.getFullYear()}var i=_.range(54,85),o={},r={};_.each(i,function(t,e){o[String(t)]=55.7+4.7*e,r[String(t)]=55.7+3.9*e}),$("form").on("submit",function(e){e.preventDefault(),$("input").blur(),t()}),$(".print").on("click",function(){window.print()}),$("#reset").on("click",function(){$("#chart_container").hide(),$(".modal").fadeIn(300),$("tbody").remove()})}function dryingPaint(){setTimeout(function(){$("#paint").removeClass("drying").addClass("dry"),$("#cracks").show()},72e5)}function effects(){var t=["bam.png","boom.png","crunch.png","kaboom.png","klang.png","krack.png","oomph.png","ow.png","phoomph.png","ping.png","pow.png","skreech.png","splat.png","thwack.png","wham.png","zazam.png","zoom.png"];t=_.map(t,function(t){var e="/assets/"+t;return $("<img/>")[0].src=e,e}),$("body").on("click",function(e){var n=e.pageX,i=e.pageY,o=t[randomInt(0,16)];$("<img src="+o+">").load(function(){$(this).css({top:i-this.height/2,left:n-this.width/2,position:"absolute"}).appendTo("#image_container")})}),$("body").disableSelection()}function electroBounce(){function t(){var n=Math.random()*c.height,s=randomColorHex(),l=Math.random()*c.width;0==d.length&&(i&&(i=!1,_.each(d,function(t){t.color=randomColorHex()}),$("#color_toggle").text("GO MONO"),$("#color_picker").hide()),o=150,r=1,a=1),d.push(new e(l,n,s)),d.length<30&&t()}function e(t,e,n){this.x=t,this.y=e,this.vx=randomInt(-2,2),this.vy=randomInt(-2,2),this.color=n,this.draw=function(){var t=this;_.each(d,function(e){dx=t.x-e.x,dy=t.y-e.y,dist=Math.sqrt(dx*dx+dy*dy),dist<o&&(l.beginPath(),l.strokeStyle=t.color,l.lineWidth=a,l.lineCap="round",l.moveTo(t.x,t.y),l.lineTo(e.x,e.y),l.stroke(),l.closePath())}),this.evolve()},this.evolve=function(){(this.x>=c.width||this.x<=0)&&(this.vx*=-1),(this.y>=c.height||this.y<=0)&&(this.vy*=-1),this.x+=this.vx*r,this.y+=this.vy*r}}function n(){l.fillStyle="rgba(0,0,0,0.3)",l.fillRect(0,0,c.width,c.height),_.each(d,function(t){t.draw()}),requestAnimFrame(n)}var i,o,r,a,s,c=$("canvas")[0],l=c.getContext("2d"),h=window.innerHeight,u=window.innerWidth,d=[],f="#ffffff";c.height=h,c.width=u,t(),n(),$("canvas").on("click",function(t){var n=t.pageX-c.offsetLeft,o=t.pageY-c.offsetTop,r=i?"#"+f:randomColorHex();d.push(new e(n,o,r))}),$("body").on("mousemove",function(){clearTimeout(s),$("#control_container").show(),s=setTimeout(function(){$("#control_container").fadeOut(500)},5e3)}),$("#control_container").on("click",function(){clearTimeout(s)}),$("#reset").on("click",function(){d=[],t()}),$(".speed").on("click",function(){r*="speed_inc"==this.id?1.1:.9}),$(".dist").on("click",function(){o+="dist_inc"==this.id?10:-10,o=o>0?o:0}),$(".width").on("click",function(){a+="width_inc"==this.id?1:-1,a=a>1?a:1}),$("#color_toggle").on("click",function(){i?(i=!1,_.each(d,function(t){t.color=randomColorHex()}),$("#color_toggle").text("GO MONO"),$("#color_picker").hide()):(i=!0,_.each(d,function(t){t.color=f}),$("#color_toggle").text("GO MULTI"),$("#color_picker").show())}),$(".picker").on("change",function(){f="#"+this.value,_.each(d,function(t){t.color=f})}),$("body").disableSelection()}function elevationPage(){function t(t){_.each(t,function(t,n){a.geocode({address:t},function(t,i){if(i==google.maps.GeocoderStatus.OK){var o=t[0].geometry.location;c.push(o),0==n?$("#start").attr("placeholder",t[0].formatted_address).val(""):$("#end").attr("placeholder",t[0].formatted_address).val(""),2==c.length&&e()}else alert("Geocode was not successful for the following reason: "+i)})})}function e(){var t={path:c,samples:f};s.getElevationAlongPath(t,n)}function n(t,e){h.clearRect(0,0,u,d),e==google.maps.ElevationStatus.OK?i(t):alert("Unable to plot elevations for the following reason: "+e)}function i(t){var e=_.map(t,function(t){return t.elevation}),n=Math.max.apply(Math,e),i=Math.min.apply(Math,e),r=_.map(e,function(t){return d-(t-i)/(n-i)*d});$("#min").text("Min Elevation: "+i.toFixed(2)+" m"),$("#max").text("Max Elevation: "+n.toFixed(2)+" m"),o(0,r,1)}function o(t,e,n){var i=u/f;e.length>=n+1&&(h.beginPath(),h.lineWidth=3,h.strokeStyle="#fff",h.moveTo(t,e[n-1]),t+=i,h.lineTo(t,e[n]),h.lineJoin="miter",h.stroke(),h.closePath(),r=setTimeout(function(){o(t,e,n+1)},50))}var r,a=new google.maps.Geocoder,s=new google.maps.ElevationService,c=[],l=$("canvas")[0],h=l.getContext("2d"),u=750,d=450,f=250;l.width=u,l.height=d,$("#start").focus(),$("form").on("submit",function(e){e.preventDefault(),c=[];var n=$("#start").val(),i=$("#end").val(),o=[n,i];clearTimeout(r),$("#form_container").fadeOut(300,function(){$("h1").remove(),$("p").remove(),$(".btn").css("display","inline-block"),$(".input").css({margin:5}),$("#start").focus(),$("#form_container").css({width:720,padding:10}).fadeIn(300),$("#graph_container").fadeIn(300,function(){t(o)})})})}function emergencyOff(){function t(){$(".inner_modal.progress_bar").fadeIn(300),setTimeout(function(){$(".inner_bar").css("width",i),e()},100)}function e(){i++,i>395?(i=10,n()):($(".inner_bar").css("width",i),setTimeout(e,20))}function n(){$(".inner_modal.progress_bar").hide(),$(".inner_modal.shut_down").show(),$("#content").addClass("flicker"),setTimeout(function(){$("#content").html(""),$("body").css("background-color","black"),$(".shut_down").addClass("flicker"),setTimeout(function(){$("body").html("")},1e3)},400)}var i=10;$("button").on("click",function(){$(".modal").fadeIn(800),setTimeout(t,800)})}function fishyFriend(){function t(){this.x=randomInt(0,c),this.y=randomInt(s+70,s+100),this.speed=2*Math.random(),this.size=6*Math.random()}function e(){_.each(f,function(e,n){var i=a.createRadialGradient(e.size+e.x,e.size+e.y,3*e.size,e.size+e.x,e.size+e.y,e.size);i.addColorStop(0,"rgba(91,174,252,0.7)"),i.addColorStop(.7,"rgba(207,231,254,0.5)"),a.fillStyle=i,a.shadowBlur=2,a.shadowColor="rgba(255,255,255, 0.3)",a.beginPath(),a.arc(e.x,e.y,e.size,0,2*Math.PI),a.fill(),e.y<0-2*e.size&&(f[n]=new t),e.y-=e.speed}),n()}function n(){l.horizontal+100>u?a.drawImage(l,l.horizontal,l.vertical):a.drawImage(h,h.horizontal,h.vertical),setTimeout(o,50)}function i(){l.horizontal+=(u-l.horizontal-100)/40,l.vertical+=(d-l.vertical-61.5)/40,h.horizontal+=(u-h.horizontal-100)/40,h.vertical+=(d-h.vertical-61.5)/40,e()}function o(){a.clearRect(0,0,c,s),i()}var r=$("canvas")[0],a=r.getContext("2d"),s=window.innerHeight,c=window.innerWidth,l=new Image,h=new Image,u=0,d=0,f=[];r.height=s,r.width=c,$(document).on("mousemove",function(t){u=t.pageX,d=t.pageY}),document.addEventListener("touchmove",function(t){t.preventDefault(),u=t.pageX,d=t.pageY},!1),h.onload=function(){o();for(var e=0;40>e;e++)f.push(new t)},l.horizontal=0,l.vertical=0,h.horizontal=0,h.vertical=0,l.src="/assets/fishy_friend.png",h.src="/assets/fishy_friend_right.png"}function forest(){function t(t,e){i.fillStyle=a,i.strokeStyle="rgba(255,255,255,0.1)",i.save(),i.beginPath(),i.translate(t,e),i.rotate(randomInt(0,360)*(Math.PI/180)),i.translate(-t,-e),i.moveTo(t,e),i.quadraticCurveTo(t+7,e-7,t+14,e),i.moveTo(t,e),i.quadraticCurveTo(t+7,e+7,t+14,e),i.lineJoin="round",i.fill(),i.stroke(),i.restore()}function e(t,n,o,r,s){if(s>0){var c=t+r*Math.cos(o),l=n+r*Math.sin(o),h=randomInt(2,5),u=.5*r+randomInt(-5,10);i.lineWidth=.6*s,i.strokeStyle=a,i.beginPath(),i.moveTo(t,n),i.lineTo(c,l),i.lineJoin="miter",i.stroke(),_.each(_.range(h),function(){var t=o+3*Math.random()*Math.PI/4-3*Math.PI/4/2,n=s-1;setTimeout(function(){e(c,l,t,u,n)},70)})}}var n=$("canvas")[0],i=n.getContext("2d"),o=window.innerWidth,r=window.innerHeight,a="#592718",s="tree";n.width=o,n.height=r,i.fillStyle="#fff",i.fillRect(0,0,o,r),$("#save").on("click",function(){var t=n.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$("canvas").on("click",function(i){var o=i.pageX-n.offsetLeft,r=i.pageY-n.offsetTop;"tree"==s?e(o,r,-Math.PI/2,randomInt(50,80),5):t(o,r)}),$("canvas").on("mousedown",function(){"leaf"==s&&($("canvas").on("mousemove",function(e){var i=e.pageX-n.offsetLeft,o=e.pageY-n.offsetTop;t(i,o)}),$("canvas").on("mouseup",function(){$("canvas").off("mousemove")}))}),$(".color").on("change",function(){a="#"+this.color}),$("#tree_btn").on("click",function(){s="tree"}),$("#leaf_btn").on("click",function(){s="leaf"}),$("body").disableSelection()}function googleFontsBrowser(){function t(t){_.each(t.items,function(t){font={family:t.family,subsets:t.subsets,variants:t.variants},r.push(font.family),a.push(font)})}function e(t){length=t.length,c.show(),c.html(""),t.length&&_.each(r,function(e){e.slice(0,length).toLowerCase()==t.toLowerCase()&&$("<li>",{text:e}).on("click",function(){s.val(e),n(e)}).appendTo(c)})}function n(t){t=$.trim(t),c.hide();var e=_.find(r,function(e){return e.toLowerCase()==t.toLowerCase()});if(e){var n=_.findWhere(a,{family:e}),i=o+n.family.replace(/ /g,"+")+":"+n.variants.join()+"&subset="+n.subsets.join();$(".google_font").remove(),$(s).attr("placeholder",n.family).val(""),$(".sample").css("font-family",n.family),$("#api_tag").text('<link href="'+i+'" rel="stylesheet" type="text/css">'),$("head").append('<link href="'+i+'" rel="stylesheet" type="text/css" class="google_font">')}}var i="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDgafgp1DZT6I464W9r4FDiD25HfC3a1zc",o="https://fonts.googleapis.com/css?family=",r=[],a=[],s=$("#font_input"),c=$("#autocomplete");$.ajax({url:i,type:"GET",dataType:"json",success:function(e){t(e)},error:function(){alert("There was a problem retrieving the fonts.")}}),s.on("keyup",function(){e($(this).val())}).on("focus",function(){c.show()}),$("form").on("submit",function(t){t.preventDefault(),n(s.val())})}function globGlob(){function t(t,e,n,i){this.opacity=.9/(i.l+1),this.x=t,this.y=e,this.radius=n,this.color=i,this.draw=function(){a.beginPath(),a.fillStyle="hsl("+this.color.h+","+this.color.s+"%, "+this.color.l+"%)",a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.fill(),a.strokeStyle="rgba(0,0,0, "+this.opacity+")",a.lineWidth=2,a.stroke(),a.closePath(),a.beginPath(),a.arc(this.x,this.y,this.radius-2,0,2*Math.PI),a.strokeStyle="rgba(0,0,0, "+this.opacity+")",a.lineWidth=4,a.stroke(),a.closePath(),a.beginPath(),a.arc(this.x,this.y,this.radius-3,0,2*Math.PI),a.strokeStyle="rgba(0,0,0, "+this.opacity+")",a.lineWidth=5,a.stroke(),a.closePath()}}function e(){$("body").off(),$(".score").text(l[1].radius+" awesome units!"),$("#kudos").text(l[1].radius>l[0].radius?"Nice work beating the last glob grower!":"Too bad you couldn't beat the last glob grower, though."),$(".end").fadeIn(400),$.ajax({type:"PUT",url:"/glob_glob/globs/1",data:{size:l[1].radius}})}function n(){return g=(new Date).getTime()-o,f=Math.ceil(d-g/1e3),a.clearRect(0,0,c,s),_.each(l,function(t){t.draw()}),a.fillStyle="#eb7405",a.font="30px Futura",a.textAlign="center",a.fillText(f,c/2,80),g>=1e3*d?void e():void setTimeout(n,30)}function i(){l.push(new t(c/3,s/2,m,h)),l.push(new t(c*(2/3),s/2,10,u)),_.each(l,function(t){t.draw()}),a.fillStyle="#eb7405",a.font="30px Futura",a.textAlign="center",a.fillText(f,c/2,80)}var o,r=$("canvas")[0],a=r.getContext("2d"),s=window.innerHeight,c=window.innerWidth,l=[],h={h:336.8,s:50,l:44.7},u={h:163,s:80,l:45.1},d=10,f=d,p=!1,g=0,m=$("canvas").data("size");r.height=s,r.width=c,i(),$("body").on("keydown",function(t){var e=t.charCode||t.keyCode;32!=e||p||(p=!0,o=(new Date).getTime(),$(".start").fadeOut(200),n())}),$("body").on("keyup",function(t){var e=t.charCode||t.keyCode;32==e&&(l[1].radius+=1)}),$("body").disableSelection()}function globulator(){function t(t,e,n,i){this.opacity=.9/(i.l+1),this.x=t,this.y=e,this.radius=n,this.color=i,this.tracking=!1,this.volume=function(){return Math.PI*this.radius*(Math.PI*p*p/4+p*(this.radius-p))},this.trackMouse=function(t,e){this.tracking&&(this.x=t,this.y=e)},this.draw=function(){l.beginPath(),l.fillStyle="hsl("+this.color.h+","+this.color.s+"%, "+this.color.l+"%)",l.arc(this.x,this.y,this.radius,0,2*Math.PI),l.fill(),l.strokeStyle="rgba(0,0,0, "+this.opacity+")",l.lineWidth=2,l.stroke(),l.closePath(),l.beginPath(),l.arc(this.x,this.y,this.radius-2,0,2*Math.PI),l.strokeStyle="rgba(0,0,0, "+this.opacity+")",l.lineWidth=4,l.stroke(),l.closePath(),l.beginPath(),l.arc(this.x,this.y,this.radius-3,0,2*Math.PI),l.strokeStyle="rgba(0,0,0, "+this.opacity+")",l.lineWidth=5,l.stroke(),l.closePath()},this.drag=function(t,e){this.x=t,this.y=e}}function e(e,n,i,o){d.push(new t(e,n,i,o))}function n(){l.clearRect(0,0,h,u),_.each(d,function(t){t.draw()}),requestAnimFrame(n)}function i(t,e){return _.each(d,function(n){t>n.x-n.radius&&t<n.x+n.radius&&e>n.y-n.radius&&e<n.y+n.radius&&(m=n,m.tracking=!0)}),null}function o(t,e){var n=Math.PI*p,i=Math.PI*Math.PI*p*p/4-Math.PI*p*p,o=-t-e;return(-i+Math.pow(i*i-4*n*o,.5))/(2*n)}function r(t,e){var n=t.volume()+e.volume(),i=t.volume()/n*t.x+e.volume()/n*e.x,o=t.volume()/n*t.y+e.volume()/n*e.y;return{x:i,y:o}}function a(t,e){var n=t.volume()+e.volume(),i=(t.color.h+e.color.h)%360,o=t.volume()/n*t.color.s+e.volume()/n*e.color.s,r=t.volume()/n*t.color.l+e.volume()/n*e.color.l;return{h:i,s:o,l:r}}function s(){var t,e,n;d=_.reject(d,function(i){var s=Math.sqrt(Math.pow(m.x-i.x,2)+Math.pow(m.y-i.y,2));return m!=i&&s<m.radius+i.radius-4?(t=o(m.volume(),i.volume()),e=r(m,i),n=a(m,i),!0):void 0}),t&&(m.x=e.x,m.y=e.y,m.radius=t,m.color=n,m.opacity=.9/(n.l+1))}var c=$("canvas")[0],l=c.getContext("2d"),h=window.innerWidth,u=window.innerHeight,d=[],f=!0,p=5,g={x:0,y:0},m=null;c.height=u,c.width=h,$("canvas").on("mousedown",function(t){mouse_x=t.pageX-c.offsetLeft,mouse_y=t.pageY-c.offsetTop,i(mouse_x,mouse_y),f=!0,g={x:mouse_x,y:mouse_y}}),$("canvas").on("mousemove",function(t){mouse_x=t.pageX-c.offsetLeft,mouse_y=t.pageY-c.offsetTop,(Math.abs(g.x-mouse_x)>10||Math.abs(g.y-mouse_y)>10)&&(f=!1),m&&(m.trackMouse(mouse_x,mouse_y),s())}),$("canvas").on("mouseup",function(){m&&(m.tracking=!1,m=null)}),$("canvas").on("click",function(t){var n=!1,i=t.pageX-c.offsetLeft,o=t.pageY-c.offsetTop;_.each(d,function(t){i>t.x-t.radius&&i<t.x+t.radius&&o>t.y-t.radius&&o<t.y+t.radius&&(n=!0)}),f&&!n&&e(i,o,randomInt(5,50),randomColorHSL())}),n(),$("body").disableSelection()}function hangmanGame(){function t(){g.strokeStyle="#7f8c8d",g.lineWidth=5,g.beginPath(),g.moveTo(250,300),g.lineTo(250,50),g.lineTo(350,50),g.stroke(),g.closePath()}function e(){g.fillStyle="#fff",g.strokeStyle="#2c3e50",g.lineWidth=5,g.beginPath(),g.arc(350.5,80,30,0,2*Math.PI),g.closePath(),g.stroke(),g.fill()}function n(){g.strokeStyle="#2c3e50",g.lineWidth=3,g.beginPath(),g.moveTo(350.5,110),g.lineTo(350.5,190),g.closePath(),g.stroke()}function i(){g.strokeStyle="#2c3e50",g.lineWidth=3,g.beginPath(),g.moveTo(350.5,135),g.lineTo(290,100),g.closePath(),g.stroke()}function o(){g.strokeStyle="#2c3e50",g.lineWidth=3,g.beginPath(),g.moveTo(350.5,135),g.lineTo(410,100),g.closePath(),g.stroke()}function r(){g.strokeStyle="#2c3e50",g.lineWidth=3,g.beginPath(),g.moveTo(350.5,189.5),g.lineTo(385,250),g.closePath(),g.stroke()}function a(){g.strokeStyle="#2c3e50",g.lineWidth=3,g.beginPath(),g.moveTo(350.5,189.5),g.lineTo(315,250),g.closePath(),g.stroke()}function s(){var t=b.split("");_.each(t,function(t,e){$("<div/>",{"class":"letter_slot",id:e}).appendTo("#word_container")})}function c(t,e){_.each(t,function(t){$("#"+t).text(e),x++}),x==b.length&&k&&$(".win").fadeIn(300)}function l(){_.each(y,function(t){$("<button/>",{text:t,id:"btn_"+t}).on("click",function(){$(this).attr("disabled","disabled").off(),h($(this).text())}).appendTo("#btn_container")})}function h(t){for(var s=b,l=[];-1!=_.indexOf(s,t);){var h=_.lastIndexOf(s,t);l.push(h),s=s.slice(0,h)}if(l.length>0)c(l,t);else{switch(w){case 0:e();break;case 1:n();break;case 2:i();break;case 3:o();break;case 4:r();break;case 5:a(),u()}w++}}function u(){k=!1,$(".game_over").fadeIn(500),_.each(b,function(t,e){""==$("#"+e).text()&&$("#"+e).addClass("fail").text(t)})}function d(){s(),t(),l()}function f(){var t=new Array("abate","aberrant","abscond","accolade","acerbic","acumen","adulation","adulterate","aesthetic","aggrandize","alacrity","alchemy","amalgamate","ameliorate","amenable","anachronism","anomaly","approbation","archaic","arduous","ascetic","assuage","astringent","audacious","austere","avarice","aver","axiom","bolster","bombast","bombastic","bucolic","burgeon","cacophony","canon","canonical","capricious","castigation","catalyst","caustic","censure","chary","chicanery","cogent","complaisance","connoisseur","contentious","contrite","convention","convoluted","credulous","culpable","cynicism","dearth","decorum","demur","derision","desiccate","diatribe","didactic","dilettante","disabuse","discordant","discretion","disinterested","disparage","disparate","dissemble","divulge","dogmatic","ebullience","eccentric","eclectic","effrontery","elegy","eloquent","emollient","empirical","endemic","enervate","enigmatic","ennui","ephemeral","equivocate","erudite","esoteric","eulogy","evanescent","exacerbate","exculpate","exigent","exonerate","extemporaneous","facetious","fallacy","fawn","fervent","filibuster","flout","fortuitous","fulminate","furtive","garrulous","germane","glib","grandiloquence","gregarious","hackneyed","halcyon","harangue","hedonism","hegemony","heretical","hubris","hyperbole","iconoclast","idolatrous","imminent","immutable","impassive","impecunious","imperturbable","impetuous","implacable","impunity","inchoate","incipient","indifferent","inert","infelicitous","ingenuous","inimical","innocuous","insipid","intractable","intransigent","intrepid","inured","inveigle","irascible","laconic","laud","loquacious","lucid","luminous","magnanimity","malevolent","malleable","martial","maverick","mendacity","mercurial","meticulous","misanthrope","mitigate","mollify","morose","mundane","nebulous","neologism","neophyte","noxious","obdurate","obfuscate","obsequious","obstinate","obtuse","obviate","occlude","odious","onerous","opaque","opprobrium","oscillation","ostentatious","paean","parody","pedagogy","pedantic","penurious","penury","perennial","perfidy","perfunctory","pernicious","perspicacious","peruse","pervade","pervasive","phlegmatic","pine","pious","pirate","pith","pithy","placate","platitude","plethora","plummet","polemical","pragmatic","prattle","precipitate","precursor","predilection","preen","prescience","presumptuous","prevaricate","pristine","probity","proclivity","prodigal","prodigious","profligate","profuse","proliferate","prolific","propensity","prosaic","pungent","putrefy","quaff","qualm","querulous","query","quiescence","quixotic","quotidian","rancorous","rarefy","recalcitrant","recant","recondite","redoubtable","refulgent","refute","relegate","renege","repudiate","rescind","reticent","reverent","rhetoric","salubrious","sanction","satire","sedulous","shard","solicitous","solvent","soporific","sordid","sparse","specious","spendthrift","sporadic","spurious","squalid","squander","static","stoic","stupefy","stymie","subpoena","subtle","succinct","superfluous","supplant","surfeit","synthesis","tacit","tenacity","terse","tirade","torpid","torque","tortuous","tout","transient","trenchant","truculent","ubiquitous","unfeigned","untenable","urbane","vacillate","variegated","veracity","vexation","vigilant","vilify","virulent","viscous","vituperate","volatile","voracious","waver","zealous");return t[parseInt(Math.random()*t.length)]}var p=$("canvas")[0],g=p.getContext("2d"),m=300,v=700,y="abcdefghijklmnopqrstuvwxyz".split(""),b=f(),w=0,x=0,k=!0;p.height=m,p.width=v,d(),$("body").on("keypress",function(t){var e=t.charCode||t.keyCode;if(e>=97&&122>=e){var n=String.fromCharCode(e);$("#btn_"+n).click()}})}function herePage(){function t(t){$("#loading").fadeIn(300),$.ajax({type:"POST",url:"/here/page",dataType:"json",data:{lat:t.coords.latitude,lng:t.coords.longitude},complete:function(t){n(t.responseText)},error:function(){$("#error p").html('Looks like there was a problem finding your location. <br> Maybe <a href="/here/page">try again</a>?'),$("#error").show()}})}function e(t){$("#start").hide(),$("#error p").html(1==t.code?'This website requires location services. <br> Please allow geolocation and <a href="/here/page">reload</a> to continue.':'Looks like there was a problem finding your location. <br> Maybe <a href="/here/page">try again</a>?'),$("#error").show()}function n(t){var e=$.parseJSON(t);e.length<1?($("#info, #loading").hide(),$("#error p").text("Oh dear, this is unfortunate. We can't seem to find any Instagram photos near you."),$("#error").fadeIn()):(_.each(e,function(t){$("<img />",{src:t.img_url}).appendTo("#img_container")}),i())}function i(){$("#info, #loading").fadeOut(200,function(){$("#here").fadeIn(800,function(){setTimeout(function(){$(".modal").fadeOut(1e3)},1200)})})}navigator.geolocation.getCurrentPosition(t,e)}function hollywoodSign(){function t(){blink=setInterval(function(){$(".letter").css("color",randomColorHex())},500)}$("#l0").on("click",function(){var t=150;_.each(_.range(9),function(e,n){setTimeout(function(){$("#l"+e).addClass("wave")},n*t),setTimeout(function(){$("#l"+e).removeClass("wave")},n*t+700)})}),$("#l4").on("click",function(){t(),$(this).off()}),$("#l5").on("click",function(){clearInterval(blink),$(".letter").css("color","#ebe0d1"),$("#l4").on("click",function(){t(),$(this).off()})}),$("#l8").on("click",function(){$(this).addClass("dangle"),setTimeout(function(){$("#l8").removeClass("dangle")},4e3)}),$("body").disableSelection()}function hourglass(){function t(){var t=110/(l/h);u.y+=t,d.y-=t,setTimeout(i,h)}function e(){r.fillStyle="#1abc9c",r.strokeStyle="#1abc9c",r.fillRect(0,200,s,u.y),r.fillRect(0,397,s,d.y),u.y>=0?(u.y=0,$(".times_up").show()):(n(),t()),r.drawImage(c,c.horizontal,c.vertical)}function n(){r.beginPath(),r.lineWidth=5,r.moveTo(s/2,200),r.lineTo(s/2,a),r.closePath(),r.stroke()}function i(){r.clearRect(0,0,s,a),e()}var o=$("canvas")[0],r=o.getContext("2d"),a=400,s=201,c=new Image,l=1e4,h=50,u={y:-110},d={y:0};o.height=a,o.width=s,$("form").on("submit",function(t){t.preventDefault();var e=Number($(".time").val());_.isNaN(e)?alert("Time limit must be a number."):(l=6e4*e,$(".modal").hide(),i())}),c.horizontal=0,c.vertical=0,c.src="/assets/hourglass.png"}function imageEditor(){function t(){s.clearRect(0,0,a.width,a.height)}function e(){for(var t=s.getImageData(0,0,a.width,a.height),e=t.data,n=0;n<e.length;n+=4){var i=.2126*e[n]+.7152*e[n+1]+.0722*e[n+2];e[n]=i,e[n+1]=i,e[n+2]=i}s.putImageData(t,0,0)}function n(){for(var t=s.getImageData(0,0,a.width,a.height),e=t.data,n=0;n<e.length;n+=4)e[n]=.393*e[n]+.769*e[n+1]+.189*e[n+2],e[n+1]=.349*e[n]+.686*e[n+1]+.168*e[n+2],e[n+2]=.272*e[n]+.534*e[n+1]+.131*e[n+2];s.putImageData(t,0,0)}function i(t){for(var e=s.getImageData(0,0,a.width,a.height),n=e.data,i=0;i<n.length;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t;s.putImageData(e,0,0)}function o(t,e){for(var n=s.getImageData(0,0,a.width,a.height),i=n.data,o=0;o<i.length;o+=4)"red"==t?i[o]+=e:"green"==t?i[o+1]+=e:"blue"==t?i[o+2]+=e:"alpha"==t&&(i[o+3]+=e);s.putImageData(n,0,0)}function r(){f=!1,a.width=h.width,a.height=h.height,s.drawImage(h,0,0)}var a=$("canvas")[0],s=a.getContext("2d"),c=window.innerWidth-160,l=window.innerHeight-100,h=document.createElement("img"),u=document.createElement("canvas"),d=u.getContext("2d"),f=!0,p=$("body")[0];a.width=c,a.height=l,h.addEventListener("load",function(){t(),r()},!1),p.addEventListener("dragover",function(t){$(".modal").fadeOut(300),t.preventDefault()},!1),p.addEventListener("drop",function(t){var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if("undefined"!=typeof FileReader&&-1!=n.type.indexOf("image")){var i=new FileReader;i.onload=function(t){h.src=t.target.result,r()},i.readAsDataURL(n)}}t.preventDefault()},!1),$("#image_loader").on("change",function(t){$(".modal").fadeOut(300);var e=new FileReader;e.onload=function(t){h.src=t.target.result,r()},e.readAsDataURL(t.target.files[0])}),$("#grayscale").on("click",function(){e()}),$("#vintage").on("click",function(){n()}),$(".bright").on("click",function(){var t=$(this).data("value");i(3*t)}),$(".rgba").on("click",function(){var t=$(this).data("value"),e=$(this).data("color");o(e,3*t)}),$(".resize").on("change",function(){var e=$(this).val();$.isNumeric(e)?(d.clearRect(0,0,u.width,u.height),u.width=a.width,u.height=a.height,d.drawImage(a,0,0),t(),a.height*=e,a.width*=e,s.drawImage(u,0,0,a.width,a.height)):alert("Resize percentage must be a decimal number."),$(this).val("")}),$("#save").on("click",function(){var t=a.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$("#reset").on("click",function(){t(),f||r()}),$("#clear").on("click",function(){t(),a.width=c,a.height=l,f=!0,$(".modal").show()}),$("body").disableSelection()}function imagePalette(){function t(t){var n=$("<div />",{"class":"swatch_container"}),i=$("<div />",{"class":"swatch",style:"background-color: rgb("+t[0]+", "+t[1]+", "+t[2]+")"});$(n).append(i).append('<div class="swatch_info"><div class="label">RGB: '+t[0]+", "+t[1]+", "+t[2]+'</div><div class="label">HEX: #'+e(t[0])+e(t[1])+e(t[2])+"</div>").prependTo("#palette")}function e(t){var e=t.toString(16);return 1==e.length?"0"+e:e}var n=$("canvas")[0],i=n.getContext("2d"),o=document.createElement("img"),r=300,a=200;n.width=r,n.height=a;var s=!0,c=function(){i.clearRect(0,0,n.width,n.height),s=!1};i.font="16px Geneva",i.textAlign="center",i.fillStyle="#999",i.fillText("Drag an image from your",r/2,a/2-60),i.fillText("computer into this box.",r/2,a/2-35),i.fillText("Click on the image to add",r/2,a/2+35),i.fillText("the color to the color palette.",r/2,a/2+60),o.addEventListener("load",function(){c(),n.width=o.width,n.height=o.height,$("canvas").css("cursor","crosshair"),i.drawImage(o,0,0)},!1),n.addEventListener("dragover",function(t){t.preventDefault()},!1),n.addEventListener("drop",function(t){var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if("undefined"!=typeof FileReader&&-1!=n.type.indexOf("image")){var i=new FileReader;i.onload=function(t){o.src=t.target.result},i.readAsDataURL(n)}}t.preventDefault()},!1),$("canvas").on("click",function(e){if(!s){var o=e.pageX-n.offsetLeft,r=e.pageY-n.offsetTop,a=i.getImageData(o,r,1,1),c=a.data;$("button").show(),t(c)}}),$("button").on("click",function(){$("button").hide(),$("#palette").html("")})}function infiniteDescent(){function t(){var e=Math.PI,i=0;for(n.clearRect(-s/2,-s/2,2*s,2*s),n.beginPath(),n.translate(r,a),n.rotate(.1);s>i;)e+=.1,i=.07*Math.pow(e,2),x=0+i*Math.cos(e),y=0+i*Math.sin(e),n.lineTo(x,y);n.strokeStyle="#f0f0f0",n.lineWidth=5,n.stroke(),n.closePath(),n.translate(-r,-a),setTimeout(t,40)}{var e=$("canvas")[0],n=e.getContext("2d"),i=window.innerHeight,o=window.innerWidth,r=o/2,a=i/2,s=o>i?o:i;new Howl({urls:["/assets/infinite_descent.mp3","/assets/infinite_descent.ogg"],loop:!0,autoplay:!0,volume:.85})}e.height=i,e.width=o,t()}function keepItUpGame(){function t(){l.clearRect(0,0,u,h),e(),r()}function e(){l.fillStyle="#17b078",l.beginPath(),l.arc(g.x,g.y,g.r,0,2*Math.PI),l.fill(),l.closePath(),n()}function n(){g.y=g.y0-g.v0y*g.time+p*Math.pow(g.time,2),g.time+=f,g.y>h+2*g.r&&(clearInterval(s),$("input.score").val(d),$("h2.score").text("Your score is "+d),$("#game_over").show())}function i(t,e){return t>g.x-g.r&&t<g.x+g.r&&e>g.y-g.r&&e<g.y+g.r?!0:void 0}function o(){g.time=0,g.y0=g.y,g.v0y+=.025}function r(){l.fillStyle="#de1d91",l.font="bold 18px Lucida Grande",l.fillText("Score: "+d,30,30)}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var a,s,c=$("canvas")[0],l=c.getContext("2d"),h=.8*window.innerHeight,u=500,d=0,f=30,p=25e-5,g={x:u/2,y:h-30,x0:u/2,y0:h-30,v0y:.23,time:0,r:20};c.height=h,c.width=u,t(),$(".start_btn").on("click",function(){$("#start").fadeOut("400")}),$("canvas").on("mousedown",function(e){var n=e.pageX-c.offsetLeft,r=e.pageY-c.offsetTop;i(n,r)&&(void 0===a?(s=setInterval(t,f),a=!0,d++):(o(),d++))}),$("form").on("submit",function(t){$("#enter_name").val().length>30?(t.preventDefault(),$("#enter_name").val(""),alert("Your name is too long. Better think of a nickname.")):""==$("#enter_name").val().trim()?(t.preventDefault(),$("#enter_name").val(""),alert("Too embarrassed to enter a name, huh? TOO BAD! Name can't be empty!")):($("#enter_name").val($("#enter_name").val().trim()),$("input.score").val(d))}),$("body").disableSelection()}function kingOfComments(){$(".comment_entry").focus(),$("#comment_entry_form").on("submit",function(t){$(".name_entry").val().length>30?(t.preventDefault(),$("#enter_name").val(""),alert("Name limit is 30 characters")):""==$(".comment_entry").val().trim()?(t.preventDefault(),$(".comment_entry").val(""),alert("You really have nothing to say except nothing?")):($(".comment_entry").val($(".comment_entry").val().trim()),$(".name_entry").val($(".name_entry").val().trim()))}),$(".voter").on("keypress",function(t){13==t.which&&t.preventDefault()})}function letterStorm(){function t(){d.push(new n),d.length<12&&setTimeout(t,600)}function e(){l.clearRect(0,0,c.width,c.height),v.draw(),y.draw();for(var t=0;t<d.length;t++)d[t].draw();p.draw(),g.draw(),m.draw(),y.time<=0?($("#game_over p").text("Your score: "+v.score),$("#game_over").show()):requestAnimFrame(e)}function n(){this.init=function(){this.character=f[randomInt(0,f.length-1)],this.x=randomInt(10,c.width-10),this.y=-20,this.y0=-20,this.v0y=0,this.time=0,this.acceleration=3e-6,this.radius=20},this.draw=function(){var t=this.x-22,e=this.y-40;l.beginPath(),l.fillStyle="#d4eefb",l.moveTo(20+t,1+e),l.bezierCurveTo(7+t,21+e,1+t,31+e,1+t,43+e),l.bezierCurveTo(1+t,47+e,6+t,60+e,23+t,60+e),l.bezierCurveTo(40+t,60+e,44+t,46+e,44+t,42+e),l.bezierCurveTo(44+t,31+e,37+t,21+e,21+t,1+e),l.fill(),l.closePath(),l.beginPath(),l.font="28px Futura",l.textAlign="center",l.textBaseline="middle",l.fillStyle="#0e1343",l.fillText(this.character,this.x,this.y),l.closePath(),this.evolve()},this.evolve=function(){this.y+=1.6,this.y>c.height+this.radius+70&&this.init()},this.init()}function i(t,e){_.some(d,function(n){return a(t,e,n.x,n.y,n.radius)?(r(n.character),n.init(),!0):!1})}function o(t){t=t.toUpperCase(),_.some(d,function(e){return t==e.character?(r(e.character),e.init(),!0):!1})}function r(t){p.word+=t}function a(t,e,n,i,o){var r=t-n,a=e-i;return o*o>=r*r+a*a
}function s(t){t=t.toLowerCase(),-1!=_.indexOf(big_word_list,t)?(v.score+=Math.round(Math.pow(t.length,1.5)),y.time+=8*t.length,$("#status h1").text("CORRECT").addClass("correct")):$("#status h1").text("WRONG").addClass("wrong"),$("#status").show(),setTimeout(function(){$("#status").fadeOut(300)},1200),p.word=""}var c=$("canvas")[0],l=c.getContext("2d"),h=800,u=580,d=[],f="eeeeeeaaaaiiiioooonnnnrrrrttttlllssssuuudddgggbbbcccmmmppffhhvvvwwwyyykkjjxxqqzz".toUpperCase().split(""),p={x:h/3,y:u-25,word:"",draw:function(){l.beginPath(),l.fillStyle="#0e1343",l.fillRect(0,c.height-50,c.width,c.height),l.fillStyle="#fff",l.font="28px Futura",l.textAlign="center",l.textBaseline="middle",l.fillText(this.word,this.x,this.y),l.closePath()}},g={x:h-200,y:u-50,width:100,draw:function(){l.beginPath(),l.fillStyle="#04acff",l.fillRect(this.x,this.y,this.width,c.height),l.fillStyle="#fff",l.font="18px Futura",l.textAlign="center",l.textBaseline="middle",l.fillText("Submit",this.x+this.width/2,p.y),l.closePath()}},m={x:h-100,y:u-50,width:100,draw:function(){l.beginPath(),l.fillStyle="#ff6600",l.fillRect(this.x,this.y,this.width,c.height),l.fillStyle="#fff",l.font="18px Futura",l.textAlign="center",l.textBaseline="middle",l.fillText("Clear",this.x+this.width/2,p.y),l.closePath()}},v={x:30,y:20,score:0,draw:function(){l.beginPath(),l.fillStyle="#0e1343",l.font="14px Futura",l.textAlign="top",l.textBaseline="middle",l.fillText("Score: "+this.score,this.x,this.y),l.closePath()}},y={x:h-20,y:20,time:300,draw:function(){l.beginPath(),l.fillStyle="#04acff",l.fillRect(this.x,this.y,-1*this.time,16),l.closePath(),y.time-=.1}};c.height=u,c.width=h,$("#start_btn").on("click",function(){$("#start").hide(),t(),e()}),$("canvas").on("mousedown",function(t){var e=t.pageX-c.offsetLeft,n=t.pageY-c.offsetTop;n>=c.height-50?(console.log("in cont"),e>g.x&&e<g.x+g.width?s(p.word):e>m.x&&e<m.x+m.width&&(p.word="")):i(e,n)}),$(document).on("keypress",function(t){t.preventDefault();var e=t.keyCode?t.keyCode:t.which,n=String.fromCharCode(t.charCode);13==e?s(p.word):32==e?p.word="":o(n)}),$("body").disableSelection()}function lightsOn(){function t(t,a,s){function c(t,e){var i=e.position,a=[i-1,i+1,i-o,i+o];i%o==0?a[0]=!1:i%o==o-1&&(a[1]=!1),_.each(a,function(t,e){(0>t||t>o*o-1)&&(a[e]=!1)}),e.flip(),_.each(a,function(t){t!==!1&&n[t].flip()}),r+=1,$("#score").text("Moves: "+r),l()}function l(){var t=_.some(n,function(t){return 0==t.on?!0:void 0});t||h()}function h(){i+=1,o+=1,$("#win h2").text("Level completed in "+r+" moves."),$("#level").text("Next Level: "+i),$("#win").fadeIn(500,function(){e(),setTimeout(function(){$("#win").fadeOut(500)},3e3)})}this.x=t,this.y=a,this.radius=20,this.on=!1,this.position=s,this.init=function(){var t=this;$("<div>",{id:"light"+this.position,"class":"light off",style:"left:"+this.x+"px; top: "+this.y+"px;"}).on("click",function(e){c(e,t)}).appendTo("#lights_container")},this.flip=function(){this.on=!this.on,this.on?$("#light"+this.position).removeClass("off").addClass("on"):$("#light"+this.position).removeClass("on").addClass("off")},this.init()}function e(){var e=0,i=0,a=45;n=[],r=0,$("#lights_container").html(""),$("#wrapper").css("width",a*o),$("#score").text("Moves: "+r),_.each(_.range(o*o),function(r){n.push(new t(e,i,r)),e+=a,e>=o*a&&(i+=a,e=0)})}var n=[],i=1,o=3,r=0;e(),$("#start_btn").on("click",function(){$("#start").fadeOut(500)}),$("#goto").on("click",function(){var t=Number($.trim($("input").val()));console.log(t,o,o+t),t>0&&(i=t,o+=t-1,e()),$("#start").fadeOut(500)})}function liquorLikes(){$(".liquor").on("click",function(t){if("like_btn"==t.target.className){var e=$(this).find(".like_count span");e.html(Number(e.html())+1),$(t.target).attr("disabled","disabled").html("Liked!"),$(this).find(".people").html(1==Number(e.html())?"person":"people"),$.ajax({type:"POST",url:"/liquor_likes/likes",data:{liquor_id:t.target.id},error:function(t){401==t.status&&(window.location="/users/sign_in")}})}})}function lunarPhase(){var t,e,n,i=$("#age").data("age"),o=$("#percent").data("percent");if(14.765>=i?(t="Waxing",e="First"):(t="Waning",e="Last"),1>o?($("#stage").text("New Moon"),n="/assets/new_moon.png"):49>=o?$("#stage").text(t+" Crescent"):51>o?($("#stage").text(e+" Quarter"),n="First"==e?"/assets/first_quarter.png":"/assets/last_quarter.png"):99>o?$("#stage").text(t+" Gibbous"):($("#stage").text("Full Moon"),n="/assets/full_moon.png"),49>=o&&o>=1){var r;r=14.765>=i?"wax":"wan",n=o>35?"/assets/"+r+"_crescent5.png":o>25?"/assets/"+r+"_crescent4.png":o>15?"/assets/"+r+"_crescent3.png":o>9?"/assets/"+r+"_crescent2.png":o>3?"/assets/"+r+"_crescent1.png":"/assets/new_moon.png"}if(o>=51&&99>=o){var r;r=14.765>=i?"wax":"wan",n=o>95?"/assets/full_moon.png":o>85?"/assets/"+r+"_gib5.png":o>75?"/assets/"+r+"_gib4.png":o>65?"/assets/"+r+"_gib3.png":o>55?"/assets/"+r+"_gib2.png":"/assets/"+r+"_gib1.png"}$("#moon").attr("src",n)}function makeADude(){$("#make_a_dude_dude_name").on("keyup",function(){$(".dude_name").text($(this).val())}),$("#make_a_dude_dude_message").on("keyup",function(){$(".dude_message").text($(this).val())}),$(".color").on("change",function(){$(".head").css("backgroundColor","#"+this.color)}),$("input").on("keypress",function(t){13==t.which&&t.preventDefault()})}function mastermindGame(){function t(){$("#row_"+l+" .peg.hole").droppable({drop:function(t,e){var n=e.helper.context.id;h[$(this).data("index")]=s[n],$(this).css({"background-color":s[n]})}}),e()}function e(){var t=parseInt(l)+1;$("#row_"+l).addClass("active"),$("#row_"+t).removeClass("active")}function n(){var t={};return _.each(c,function(e){t[e]=t[e]?t[e]+1:1}),t}function i(){var t={red_marks:0,white_marks:0},e=n();_.each(h,function(n,i){e[n]&&(e[n]-=1,t.white_marks+=1),n==c[i]&&(t.red_marks+=1)}),o(t)}function o(t){_.each(_.range(t.white_marks),function(t){$("#row_"+l+' .key[data-index="'+t+'"]').css("background-color","white")}),_.each(_.range(t.red_marks),function(t){$("#row_"+l+' .key[data-index="'+t+'"]').css("background-color","#dd0000")}),4==t.red_marks?(alert("You cracked the code!"),a(),$("button").off()):r()}function r(){$("#row_"+l+" .peg.hole").droppable("destroy"),l-=1,h=[],0==l?($("button").off(),alert("You lose!"),a()):t()}function a(){_.each(c,function(t,e){$('.code .peg[data-index="'+e+'"]').css("background-color",t).fadeIn(500)})}for(var s=["#eb1144","#11d3ed","#f2680c","#c111ed","#0ee307","#3375e8"],c=[],l=8,h=[],u=0;6>u;u++)$("<div />",{"class":"guess peg color",id:u}).draggable({helper:"clone",snap:".peg"}).appendTo("#c"+u).css({"background-color":s[u]});for(var u=0;4>u;u++)c.push(s[randomInt(0,s.length-1)]);$(".start").on("click",function(){$(".info").fadeOut("500")}),$(".submit").on("click",function(){4==h.length?i():alert("Guess cannot have empty slots.")}),t(),$("body").disableSelection()}function minesweeper(){function t(t,i){function r(e,n){var i=[];return e.y>0&&i.push(c[e.x][e.y-1]),e.y<t-1&&i.push(c[e.x][e.y+1]),e.x>0&&i.push(c[e.x-1][e.y]),e.x<t-1&&i.push(c[e.x+1][e.y]),e.y>0&&e.x>0&&i.push(c[e.x-1][e.y-1]),e.y>0&&e.x<t-1&&i.push(c[e.x+1][e.y-1]),e.y<t-1&&e.x>0&&i.push(c[e.x-1][e.y+1]),e.y<t-1&&e.x<t-1&&i.push(c[e.x+1][e.y+1]),n=void 0!=n?n:function(){return!1},_.reject(i,n)}function s(e){o.stop();for(var n=0;t>n;n++)for(var i=0;t>i;i++){var r=c[n][i];r.element.off(),r.isMine&&r.element.addClass("mine")}"win"==e?$("#status").text("\u263b").show():$("#status").text("\u2620").show()}var c=[],t=t,i=i,l=0;this.init=function(){var s;a=!1,$(".board").html(""),$("#container").css("width",36*t+6),$("#mines").text("Mines: "+i),$("#status").text("\u2620").hide(),o=new n;for(var l=0;t>l;l++){c[l]=[];for(var h=0;t>h;h++)s=$('<div class="square">').appendTo(".board"),c[l][h]=new e(s,l,h),s.data("position",{x:l,y:h});$('<br class="clear">').appendTo(".board")}for(var u=0;i>u;){var d=randomInt(0,t-1),f=randomInt(0,t-1);c[d][f].isMine||(c[d][f].isMine=!0,u+=1)}for(var l=0;t>l;l++)for(var h=0;t>h;h++){var p=c[l][h],g=r(p,function(t){return!t.isMine});p.mineCount=g.length}},this.expose=function(e){if(e.isMine)return void s("lose");if(e.mineCount>0&&e.isHidden)l+=1,e.isHidden=!1,e.element.text(e.mineCount).addClass("exposed").removeClass("flagged");else if(e.isHidden){var n=r(e),o=this;l+=1,e.isHidden=!1,e.element.addClass("exposed"),_.each(n,function(t){o.expose(t)})}l==t*t-i&&s("win")}}function e(t,e,n){this.x=e,this.y=n,this.element=t,this.isMine=!1,this.isHidden=!0,this.isFlagged=!1;var i=this;i.element.on("click",function(){a||(a=!0,o.start()),r.expose(i)}).on("contextmenu",function(t){t.preventDefault(),i.isFlagged?i.element.removeClass("flagged").text(""):i.element.text("\u2691").addClass("flagged"),i.isFlagged=!i.isFlagged})}function n(){var t,e=0;this.running=!1,this.start=function(){t=(new Date).getTime(),e=0,this.running=!0,this.run()},this.run=function(){var n=(new Date).getTime()-t;e=Math.floor(n/1e3),i(e);var o=this;setTimeout(function(){o.running&&o.run()},500)},this.stop=function(){this.running=!1,e=0}}function i(t){var e=Math.floor(t/60),n=t%60;10>n&&(n="0"+n),10>e&&(e="0"+e),cur_time=e+":"+n,$("#timer").text(cur_time)}var o,r=new t(8,10),a=!1;r.init(),$(".new_game").on("click",function(){var e=$(this).val();1==e&&(r=new t(8,10)),2==e&&(r=new t(16,40)),3==e&&(r=new t(22,99)),r.init()}),$("#game").disableSelection()}function mishmosh(){var t=window.innerWidth,e=window.innerHeight,n=document.getElementById("container"),i={},o=new Kinetic.Stage({container:"container",width:t,height:e}),r=new Kinetic.Layer;$(document).on("mousemove",function(t){i.x=t.pageX,i.y=t.pageY}),n.addEventListener("dragover",function(t){t.preventDefault(),$(".modal").fadeOut(400)},!1),n.addEventListener("drop",function(t){var e=t.dataTransfer.files,a=new Image,s=t.pageX-n.offsetLeft,c=t.pageY-n.offsetTop;if(e.length>0){var l=e[0];if("undefined"!=typeof FileReader&&-1!=l.type.indexOf("image")){var h=new FileReader;h.onload=function(t){a.onload=function(){var t=.5*a.width,e=.5*a.height,n=new Kinetic.Image({x:s,y:c,image:a,width:t,height:e,draggable:!0});n.setOffset(t/2,e/2),n.on("dblclick",function(){n.remove(),r.draw()}),n.on("mousedown",function(t){if(t.altKey&&n.on("mousemove",function(){var t=this.attrs.x-i.x,e=this.attrs.y-i.y,o=Math.atan2(t,e);n.setRotation(-o-Math.PI/2),r.draw()}),t.shiftKey){var e=this.attrs.x-i.x,o=this.attrs.y-i.y,a=Math.sqrt(e*e+o*o),s=n.getScale().x;n.on("mousemove",function(){e=this.attrs.x-i.x,o=this.attrs.y-i.y;{var t=Math.sqrt(e*e+o*o);n.getScale().x}n.setScale(s*t/a),r.draw()})}}),$("body").on("mouseup",function(){n.off("mousemove")}),$("body").on("keydown",function(){n.setDraggable(!1)}),$("body").on("keyup",function(){n.setDraggable(!0),n.off("mousemove")}),r.add(n),o.add(r)},a.src=t.target.result},h.readAsDataURL(l)}}t.preventDefault()},!1),$("#save").on("click",function(){var t=$("canvas")[0],e=t.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=e})}function momentOfPeace(){function t(t){function n(){o+=100,r=Math.floor(o/100)/10;var a=(new Date).getTime()-i-o;60*t>r?setTimeout(n,100-a):e()}var i=(new Date).getTime(),o=0,r="0.0";setTimeout(n,100)}function e(){h.fadeOut(0,2e3),$("canvas").fadeOut(1e3,function(){$(".headline_container h1").text("Your Moment Is Complete"),$(".headline_container p").text("Feel free to take another moment if you wish."),$(".headline_container p").text("Feel free to take another moment if you wish."),$(".start").fadeIn(1e3)})}function n(){this.init=function(){this.x=randomInt(0,r.width),this.y=-50,this.radius=randomInt(1,8),this.vx=randomFloat(-.7,.7),this.vy=randomFloat(.2,1.5),this.opactity=randomFloat(.05,.2),this.color="rgba(255, 255, 255, "},this.draw=function(){a.beginPath(),a.fillStyle=this.color+this.opactity,a.shadowBlur=10,a.shadowColor=this.color+this.opactity,a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.fillStyle=this.color+this.opactity,a.fill(),a.closePath(),this.evolve()},this.evolve=function(){this.x+=this.vx,this.y+=this.vy,this.radius+=.02,(this.x>r.width+this.radius||this.x<0-this.radius||this.y>r.height+this.radius)&&this.init()},this.init()}function i(t){l.push(new n),l.length<t&&setTimeout(function(){i(t)},500)}function o(){a.clearRect(0,0,r.width,r.height),_.each(l,function(t){t.draw()}),requestAnimFrame(o)}var r=$("canvas")[0],a=r.getContext("2d"),s=window.innerHeight,c=window.innerWidth,l=[],h=new Howl({urls:["/assets/moments_peace.mp3","/assets/moments_peace.ogg"],volume:.7,loop:!0});r.height=s,r.width=c,i(r.width/50),o(),$(".time_container").on("click",function(){var e=this.id;h.fadeIn(.7,1e3),$(".start").fadeOut(1e3,function(){$("canvas").fadeIn(1e3),t(e)})})}function moreDropShadow(){$("body").disableSelection()}function morseCoder(){function t(){n.length>i&&(i+=1,o=d[n[i-1]],r=0,void 0==o?setTimeout(t,l):e())}function e(){o.length>r?(r+=1,o[r-1].play()):setTimeout(t,c)}var n,i,o,r,a=100,s=a,c=2*a,l=3*a,h=new Howl({urls:["/assets/dot.mp3","/assets/dot.ogg"],volume:.6,onend:function(){setTimeout(e,s)}}),u=new Howl({urls:["/assets/dash.mp3","/assets/dash.ogg"],volume:.6,onend:function(){setTimeout(e,s)}}),d={a:[h,u],b:[u,h,h,h],c:[u,h,u,h],d:[u,h,h],e:[h],f:[h,h,u,h],g:[u,u,h],h:[h,h,h,h],i:[h,h],j:[h,u,u,u],k:[u,h,u],l:[h,u,h,h],m:[u,u],n:[u,h],o:[u,u,u],p:[h,u,u,h],q:[u,u,h,u],r:[h,u,h],s:[h,h,h],t:[u],u:[h,h,u],v:[h,h,h,u],w:[h,u,u],x:[u,h,h,u],y:[u,h,u,u],z:[u,u,h,h],0:[u,u,u,u,u],1:[h,u,u,u,u],2:[h,h,u,u,u],3:[h,h,h,u,u],4:[h,h,h,h,u],5:[h,h,h,h,h],6:[u,h,h,h,h],7:[u,u,h,h,h],8:[u,u,u,h,h],9:[u,u,u,u,h],".":[h,u,h,u,h,u],",":[u,u,h,h,u,u],"?":[h,h,u,u,h,h],"'":[h,u,u,u,u,h],"!":[u,h,u,h,u,u],"(":[u,h,u,u,h],")":[u,h,u,u,h,u],":":[u,u,u,h,h,h],";":[u,h,u,h,u,h],"+":[h,u,h,u,h],"-":[u,h,h,h,h,u],_:[h,h,u,u,h,u],'"':[h,u,h,h,u,h]};$(".btn").on("click",function(){n=$("textarea").val().trim().toLowerCase().split(""),i=0,t()})}function mousingPage(){function t(){c.size=.001*c.y;var t=c.image.width/2,e=c.y/r*(r/4)+r/4*3-c.image.height*c.size;t*=c.size,r/2*(c.y/r),o.clearRect(0,0,a,r),o.drawImage(c.image,c.x-t,e,c.image.width*c.size,c.image.height*c.size)}function e(){var t=0;l.play(),n(t)}function n(t){var e=randomColorRGB();$("#sky").css("background-color","rgba("+e+", 0.95)").show(),25>t?setTimeout(function(){n(t+=1)},30):$("#sky").hide()}var i=$("canvas")[0],o=i.getContext("2d"),r=window.innerHeight,a=window.innerWidth,s=new Image,c={x:a/4,y:r/4,size:.5,image:s},l=new Howl({urls:["/assets/aggressive.mp3","/assets/aggressive.ogg"],volume:.7});i.height=r,i.width=a,c.image.onload=function(){t()},$("body").on("mousemove",function(e){c.x=e.pageX-i.offsetLeft,c.y=e.pageY-i.offsetTop,t()}),$("body").on("click",function(){e()}),c.image.src="/assets/mouse.png",$("body").disableSelection()}function mustWrite(){function t(){r.time+=.5,r.time>r.last_type+20&&r.reminds>=3?e(o):r.time>r.last_type+20?e(i):setTimeout(t,500)}function e(e){e.play(),r.reminds+=1,r.time=0,alert("You should probably get back to writing now."),e.stop(),t()}if($("#show_container").length){var n=window.location.pathname,i=new Howl({urls:["/assets/bb2.mp3","/assets/bb2.ogg"],volume:.7}),o=new Howl({urls:["/assets/aggressive.mp3","/assets/aggressive.ogg"],loop:!0}),r={time:0,last_type:0,reminds:0};$("body").on("keypress",function(){r.typing=!0,r.last_type=r.time}),$("#show_save").on("click",function(t){t.preventDefault();var e=$(".page_content").val();$.ajax({type:"PUT",dataType:"json",url:n,data:{content:e}})}),t()}}function needDrink(){function t(t){var n=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);o=new google.maps.Map(document.getElementById("map"),{mapTypeId:google.maps.MapTypeId.ROADMAP,center:n,zoom:15});var i={location:n,radius:"500",types:["bar","night_club"],openNow:!0,radius:700};a=new google.maps.InfoWindow,r=new google.maps.places.PlacesService(o),r.nearbySearch(i,e)}function e(t,e){s=t,e==google.maps.places.PlacesServiceStatus.OK?n():$(".inner_modal").fadeOut(300,function(){$(".inner_modal").html("<h1>Sorry. No results found.</h1><h2>Looks like you're on your own. Good luck thirsty one!</h2>").fadeIn(300)})}function n(){if(0==s.length)$(".inner_modal").fadeOut(300,function(){$(".inner_modal").html("<h1>Sorry. No results found.</h1><h2>Looks like you're on your own. Good luck thirsty one!</h2>").fadeIn(300)});else{var t=s[randomInt(0,s.length-1)],e=t.geometry.location,n=new google.maps.Marker({map:o,position:e});google.maps.event.addListener(n,"click",function(){var e=t.name+"<br>"+t.vicinity;a.setContent(e),a.open(o,this)}),$("#bar_result").text(t.name+" is open for drinks!"),s=_.reject(s,function(e){return e==t?!0:void 0}),$(".modal").fadeOut(500)}}function i(t){$("#start").hide(),$("#error p").html(1==t.code?'This website requires location services. <br> Please allow geolocation and <a href="/here/page">reload</a> to continue.':'Looks like there was a problem finding your location. <br> Maybe <a href="/here/page">try again</a>?'),$("#error").show()}var o,r,a,s;navigator.geolocation.getCurrentPosition(t,i),$(".btn").on("click",function(){s.length>0?n():$("#bar_result").text("No more search results")})}function noOneWatching(){function t(){window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var t=document.querySelector("video"),e=function(){};navigator.getUserMedia&&navigator.getUserMedia({audio:!1,video:!0},function(e){t.src=window.URL.createObjectURL(e)},e)}function e(){$("#message").fadeIn(300),setTimeout(n,300)}function n(){$("#message").fadeOut(randomInt(300)),setTimeout(e,randomInt(8e3,2e4))}var i=($(window).height(),$(window).width());$("video")[0].width=i,t(),setTimeout(e,1e4)}function nothing(){}function onePage(){$("textarea").focus()}function openNote(){}function otherSide(){function t(t){a.geocode({address:t},function(t,n){if(n==google.maps.GeocoderStatus.OK){var i=t[0].geometry.location,a=i.lat(),s=i.lng(),h=new google.maps.LatLng(-1*a,s>0?-1*(180-s):180-Math.abs(s));if(l){var u={zoom:c,center:i,mapTypeId:google.maps.MapTypeId.ROADMAP},d={zoom:c,center:h,mapTypeId:google.maps.MapTypeId.ROADMAP};o=new google.maps.Map($("#input_map")[0],u),r=new google.maps.Map($("#other_map")[0],d)}e(i,o),e(h,r)}else alert("We could not find any results. Please check your input and try again.")})}function e(t,e){e.setCenter(t),e.setZoom=c;var n=new google.maps.Marker({map:e,position:t});s.push(n),l&&(i(),l=!1)}function n(e){_.each(s,function(t){t.setMap(null)}),s=[],t(e)}function i(){$("#headlines").animate({opacity:0},200,function(){$("#headlines").remove(),$("header").animate({opacity:1},400),$("form").animate({top:60},400,function(){$("#map_container").animate({opacity:1},400)})})}var o,r,a=new google.maps.Geocoder,s=[],c=3,l=!0;$("#address_input").focus(),$("form").on("submit",function(t){t.preventDefault();var e=$("#address_input").val().replace(/^\s+|\s+$/g,"");""==e?alert("Please enter a valid address or zipcode."):($("#address_input").val("").attr("placeholder",e).focus(),n(e))})}function pathsImages(){function t(t){if(d.drawing||t){var e,n=d.x-d.lastX,o=d.y-d.lastY,r=Math.sqrt(n*n+o*o),f=Math.atan2(o,n),p=c+r/3,g=a[s];i.font=p+"px "+u,e=i.measureText(g).width,r>e&&(i.save(),i.beginPath(),i.translate(d.lastX,d.lastY),i.rotate(f),i.globalAlpha=l,i.fillStyle=h,i.fillText(g,0,0),i.rotate(-f),i.translate(-d.lastX,-d.lastY),i.restore(),i.closePath(),s+=1,s>a.length-1&&(s=0),d.lastX=d.lastX+Math.cos(f)*e,d.lastY=d.lastY+Math.sin(f)*e)}}var e,n=$("canvas")[0],i=n.getContext("2d"),o=window.innerHeight,r=window.innerWidth,a="The quick brown fox jumps over the lazy dog.".split(""),s=0,c=6,l=1,h="#000000",u="serif",d={lastX:0,lastY:0,drawing:!1};n.height=o,n.width=r,i.fillStyle="white",i.fillRect(0,0,n.width,n.height),$("body").disableSelection(),$("canvas").on("mousemove",function(i){d.x=i.pageX-n.offsetLeft,d.y=i.pageY-n.offsetTop,d.drawing?$("#control_container").hide():(clearTimeout(e),$("#control_container").show(),e=setTimeout(function(){$("#control_container").fadeOut(500)},3e3)),t()}),$("canvas").on("click",function(t){d.x=t.pageX-n.offsetLeft,d.y=t.pageY-n.offsetTop,i.globalAlpha=l,i.fillStyle=h,i.font=c+"px "+u,i.fillText(a[s],d.x,d.y),s+=1,s>a.length-1&&(s=0)}),$("#control_container").on("click",function(t){t.stopPropagation(),t.preventDefault(),clearTimeout(e)}),$(".opacity").on("click",function(){l+="opacity_inc"==this.id?.05:-.05,l=l>0?l:0,l=1>=l?l:1,$("#cur_opacity").text(l.toFixed(2))}),$(".size").on("click",function(){c+="size_inc"==this.id?2:-2,c=c>=0?c:0,$("#cur_size").text(c)}),$("#text").on("change",function(){a=this.value,s=0}),$(".picker").on("change",function(){h="#"+this.value}),$("#font").on("change",function(t){t.stopPropagation(),u=$("#font option:selected").val()}),$("#clear").on("click",function(){i.globalAlpha=1,i.fillStyle="white",i.fillRect(0,0,n.width,n.height)}),$("#save").on("click",function(){var t=n.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$("canvas").on("mousedown",function(t){d.drawing=!0,d.lastX=t.pageX-n.offsetLeft,d.lastY=t.pageY-n.offsetTop}),$("canvas").on("mouseup",function(){d.drawing=!1})}function photobooth(){function t(){var t=function(){alert("Sorry. This website requires camera access.")};navigator.getUserMedia&&navigator.getUserMedia({audio:!1,video:!0},function(t){g.src=window.URL.createObjectURL(t),g.play(),e(),$(".access").hide(),i()},t)}function e(){n(),4>d&&requestAnimFrame(e)}function n(){c&&g.videoWidth>0&&g.videoHeight>0&&(s.width!=g.videoWidth*p&&(s.width=g.videoWidth*p,l.width=g.videoWidth*p),s.height!=g.videoHeight*p&&(s.height=g.videoHeight*p,l.height=g.videoHeight*p*4)),c.drawImage(g,0,0,s.width,s.height)}function i(){f>=0?($("#countdown").text(f),setTimeout(i,1e3)):($("#countdown_container").hide(),o()),f-=1}function o(){a();var t=s.toDataURL(),e=new Image;e.onload=function(){h.drawImage(e,0,u),u+=e.height,d+=1},e.src=t,3>d?setTimeout(o,3e3):r()}function r(){$("#container").hide(),$("#photo_container").fadeIn(400)}function a(){$("#flash").fadeIn(20),setTimeout(function(){$("#flash").fadeOut(20)},50)}var s=$("#video_capture")[0],c=s.getContext("2d"),l=$("#final_canvas")[0],h=l.getContext("2d"),u=0,d=0,f=3,p=.35;window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var g=$("video")[0];$(".start_btn").on("click",function(){$(".start").hide(),$("#countdown_container").show(),$(".access").show(),t()}),$("#save").on("click",function(){var t=l.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$("#reset").on("click",function(){u=0,d=0,f=3,$("#photo_container").hide(),$("#container").show(),$("#countdown_container").show(),e(),i()})}function picnic(){function t(t,e){this.x=t,this.y=e,this.radius=10,this.color="#222222",this.vx=4*(Math.random()-.5),this.vy=4*(Math.random()-.5),this.legs_in=randomInt(0,1),this.draw=function(){var t=this.legs_in?1.63:1.75;s.fillStyle=this.color,s.beginPath(),s.arc(this.x,this.y,this.radius,0,2*Math.PI),s.fill(),s.closePath(),s.beginPath(),s.lineWidth=3,s.moveTo(this.x,this.y),s.lineTo(this.x+this.radius*t,this.y),s.moveTo(this.x,this.y),s.lineTo(this.x-this.radius*t,this.y),s.moveTo(this.x,this.y),s.lineTo(this.x+this.radius*t,this.y+.65*this.radius),s.moveTo(this.x,this.y),s.lineTo(this.x-this.radius*t,this.y+.65*this.radius),s.moveTo(this.x,this.y),s.lineTo(this.x+this.radius*t,this.y-.65*this.radius),s.moveTo(this.x,this.y),s.lineTo(this.x-this.radius*t,this.y-.65*this.radius),s.strokeStyle=this.color,s.stroke(),s.closePath(),s.beginPath(),s.fillStyle="white",s.arc(this.x+.4*this.radius,this.y+.5*this.radius,.2*this.radius,0,2*Math.PI),s.arc(this.x-.4*this.radius,this.y+.5*this.radius,.2*this.radius,0,2*Math.PI),s.fill(),s.closePath(),this.legs_in=!this.legs_in}}function e(){_.each(_.range(d),function(){h.push(new t(randomInt(0,c),randomInt(0,l),"#222222"))})}function n(){_.each(h,function(t){var e=t.x-f.x,n=t.y-f.y,i=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),o=50,r=n/i*o,a=e/i*o;t.vx+=a/Math.pow(i,1.6),t.vy+=r/Math.pow(i,1.6),t.x+=t.vx,t.y+=t.vy,_.each(h,function(e){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));if(t!=e&&o<t.radius+e.radius){var r=t.vx,a=t.vy;t.vx=e.vx,t.vy=e.vy,e.vx=r,e.vy=a}}),t.x<-2*t.radius&&(t.x=-2*t.radius,t.vx=2*Math.random(),t.vy=4*(Math.random()-.5)),t.x>c+2*t.radius&&(t.x=c+2*t.radius,t.vx=-1*Math.random()*2,t.vy=4*(Math.random()-.5)),t.y<-2*t.radius&&(t.y=-2*t.radius,t.vx=4*(Math.random()-.5),t.vy=2*Math.random()),t.y>l+2*t.radius&&(t.y=l+2*t.radius,t.vx=4*(Math.random()-.5),t.vy=-1*Math.random()*2)}),setTimeout(r,40)}function i(t,e){this.time=0,this.x=t-10,this.y=e-10,this.draw=function(){s.beginPath(),s.fillStyle="rgba(0,0,0,0.75)",s.moveTo(this.x,this.y),s.bezierCurveTo(-1+this.x,-7+this.y,3+this.x,-14+this.y,13+this.x,-8+this.y),s.bezierCurveTo(19+this.x,-4+this.y,21+this.x,-4+this.y,26+this.x,-11+this.y),s.bezierCurveTo(43+this.x,-16+this.y,27+this.x,-4+this.y,45+this.x,-3+this.y),s.bezierCurveTo(57+this.x,6+this.y,43+this.x,14+this.y,29+this.x,6+this.y),s.bezierCurveTo(23+this.x,10+this.y,30+this.x,23+this.y,12+this.x,10+this.y),s.bezierCurveTo(-2+this.x,16+this.y,-12+this.x,9+this.y,this.x,this.y),s.fill(),this.time+=1}}function o(){u=_.reject(u,function(t){return t.time>20?!0:void 0})}function r(){s.clearRect(0,0,c,l),_.each(u,function(t){t.draw()}),_.each(h,function(t){t.draw()}),n(),o()}var a=$("canvas")[0],s=a.getContext("2d"),c=window.innerWidth,l=window.innerHeight,h=[],u=[],d=30,f={x:c/2,y:l/2};a.height=l,a.width=c,e(),r(),$("body").on("mousemove",function(t){f.x=t.pageX-a.offsetLeft,f.y=t.pageY-a.offsetTop}),$("canvas").on("click",function(e){if(f.x=e.pageX-a.offsetLeft,f.y=e.pageY-a.offsetTop,h=_.reject(h,function(t){var e=t.x-f.x,n=t.y-f.y;return e*e+n*n<=5*t.radius*t.radius?(u.push(new i(t.x,t.y)),!0):void 0}),h.length<30){var n=randomInt(0,1)?0:l+20,o=randomInt(0,1)?0:c+20;h.push(new t(n,o))}}),$("body").disableSelection()}function picturePen(){function t(){for(r.beginPath(),r.moveTo(f[0].x,f[0].y),i=1;i<f.length-2;i++){var t=(f[i].x+f[i+1].x)/2,e=(f[i].y+f[i+1].y)/2;r.quadraticCurveTo(f[i].x,f[i].y,t,e),r.quadraticCurveTo(f[i].x,f[i].y,f[i+1].x,f[i+1].y)}r.strokeStyle=l,r.lineWidth=h,r.lineCap="round",r.stroke()}function e(){var t=n(o.toDataURL()),e=new FormData;e.append("image",t),$.ajax({url:"/picture_pen/pictures",type:"POST",data:e,processData:!1,contentType:!1,success:function(t){window.location="/picture_pen/pictures/"+t},error:function(){alert("There was a problem with your request. Please try again.")}})}function n(t){for(var e=atob(t.split(",")[1]),n=[],i=0;i<e.length;i++)n.push(e.charCodeAt(i));return new Blob([new Uint8Array(n)],{type:"image/png"})}if($("#new_container").length){var o=$("canvas")[0],r=o.getContext("2d"),a=document.createElement("img"),s=500,c=400,l="#000",h=5,u=document.createElement("canvas"),d=u.getContext("2d"),f=[],p=600;o.width=s,o.height=c,u.height=c,u.width=s;var g=!0,m=function(){r.clearRect(0,0,o.width,o.height),d.clearRect(0,0,o.width,o.height),o.drawing=!1,f=[],g&&(g=!1)},v=function(){var t=a.height,e=a.width,n=1;m(),a.width>p?n=p/a.width:a.width>p&&(n=p/a.height),t*=n,e*=n,u.width=o.width=e,u.height=o.height=t,$("canvas").css("cursor","crosshair"),d.drawImage(a,0,0,e,t),r.drawImage(a,0,0,e,t)};r.font="16px Geneva",r.textAlign="center",r.fillStyle="#999",r.fillText("Drag an image from your",s/2,c/2-60),r.fillText("computer into this box.",s/2,c/2-35),a.addEventListener("load",function(){v()},!1),o.addEventListener("dragover",function(t){t.preventDefault()},!1),o.addEventListener("drop",function(t){var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if("undefined"!=typeof FileReader&&-1!=n.type.indexOf("image")){var i=new FileReader;i.onload=function(t){var e=a.src;a.src=t.target.result,e==a.src&&v()},i.readAsDataURL(n)}}t.preventDefault()},!1),$(o).on("mousedown",function(t){f.push({x:t.pageX-o.offsetLeft,y:t.pageY-o.offsetTop}),this.drawing=!0}),$(o).on("mousemove",function(e){mouse_x=e.pageX-o.offsetLeft,mouse_y=e.pageY-o.offsetTop,this.drawing&&(r.clearRect(0,0,o.width,o.height),r.drawImage(u,0,0),f.push({x:mouse_x,y:mouse_y}),t())}),$(o).on("mouseup",function(){this.drawing=!1,$("canvas").css("cursor","default"),f=[],d.clearRect(0,0,o.width,o.height),d.drawImage(o,0,0)}),$(".color").on("change",function(){l="#"+this.color}),$(".size").on("change",function(){var t=$(".size").val();$.isNumeric(t)?h=t:alert("Size must be a number")}),$("#clear_all").on("click",function(){m()}),$("#clear_pen").on("click",function(){v()}),$("#download").on("click",function(){var t=o.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$("#save").on("click",function(){a.src&&e()}),$("body").disableSelection()}}function pinwheel(){var t,e=$("canvas")[0],n=e.getContext("2d"),i=500,o=500,r="#b15be3",a="#a33ede",s="#44e886",c="#1bde69",l="#fc8f29",h="#ef7503",u="#3c99f0",d="#1280e7";e.height=i,e.width=o,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function(t){function e(){n.fillStyle="#946f4b",n.fillRect(244,200,12,500),n.shadowColor="rgba(0,0,0,0.3)",n.shadowBlur=3,n.shadowOffsetX=2,n.shadowOffsetY=2}var f=.3;t.rotation_speed=0,t.draw=function(){n.beginPath(),n.fillStyle=r,n.moveTo(250,200),n.lineTo(250,0),n.lineTo(350,100),n.lineTo(250,200),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=s,n.lineTo(450,200),n.lineTo(350,300),n.lineTo(250,200),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=l,n.lineTo(250,400),n.lineTo(150,300),n.lineTo(250,200),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=u,n.lineTo(50,200),n.lineTo(150,100),n.lineTo(250,200),n.fill(),n.closePath(),n.shadowColor="rgba(0,0,0,0.3)",n.shadowBlur=5,n.shadowOffsetX=2,n.shadowOffsetY=2,n.beginPath(),n.fillStyle=a,n.moveTo(250,200),n.lineTo(350,100),n.lineTo(350,200),n.lineTo(250,200),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=c,n.lineTo(350,300),n.lineTo(250,300),n.lineTo(250,200),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=h,n.lineTo(150,300),n.lineTo(150,200),n.lineTo(250,200),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=d,n.lineTo(150,100),n.lineTo(250,100),n.lineTo(250,200),n.fill(),n.closePath(),n.shadowColor="rgba(0,0,0,0.7)",n.shadowBlur=3,n.shadowOffsetX=3,n.shadowOffsetY=3,n.closePath(),n.fillStyle="white",n.lineWidth=2,n.strokeStyle="rgba(0,0,0,0.2)",n.beginPath(),n.arc(250,200,8,0,2*Math.PI),n.fill(),n.stroke(),n.closePath()},t.spin=function(){n.clearRect(0,0,o,i),e(),n.save(),n.translate(250,200),n.rotate(f),n.translate(-250,-200),t.draw(),n.restore(),f+=.05*t.rotation_speed,t.rotation_speed*=.996}}(window.pinwheel=window.pinwheel||{},jQuery),function f(){t=requestAnimFrame(f),pinwheel.spin()}(),$("canvas").on("click",function(){pinwheel.rotation_speed+=1.5}),$("body").disableSelection()}function pixShow(){}function plinky(){function t(t,e){this.x=t,this.y=e,this.radius=2,this.color="white",this.draw=function(){s.beginPath(),s.fillStyle=this.color,s.arc(this.x,this.y,this.radius,0,2*Math.PI),s.fill(),s.closePath()}}function e(){var e=0,n=100,i=!0;_.each(_.range(105),function(){h.push(new t(e,n)),e+=40,e>400&&(n+=40,e=i?20:0,i=!i)})}function n(t,e,n,i){this.x=t,this.y=e,this.width=n,this.result,this.color="win"==i?"#35d49a":"#d42a2a",this.draw=function(){s.beginPath(),s.fillStyle=this.color,s.fillRect(this.x,this.y,this.width,c),s.fill(),s.closePath()}}function i(){var t=c-15,e=50;u.push(new n(75,t,e,"win")),u.push(new n(175,t,e,"win")),u.push(new n(275,t,e,"win"))}function o(t){f.vy+=d*t/1e3,f.x+=f.vx,f.y+=f.vy,_.each(h,function(t){var e=Math.sqrt(Math.pow(f.x-t.x,2)+Math.pow(f.y-t.y,2));if(e<=f.radius){var n=f.vx,i=f.vy,o=f.radius,r=(f.x-t.x)/e*o,a=(f.y-t.y)/e*o;f.x=t.x+1.05*r,f.y=t.y+1.05*a,f.vx=-.7*(n*r*r/(o*o)+i*r*a/(o*o)),f.vy=-.7*(i*a*a/(o*o)+n*r*a/(o*o))}}),f.y>c+f.radius&&(f.tracking=!0,f.y=f.radius,f.vx=0,f.vy=0,_.each(u,function(t){f.x>t.x&&f.x<t.x+t.width&&($("#win").fadeIn(500),setTimeout(function(){$("#win").fadeOut(500)},2e3))}),$("canvas").on("mousemove",function(t){var e=t.pageX-a.offsetLeft;f.x=e}))}function r(t){var e=new Date,n=e.getTime(),i=n-t;s.clearRect(0,0,l,c),s.fillStyle="#d42a2a",s.fillRect(0,c-15,l,c),_.each(h,function(t){t.draw()}),_.each(u,function(t){t.draw()}),f.draw(),f.tracking||o(i),requestAnimFrame(function(){r(n)})}var a=$("canvas")[0],s=a.getContext("2d"),c=600,l=400,h=[],u=[],d=10;a.height=c,a.width=l;var f={radius:14,x:14,y:14,vx:0,vy:0,color:"#51bdfc",tracking:!0,draw:function(){s.beginPath(),s.fillStyle=f.color,s.arc(f.x,f.y,f.radius,0,2*Math.PI),s.fill(),s.closePath()}},p=new Date,g=p.getTime();e(),i(),r(g),$("canvas").on("mousemove",function(t){var e=t.pageX-a.offsetLeft;
f.x=e}),$("canvas").on("click",function(){$("canvas").off("mousemove"),f.tracking&&(f.tracking=!1)})}function pollsie(){}function polychrome(){function t(){this.color=randomColorHex(),this.duration=60,this.buildSwatch=function(){var t=this,e=$("<div>",{"class":"swatch"}),n=$("<div>",{"class":"swatch_color",style:"background-color:"+t.color}),i=$("<div />",{"class":"close",text:"X"}).on("click",function(){c=_.reject(c,function(e){return e==t}),$(this).parent().remove()}),o=$("<div>",{"class":"swatch_info"}).append("<label>Color: </label>"),r=$("<input>",{"class":"color",value:t.color}).on("change",function(){t.color="#"+$(this).val(),$(n).css("background-color",t.color)}).appendTo(o);new jscolor.color(r.get(0)),o.append("<label>Duration: </label>");$("<input>",{"class":"duration",value:t.duration}).on("change",function(){var e=Number($(this).val())?$(this).val():60;t.duration=e}).appendTo(o);$(e).append(i).append(n).append(o).appendTo("#swatch_container")},this.buildSwatch()}function e(t,n,i){$(i).css("background-color",n[t].color),o=setTimeout(function(){t=t+1<n.length?t+=1:0,e(t,n,i)},1e3*n[t].duration)}function n(t){var e=_.map(t,function(t){return{color:t.color,duration:t.duration}});return e}function i(t){var e=n(t);$("#throbber").show(),$.ajax({url:"/polychrome/shows",type:"POST",data:{show:e},dataType:"json",success:function(t){window.location="/polychrome/shows/"+t},error:function(){$("#throbber").hide(),alert("There was a problem with your request. Please try again.")}})}var o,r;if($("#show_data_show").length>0){var a=$("#show_data_show").data("show"),s=$("header");s.hide(),$("body").on("mousemove",function(){clearTimeout(r),s.show(),r=setTimeout(function(){s.fadeOut(500)},3800)}),e(0,a,"body")}if($("#swatch_container").length>0){for(var c=[],l=0;5>l;l++)c.push(new t);$("#add").on("click",function(e){e.preventDefault(),c.push(new t)}),$("#preview").on("click",function(t){t.preventDefault();var i=n(c);$("#preview_container").show(),e(0,i,"#preview_container")}),$("#back").on("click",function(){clearTimeout(o),$("#preview_container").hide()}),$("#save").on("click",function(t){t.preventDefault(),i(c)})}}function portraitPhotos(){function t(){if(u.videoWidth){var e=s.height/u.videoHeight,n=u.videoWidth*e,i=u.videoHeight*e,o=-1*(n/2-s.width/2);a.drawImage(u,o,0,n,i)}requestAnimFrame(t)}function e(){var t=r.toDataURL();p.onload=function(){c.clearRect(0,0,s.width,s.height),c.drawImage(f,0,0);var t=a.getImageData(0,0,r.width,r.height),e=c.getImageData(0,0,s.width,s.height);n(t,e)},p.src=t}function n(t,e){var n=t.data,i=e.data;console.log(n[1],i[1]);for(var o=0;o<n.length;o+=4)n[o]=(n[o]+i[o])/2,n[o+1]=(n[o+1]+i[o+1])/2,n[o+2]=(n[o+2]+i[o+2])/2;console.log(n[1],i[1]),c.clearRect(0,0,s.width,s.height),c.putImageData(t,0,0)}function i(){var t=o(s.toDataURL()),e=new FormData;e.append("image",t),$.ajax({url:"/portrait/photos",type:"POST",data:e,processData:!1,contentType:!1,success:function(t){window.location="/portrait/photos/"+t},error:function(){alert("There was a problem with your request. Please try again.")}})}function o(t){for(var e=atob(t.split(",")[1]),n=[],i=0;i<e.length;i++)n.push(e.charCodeAt(i));return new Blob([new Uint8Array(n)],{type:"image/png"})}if($("#video_canvas").length){var r=$("#video_canvas")[0],a=r.getContext("2d"),s=$("#image_canvas")[0],c=s.getContext("2d"),l=400,h=550,u=$("video")[0],d=!1,f=new Image,p=new Image;r.width=s.width=l,r.height=s.height=h,window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!1,video:!0},function(e){u.src=window.URL.createObjectURL(e),u.play(),$("#shoot_btn").attr("disabled",!1),t()},function(){alert("This app requires access to your camera.")}):$("#no_support").show(),$("#shoot_btn").one("click",function(){d=!0,$("#save_btn").attr("disabled",!1)}),$("#shoot_btn").on("click",function(){e()}),$("#save_btn").on("click",function(){d&&i()}),f.onload=function(){c.clearRect(0,0,s.width,s.height),c.drawImage(f,0,0)},f.src=$("#data-img").data("img")}}function postbored(){$(".notice").fadeOut(4e3),$(".alert").fadeOut(4e3),$("form").focus(),$("form").on("submit",function(t){""==$("#url_form").val().trim()&&(t.preventDefault(),alert("URL cannot be blank."),$("#url_form").focus()),""==$("#title_form").val().trim()&&(t.preventDefault(),alert("Title cannot be blank."),$("#title_form").focus()),$("#title_form").val().length>255&&(t.preventDefault(),alert("Let's not write a book here! Keep it to 255 characters or less."),$("#title_form").focus())})}function pvCalculator(){function t(){var t=parseFloat($("#offset_calc .int_rate").val()),e=parseFloat($("#offset_calc .num_years").val()),n=parseFloat($("#offset_calc .num_years_no_rev").val()),o=parseFloat($("#offset_calc .revenue").val()),r=parseFloat($("#offset_calc .growth").val()),a=e-n,s=0;s=(o/(t-r)-o/(t-r)*Math.pow(1+r,a)/Math.pow(1+t,a))/Math.pow(1+t,n),i(s,"#offset_calc")}function e(){var t=parseFloat($("#compounding_calc .int_rate").val()),e=parseFloat($("#compounding_calc .num_years").val()),n=parseFloat($("#compounding_calc .revenue").val()),o=parseFloat($("#compounding_calc .growth").val()),r=0;r=n/(t-o)-n/(t-o)*(Math.pow(1+o,e)/Math.pow(1+t,e)),i(r,"#compounding_calc")}function n(){var t=parseFloat($("#basic_calc .int_rate").val()),e=$(".year_rev input"),n=0;_.each(e,function(e,i){var o=$(e).val();n+=o/Math.pow(1+t,i+1)}),i(n,"#basic_calc")}function i(t,e){$(e+" .answer").text($.isNumeric(t)?t.toFixed(2):"00.00"),$(e+" .answer_container").show()}function o(t){var e=$(".year_rev").length,n=e-t;n>0?$("#basic_calc").find(".year_rev:nth-last-child(-n+"+n+")").remove():0>n&&_.each(_.range(-1*n),function(){$(r).appendTo("#basic_calc table")})}var r='<tr class="year_rev"><td class="label">Yearly Revenue:</td><td><input type="text" class="revenue"></td></tr>';$(".tab").on("click",function(){$(".tab").removeClass("active"),$(this).addClass("active"),$(".calc_container").hide(),$("#"+this.id+"_calc").show()}),$("#basic_years").on("change",function(t){t.preventDefault();var e=$("#basic_years").val();$.isNumeric(e)||($("#basic_years").val("10"),e=10),o(e)}),$("#basic_calc form").on("change",function(t){t.preventDefault(),n()}),$("#basic_calc form").on("submit",function(t){t.preventDefault(),n()}),$("#compounding_calc form").on("submit",function(t){t.preventDefault(),e()}),$("#compounding_calc form").on("change",function(t){t.preventDefault(),e()}),$("#offset_calc form").on("submit",function(e){e.preventDefault(),t()}),$("#offset_calc form").on("change",function(e){e.preventDefault(),t()})}function quickCompliments(){var t=["#EC8E8E","#FFAC52","#A39F7F","#95AA7A","#3A9C0C","#70A584","#27B48D","#27B4B4","#85A4AD","#34AED1","#3397E5","#7381B9","#6D6B81","#8966A8","#CB5BD5","#E05EC1","#D1396A","#F5286A","#E72D35"];$("body").css("background-color",t[randomInt(0,t.length-1)])}function quickWords(){function t(){_.each(b,function(t){n(t[0],t[1],y[randomInt(0,97)])}),s()}function e(t,e,n){this.x=t,this.y=e,this.letter=n,this.used=!1,this.draw=function(){g.fillStyle=this.used?"#aaa":"#333",g.fillRect(this.x,this.y,80,80),g.font="26px Futura",g.textBaseline="middle",g.textAlign="center",g.fillStyle="#fff",g.fillText(this.letter,this.x+40,this.y+40)}}function n(t,n,i){tiles.push(new e(t,n,i))}function i(){g.font="26px Futura",g.textBaseline="middle",g.textAlign="center",g.fillStyle="#333",g.fillText(stage,v/2,280)}function o(){g.font="16px Futura",g.textBaseline="middle",g.textAlign="center",g.fillStyle="#333",g.fillText("Score: "+score,v/2,380)}function r(){g.fillStyle="#333",g.fillRect(40,310,80,30),g.font="13px Futura",g.textBaseline="middle",g.textAlign="center",g.fillStyle="#fff",g.fillText("Clear",80,325)}function a(){g.fillStyle="#16a085",g.fillRect(120,310,80,30),g.font="14px Futura",g.textBaseline="middle",g.textAlign="center",g.fillStyle="#fff",g.fillText("Submit",160,325)}function s(){g.clearRect(0,0,v,m),_.each(tiles,function(t){t.draw()}),i(),o(),r(),a()}function c(t){stage+=t.letter,t.used=!0,s()}function l(t,e){_.each(tiles,function(n){t>n.x&&t<n.x+80&&e>n.y&&e<n.y+80&&!n.used&&c(n)})}function h(t,e){var n;n="win"==t?"Correct! Points: "+e:"Wrong!",$(".modal").text(n).fadeIn("500"),setTimeout(function(){$(".modal").fadeOut("1000")},1500)}function u(){_.each(tiles,function(t){t.used&&(t.used=!1)}),stage="",s()}function d(){_.each(tiles,function(t){t.used&&(t.used=!1,t.letter=y[randomInt(0,97)])}),score+=Math.pow(stage.length,2),h("win",Math.pow(stage.length,2)),stage="",s()}function f(){var t=stage.toLowerCase();-1!=_.indexOf(big_word_list,t)?d():(u(),h("lose"))}var p=$("canvas")[0],g=p.getContext("2d"),m=400,v=240,y="eeeeeeeeeeeeaaaaaaaaaiiiiiiiiioooooooonnnnnnrrrrrrttttttllllssssuuuuddddgggbbccmmppffhhvvwwyykjxqz".toUpperCase().split(""),b=[[0,0],[80,0],[160,0],[0,80],[80,80],[160,80],[0,160],[80,160],[160,160]];tiles=[],stage="",score=0,p.height=m,p.width=v,t(),$("canvas").on("click",function(t){var e=t.pageX-p.offsetLeft,n=t.pageY-p.offsetTop;240>=n?l(e,n):e>40&&120>e&&n>310&&340>n?u():e>120&&200>e&&n>310&&340>n&&f()})}function ransomNote(){function t(t){var e=$.parseJSON(t);$("#note_container").html("");var n=!0,i="";_.each(e,function(t){style='style="transform: rotate('+randomInt(-10,10)+"deg); -ms-transform: rotate("+randomInt(-10,10)+"deg); -webkit-transform: rotate("+randomInt(-10,10)+'deg);"',n?(n=!1,i+='<div class="word"><img src="'+t+'" class="char" '+style+">"):"/assets/ransom_space.png"==t?(n=!0,i+='<img src="'+t+'" class="char" '+style+"></div>"):i+='<img src="'+t+'" class="char" '+style+">"}),_.each($(".char"),function(t){t.css({transform:"rotate("+randomInt(-10,10)+"deg)","-ms-transform":"rotate("+randomInt(-10,10)+"deg)","-webkit-transform":"rotate("+randomInt(-10,10)+"deg)"})}),$(".loading_container").hide(),$("#note_container").html(i+'</div><br class="clear">').show()}$("#note_text").focus(),$("form").on("submit",function(e){e.preventDefault();var n=$("#note_text").val().split("");$(".loading_container").show(),$("#note_container").hide(),$.ajax({type:"POST",url:"/ransom_note/page",dataType:"json",data:{note:n},complete:function(e){t(e.responseText)},error:function(){alert("There was a problem!")}})})}function salonGalleries(){function t(t){t=_.reject(t,function(t){return-1==t.type.indexOf("image")}),e(t)}function e(t){function e(){var e=t[r];a>=1&&a-1>=r?(o.append("file",e),n()):location.reload()}function n(){$.ajax({url:i,data:o,type:"PUT",processData:!1,contentType:!1,success:function(){r+=1,e()},error:function(){location.reload()}})}{var o=new FormData,r=0,a=t.length;$("input.title").val()}"undefined"!=typeof o&&e()}var n=$("body")[0],i=window.location.pathname.replace(/\/edit.*$/,"");console.log,$("#edit_photo_container").length&&(n.addEventListener("dragover",function(t){t.preventDefault()},!1),n.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.files;return $("#throbber").show(),t(n),!1},!1))}function screwdriver(){}function seriousQuestion(){}function shareASecret(){function t(t){$("#retrieved_secret_text").hide().text(t).fadeIn(500)}var e="";$(".secret_input").focus(),$("form").on("submit",function(n){n.preventDefault();var i=$(".secret_input").val().replace(/^\s+|\s+$/g,"");i.length<10||i.length>255?alert("Your secret is either too long or too short. Write in a secret between 10 and 255 characters."):i==e?alert("You can't think of another secret? I'm sure you have at least a few more secrets to share."):(e=i,$(".secret_input").val(""),$.ajax({type:"POST",dataType:"json",url:"/share_a_secret/secrets",data:{new_secret:i},complete:function(e){t(e.responseText)}}))})}function sharks(){function t(t,e,n){var i=new Image;this.x_prime=t,this.y_prime=e,this.img=i,this.time=1,this.x=l.x,this.y=l.y;var o=this;i.onload=function(){o.height=i.height,o.width=i.width},this.draw=function(){var t=.005*this.time,e=this.width*t,n=this.height*t,i=e/2,o=n/2;this.time+=2,this.x=l.x+this.x_prime/1e4*Math.pow(this.time,2),this.y=l.y+this.y_prime/1e4*Math.pow(this.time,2),a.drawImage(this.img,this.x-i,this.y-o,e,n)},i.src=n}function e(e,n,i){h.push(new t(e,n,i))}function n(){_.each(h,function(t){if(t.x>2*c||t.x<0-t.width||t.y>2*s||t.y<0-t.height){var e=Math.random()*Math.PI*2,n=Math.cos(e)*s*.2,i=Math.sin(e)*s*.2;t.x_prime=n,t.y_prime=i,t.time=1,t.img.src=u[randomInt(0,u.length-1)],t.x=l.x,t.y=l.y}}),requestAnimFrame(i)}function i(){a.clearRect(0,0,c,s),_.each(h,function(t){t.draw()}),n()}function o(){if(h.length<10){var t=Math.random()*Math.PI*2,n=Math.cos(t)*s*.2,i=Math.sin(t)*s*.2;e(n,i,u[randomInt(0,u.length-1)])}setTimeout(o,randomInt(500,2e3))}var r=$("canvas")[0],a=r.getContext("2d"),s=window.innerHeight,c=window.innerWidth,l={x:c/2,y:s/2},h=[],u=["/assets/shark_0.png","/assets/shark_1.png","/assets/shark_2.png","/assets/shark_3.png","/assets/shark_4.png"];r.height=s,r.width=c,o(),i()}function signature(){function t(){for(n.beginPath(),n.moveTo(h[0].x,h[0].y),i=1;i<h.length-2;i++){var t=(h[i].x+h[i+1].x)/2,e=(h[i].y+h[i+1].y)/2;n.quadraticCurveTo(h[i].x,h[i].y,t,e),n.quadraticCurveTo(h[i].x,h[i].y,h[i+1].x,h[i+1].y)}n.strokeStyle=a,n.lineWidth=s,n.lineCap="round",n.stroke()}var e=$("canvas")[0],n=e.getContext("2d"),o=400,r=700,a="#000",s=5,c=document.createElement("canvas"),l=c.getContext("2d"),h=[];e.height=o,e.width=r,c.height=o,c.width=r,$(e).on("mousedown",function(t){h.push({x:t.pageX-e.offsetLeft,y:t.pageY-e.offsetTop}),this.drawing=!0}),$(e).on("mousemove",function(i){mouse_x=i.pageX-e.offsetLeft,mouse_y=i.pageY-e.offsetTop,this.drawing&&(n.clearRect(0,0,r,o),n.drawImage(c,0,0),h.push({x:mouse_x,y:mouse_y}),t())}),$(e).on("mouseup",function(){this.drawing=!1,$("canvas").css("cursor","default"),h=[],l.clearRect(0,0,r,o),l.drawImage(e,0,0)}),$("#clear").on("click",function(){n.clearRect(0,0,r,o),l.clearRect(0,0,r,o),e.drawing=!1,h=[]}),$("#save").on("click",function(){var t=e.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}),$(".color").on("change",function(){a="#"+this.color}),$(".size").on("change",function(){var t=$(".size").val();$.isNumeric(t)?s=t:alert("Size must be a number")}),$("body").disableSelection()}function skinnyDrinks(){function t(t,e,n){var i=e/(n*t/100),o=245/1.5;return o/i*100}$("form").on("submit",function(e){e.preventDefault();var n=$(".name").val().replace(/^\s+|\s+$/g,""),i=$(".abv").val().replace(/^\s+|\s+$/g,""),o=$(".calories").val().replace(/^\s+|\s+$/g,""),r=$(".ounces").val().replace(/^\s+|\s+$/g,"");if(""===n&&(n="beverage"),_.isNaN(Number(i)))i=i.replace("%","").replace(/^\s+|\s+$/g,""),_.isNaN(Number(i))&&alert("Please enter the ABV as a numerical percent (e.g. 40%).");else if(_.isNaN(Number(o)))alert("Please enter the calories as a number (e.g. 99).");else if(_.isNaN(Number(i)))alert("Please enter the ounces as a number (e.g. 1.5).");else{var a=t(i,o,r);_.isNaN(a)&&(a=0),a>100?alert("Error: Skinny Factor out of range. Please check that the calories in your beverage and the beverage size in ounces are correct."):(a=a.toFixed(2),$(".result").html("The Skinny Factor for "+n+" is"),$(".skinny_factor").html(a),$("#result_container").show())}})}function snare(){$(".circle").on("click",function(){$("#container").addClass("shrink"),setTimeout(function(){$("#container").html(""),$("#container").css({backgroundImage:"none",height:0}),setTimeout(function(){$("#error").show()},500)},1800)})}function songMachine(){function t(t){var e;return t>700?e=s[0]:t>650?e=s[1]:t>600?e=s[2]:t>550?e=s[3]:t>500?e=s[4]:t>450?e=s[5]:t>400?e=s[6]:t>350?e=s[7]:t>300?e=s[8]:t>250?e=s[9]:t>200?e=s[10]:t>150?e=s[11]:t>100?e=s[12]:t>50?e=s[13]:t>-1&&(e=s[14]),e}function e(t,e,n){this.x=t,this.y=e,this.color="36,39,51",this.played=!1,this.sound=new Howl({urls:["/assets/"+n+".mp3","/assets/"+n+".ogg"],volume:.5}),this.draw=function(){a.fillStyle=this.played?"rgba("+this.color+", 0.3)":"rgba("+this.color+", 1)",a.beginPath(),a.arc(this.x,this.y,10,0,2*Math.PI),a.fill(),a.closePath()},this.play=function(){this.sound.play()}}function n(t,n,i){c.push(new e(t,n,i))}function i(){_.each(c,function(t){t.y-=5,t.y<150&&0==t.played&&(t.play(),t.played=!0),t.y<-20&&(t.y=l+20,t.played=!1)})}function o(){a.beginPath(),a.fillStyle="#fff",a.strokeStyle="rgba(0,0,0,0.2)",a.lineWidth=3,a.fillRect(0,0,h,l),a.strokeRect(0,0,h,l),a.closePath(),_.each(c,function(t){t.draw()}),a.save(),a.beginPath(),a.strokeStyle="#242733",a.fillStyle="#242733",a.shadowOffsetY=10,a.shadowColor="rgba(0,0,0,0.4)",a.shadowBlur=3,a.lineWidth=2,a.moveTo(-10,130.5),a.lineTo(-10,170.5),a.lineTo(20,150.5),a.lineTo(-10,130.5),a.moveTo(20,150.5),a.lineTo(h-20,150.5),a.moveTo(h+10,130.5),a.lineTo(h+10,170.5),a.lineTo(h-20,150.5),a.lineTo(h+10,130.5),a.stroke(),a.fill(),a.closePath(),a.restore(),i(),requestAnimFrame(o)}var r=$("canvas")[0],a=r.getContext("2d"),s=["ab1","bb1","c1","db1","eb1","f1","g1","ab2","bb2","c2","db2","eb2","f2","g2","ab3"],c=[],l=window.innerHeight-40,h=750;r.height=l,r.width=h,$("canvas").on("click",function(e){var i=e.pageX-r.offsetLeft,o=e.pageY-r.offsetTop,a=t(i);n(i,o,a)}),o(),$("body").disableSelection()}function sparklers(){function t(){s.fillStyle="rgba(0,0,0,0.15)",s.fillRect(0,0,l,c),i(),requestAnimFrame(t)}function e(t,e){for(var i=0;100>i;i++)h.push(new n(t,e,u,1.2*Math.random()))}function n(t,e,n,i){this.x=t,this.y=e,this.x0=t,this.y0=e,this.v0=Math.random()/4,this.angle=Math.random()*(360*Math.PI/180),this.time=0,this.r=i,this.color=n}function i(){s.beginPath(),s.strokeStyle="#222",s.lineWidth=1,s.moveTo(p.x,p.y),s.lineTo(p.x+20,p.y+100),s.stroke(),s.closePath(),s.strokeStyle="rgba(255,224,171, 0.5)",s.lineWidth=2,s.beginPath(),s.moveTo(p.x0,p.y0),s.lineTo(p.x,p.y),s.stroke(),s.closePath(),p.x0=p.x,p.y0=p.y,p.x+=(g.x-p.x)/2,p.y+=(g.y-p.y)/2,o()}function o(){_.each(h,function(t){s.fillStyle=t.color,s.beginPath(),s.arc(t.x,t.y,t.r,0,2*Math.PI),s.fill(),s.closePath()}),r()}function r(){_.each(h,function(t,e){var i=t.v0*Math.sin(t.angle),o=t.v0*Math.cos(t.angle);t.time+=d,t.x=t.x0+i*t.time,t.y=t.y0-o*t.time+f*Math.pow(t.time,2),t.time>randomInt(300,1e3)&&(h[e]=new n(p.x,p.y,u,1.2*Math.random()))})}var a=$("canvas")[0],s=a.getContext("2d"),c=window.innerHeight,l=window.innerWidth,h=[],u="#ffe0ab",d=10,f=1e-4,p={x:l/2,y:c/2,x0:l/2,y0:c/2},g={x:l/2,y:c/2};a.height=c,a.width=l,t(),e(g.x,g.y),$("body").disableSelection(),$("canvas").on("mousemove",function(t){g.x=t.pageX,g.y=t.pageY}),document.addEventListener("touchmove",function(t){t.preventDefault(),g.x=t.pageX,g.y=t.pageY},!1)}function splodinBacon(){function t(){p.push(new e)}function e(){this.x=randomInt(0,c),this.y=-145,this.vy=randomInt(2,5),this.draw=function(){a.drawImage(l,this.x,this.y),this.y+=this.vy}}function n(){a.clearRect(0,0,c,s),_.each(p,function(t,n){t.draw(),t.y>s&&(p[n]=new e)}),_.each(g,function(t){t.draw()}),_.each(m,function(t){t.draw()}),g=_.reject(g,function(t){return t.x<-30||t.x>c||t.y<-145||t.y>s}),m=_.reject(m,function(t){return t.time<=0}),requestAnimFrame(n)}function i(t,e,n){this.x=t,this.y=e,this.vx=randomInt(-20,20),this.vy=randomInt(-20,20),this.draw=function(){a.drawImage(n,this.x,this.y),this.x+=this.vx,this.y+=this.vy}}function o(t,e){this.x=t,this.y=e,this.time=10,this.draw=function(){a.fillStyle="rgba(255,219,74, 0.5)",a.beginPath(),a.arc(this.x,this.y,40,0,2*Math.PI),a.fill(),a.closePath(),a.beginPath(),a.fillStyle="#ffcc00",a.arc(this.x,this.y,30,0,2*Math.PI),a.fill(),a.closePath(),a.beginPath(),a.fillStyle="#ff7b00",a.arc(this.x,this.y,20,0,2*Math.PI),a.fill(),a.closePath(),a.beginPath(),a.fillStyle="#e00000",a.arc(this.x,this.y,10,0,2*Math.PI),a.fill(),a.closePath(),a.beginPath(),a.fillStyle="#1e00ff",a.arc(this.x,this.y,3,0,2*Math.PI),a.fill(),a.closePath(),this.time-=1}}var r=$("canvas")[0],a=r.getContext("2d"),s=window.innerHeight,c=window.innerWidth,l=new Image,h=new Image,u=new Image,d=new Image,f=new Image,p=[],g=[],m=[];r.width=c,r.height=s,setInterval(function(){p.length<20&&t()},randomInt(50,2e3)),$("canvas").on("click",function(t){var n=t.pageX,r=t.pageY;_.each(p,function(t,a){n>t.x&&n<t.x+30&&r>t.y&&r<t.y+144&&(g.push(new i(t.x,t.y,h)),g.push(new i(t.x+15,t.y,u)),g.push(new i(t.x,t.y+72,d)),g.push(new i(t.x+15,t.y+72,f)),m.push(new o(n,r)),p[a]=new e)})}),n(),l.src="/assets/bacon_full.png",h.src="/assets/bacon_1.png",u.src="/assets/bacon_2.png",d.src="/assets/bacon_3.png",f.src="/assets/bacon_4.png"}function swivelGame(){function t(t,e,n,i){function o(t){var e=_.indexOf(h,t),n=[e-25,e+1,e+25,e-1],i=[];_.each(n,function(t){i.push(0>t||t>624?!1:t)}),(1==t.direction||2==t.direction)&&(!i[0]||3!=h[i[0]].direction&&4!=h[i[0]].direction||r(h[i[0]],e)),(3==t.direction||4==t.direction)&&(!i[2]||1!=h[i[2]].direction&&2!=h[i[2]].direction||r(h[i[2]],e)),1!=t.direction&&4!=t.direction||"left"==t.isEdge||i[3]===!1||2!=h[i[3]].direction&&3!=h[i[3]].direction||r(h[i[3]],e),2!=t.direction&&3!=t.direction||"right"==t.isEdge||!i[1]||1!=h[i[1]].direction&&4!=h[i[1]].direction||r(h[i[1]],e)}function r(t,e){t.flip(e)}this.x=t,this.y=e,this.radius=10,this.direction=n,this.isEdge=i,this.flip=function(t){this.direction+=1,l+=1,this.direction>4&&(this.direction=1);var e=this;setTimeout(function(){o(e,t)},70)},this.draw=function(){var t,e;a.fillStyle="#fff",a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.fill(),a.shadowBlur=2,a.shadowColor="rgba(0,0,0,0.3)",a.closePath(),a.beginPath(),1==this.direction?(a.fillStyle="#e74c3c",t=Math.PI,e=1.5*Math.PI):2==this.direction?(a.fillStyle="#3498db",t=1.5*Math.PI,e=2*Math.PI):3==this.direction?(a.fillStyle="#8e44ad",t=2*Math.PI,e=.5*Math.PI):4==this.direction&&(a.fillStyle="#2ecc71",t=.5*Math.PI,e=Math.PI),a.arc(this.x,this.y,this.radius,t,e,!1),a.lineTo(this.x,this.y),a.fill(),a.closePath()}}function e(e,n,i,o){h.push(new t(e,n,i,o))}function n(){a.clearRect(0,0,c,s),_.each(h,function(t){t.draw()}),$("#flips").text("Swivels: "+l)}function i(){for(var t=10,i=10,o=0;625>o;o++){var r=!1;t>490?(t=10,i+=20,r="left"):490==t&&(r="right"),e(t,i,randomInt(1,4),r),t+=20}n()}var o,r=$("canvas")[0],a=r.getContext("2d"),s=500,c=500,l=0,h=[];r.height=s,r.width=c,i(),$("canvas").on("click",function(t){var e=t.pageX-r.offsetLeft,n=t.pageY-r.offsetTop;_.each(h,function(t,i){e>t.x-t.radius&&e<t.x+t.radius&&n>t.y-t.radius&&n<t.y+t.radius&&t.flip(i)})}),o=setInterval(n,80),$("body").disableSelection()}function teammates(){function t(t){var n=t.username?t.username:t,i=!1;$.getJSON("http://api.dribbble.com/players/"+n+"/shots/following?per_page=10&callback=?",function(r){var a=r.shots;0==o.length?$.getJSON("http://api.dribbble.com/players/"+n+"/shots?per_page=1&callback=?",function(t){i=!0,e(a,t.shots[0])}):(i=!0,o=[],t.user_type="main",o.push(t),e(a))}),setTimeout(function(){i||(alert("Oops! Something went wrong. Please check your request and try again."),$("#form_container").show(300))},5e3)}function e(t,e){e&&n(e,"main"),_.each(t,function(t){n(t,"follower")}),i()}function n(t,e){var n={};n.image_url=t.image_teaser_url,n.shot_url=t.url,n.username=t.player.username,n.user_url=t.player.url,n.user_type=e,o.push(n)}function i(){var e=o.length-1,n=360*Math.PI/180/e,i=0;$(".plot_container").remove();var r=$("<div>",{"class":"plot_container"});_.each(o,function(e){var o=$("<div>",{"class":"user_container "+e.user_type}),a=$("<img>",{"class":"image",src:e.image_url}).on("click",function(){$("#teams_container").fadeOut(200),t(e)}),s=$("<a>",{href:e.user_url,"class":"username",target:"_blank"}).text(e.username);if("follower"==e.user_type){var c=240+240*Math.cos(i),l=240+240*Math.sin(i);o.css({top:c,left:l}),i+=n}o.append(a).append(s).appendTo(r)}),$("#teams_container").append(r),setTimeout(function(){$("#teams_container").fadeIn(500)},800)}var o=[];$("form").on("submit",function(e){e.preventDefault();var n=$.trim($("#username_input").val());n=""!=n?n:"dribbble",$("#form_container").fadeOut(300,function(){$("#start_over").fadeIn(300)}),t(n)})}function textScroller(){function t(t,e,n,i,r,s){this.phrase=t,this.x=e,this.y=n,this.vx=i,this.color=r,this.opacity=Math.random(),this.direction=s,this.move=function(){"right"==this.direction&this.x>a&&(this.x=0-30*this.phrase.length),"left"==this.direction&this.x<0-30*this.phrase.length&&(this.x=a),this.x+=this.vx,o.font="50px Courier New",o.fillStyle="rgba("+this.color+", "+this.opacity+")",o.fillText(this.phrase,this.x,this.y)}}function e(e){var n,i,o=randomFloat(-5,5);1.5>o&&o>0?o+=1.5:o>-1.5&&0>o&&(o-=1.5),o>=0?(n="right",i=30*e.length*-1):(n="left",i=a),s.push(new t(e,i,50,o,randomColorRGB(),n))}function n(){o.clearRect(0,0,a,r),_.each(s,function(t){t.move()}),setTimeout(n,50)}var i=$("canvas")[0],o=i.getContext("2d"),r=60,a=window.innerWidth,s=[];i.height=r,i.width=a,n(),$("input[type=text]").focus(),$("form").on("submit",function(t){t.preventDefault();var n=$(this).find("#phrase_text").val();$(this).find("#phrase_text").val(""),e(n)});var c=!0;$(".close").on("click",function(){c?($("form").animate({top:"-100px"},500),$(".close").html("&#9660").css("color","#222"),c=!c):($("form").animate({top:"0"},500),$(".close").html("&#9650").css("color","#666"),c=!c)})}function textToBraille(){var t={a:[1],b:[1,3],c:[1,2],d:[1,2,4],e:[1,4],f:[1,2,3],g:[1,2,3,4],h:[1,3,4],i:[2,3],j:[2,3,4],k:[5,1],l:[5,1,3],m:[5,1,2],n:[5,1,2,4],o:[5,1,4],p:[5,1,2,3],q:[5,1,2,3,4],r:[5,1,3,4],s:[5,2,3],t:[5,2,3,4],u:[5,6,1],v:[5,6,1,3],w:[5,6,3,4],x:[5,6,1,2],y:[5,6,1,2,4],z:[5,6,1,4],1:[1],2:[1,3],3:[1,2],4:[1,2,4],5:[1,4],6:[1,2,3],7:[1,2,3,4],8:[1,3,4],9:[2,3],0:[2,3,4],"!":[3,4,5],"'":[5],",":[3],"-":[5,6],".":[3,4,6],"?":[3,5,6],"^":[6],"#":[2,4,5,6]," ":[]};$("textarea").focus(),$("textarea").on("keyup",function(){var e=$.trim($("textarea").val()),n=$("#braille_container").empty(),i=[];e=e.replace(/(\d+)/g,"#$1").replace(/(\d)([a-j])/g,"$1 $2").replace(/([A-Z])/g,"^$1").toLowerCase(),_.each(e,function(e){i.push(_.has(t,e)?t[e]:t[" "])}),_.each(i,function(t){var e=$("<div />",{"class":"cell"}).appendTo(n);_.each(t,function(t){e.append('<div class="dot d'+t+'"></div>')})})})}function tinyNotes(){$("form").focus(),$("form").on("submit",function(t){""==$("input[type=text]").val().trim()&&(t.preventDefault(),alert("This is Tiny Notes, not Non-Existent Notes!"),$("input[type=text]").focus()),$("input[type=text]").val().length>255&&(t.preventDefault(),alert("This is Tiny Notes, not Insanely Long Notes! Keep it to 255 characters or less."),$("input[type=text]").focus())})}function tos(){function t(t){this.word=t,this.y=100,this.y0=100,this.x=l/2,this.color="#03020f",this.time=0,this.draw=function(){s.textBaseline="middle",s.textAlign="center",s.fillStyle=this.color,s.font="20px Open Sans",s.fillText(this.word,this.x,this.y)}}function e(e){h.push(new t(e))}function n(){_.each(h,function(t){t.y>=c-50?t.y=c-30:(t.y=t.y0+.5*u*Math.pow(t.time,2),t.time+=d,t.color="rgba(0,0,0,0.3)")})}function i(){_.each(h,function(t){t.draw()}),n()}function o(){h.length<r.length&&e(r[h.length]),s.clearRect(0,0,l,c),i(),setTimeout(o,d)}var r="Terms of Service:   The following terms and conditions govern all use of the jenniferdewalt.com website and all content, services and products available at or through the website (the Website). The Website is owned and operated by Jennifer Dewalt. (\u201cJennifer Dewalt\u201d). The Website is offered subject to your acceptance without modification of all of the terms and conditions contained herein and all other operating rules, policies (including, without limitation, Jennifer Dewalt\u2019s Privacy Policy) and procedures that may be published from time to time on this Site by Jennifer Dewalt (collectively, the \u201cAgreement\u201d). Please read this Agreement carefully before accessing or using the Website. By accessing or using any part of the web site, you agree to become bound by the terms and conditions of this agreement. If you do not agree to all the terms and conditions of this agreement, then you may not access the Website or use any services. If these terms and conditions are considered an offer by Jennifer Dewalt, acceptance is expressly limited to these terms. The Website is available only to individuals who are at least 13 years old. Your jenniferdewalt.com Account and Site. If you create an account on the Website, you are responsible for maintaining the security of your account, and you are fully responsible for all activities that occur under the account and any other actions taken in connection with the account. You must not describe or assign keywords to your account in a misleading or unlawful manner, including in a manner intended to trade on the name or reputation of others, and Jennifer Dewalt may change or remove any description or keyword that it considers inappropriate or unlawful, or otherwise likely to cause Jennifer Dewalt liability. You must immediately notify Jennifer Dewalt of any unauthorized uses of your account, your account or any other breaches of security. Jennifer Dewalt will not be liable for any acts or omissions by You, including any damages of any kind incurred as a result of such acts or omissions. Responsibility of Contributors. If you operate an account, comment on a account, post material to the Website, post links on the Website, or otherwise make (or allow any third party to make) material available by means of the Website (any such material, \u201cContent\u201d), You are entirely responsible for the content of, and any harm resulting from, that Content. That is the case regardless of whether the Content in question constitutes text, graphics, an audio file, or computer software. By making Content available, you represent and warrant that: the downloading, copying and use of the Content will not infringe the proprietary rights, including but not limited to the copyright, patent, trademark or trade secret rights, of any third party; if your employer has rights to intellectual property you create, you have either (i) received permission from your employer to post or make available the Content, including but not limited to any software, or (ii) secured from your employer a waiver as to all rights in or to the Content; you have fully complied with any third-party licenses relating to the Content, and have done all things necessary to successfully pass through to end users any required terms; the Content does not contain or install any viruses, worms, malware, Trojan horses or other harmful or destructive content; the Content is not spam, is not machine- or randomly-generated, and does not contain unethical or unwanted commercial content designed to drive traffic to third party sites or boost the search engine rankings of third party sites, or to further unlawful acts (such as phishing) or mislead recipients as to the source of the material (such as spoofing); the Content is not pornographic, does not contain threats or incite violence, and does not violate the privacy or publicity rights of any third party; your account is not getting advertised via unwanted electronic messages such as spam links on newsgroups, email lists, other accounts and web sites, and similar unsolicited promotional methods; your account is not named in a manner that misleads your readers into thinking that you are another person or company. For example, your account\u2019s URL or name is not the name of a person other than yourself or company other than your own; and you have, in the case of Content that includes computer code, accurately categorized and/or described the type, nature, uses and effects of the materials, whether requested to do so by Jennifer Dewalt or otherwise. By submitting Content to Jennifer Dewalt for inclusion on your Website, you grant Jennifer Dewalt a world-wide, royalty-free, and non-exclusive license to reproduce, modify, adapt and publish the Content solely for the purpose of displaying, distributing and promoting your account. If you delete Content, Jennifer Dewalt will use reasonable efforts to remove it from the Website, but you acknowledge that caching or references to the Content may not be made immediately unavailable. Without limiting any of those representations or warranties, Jennifer Dewalt has the right (though not the obligation) to, in Jennifer Dewalt\u2019s sole discretion (i) refuse or remove any content that, in Jennifer Dewalt\u2019s reasonable opinion, violates any Jennifer Dewalt policy or is in any way harmful or objectionable, or (ii) terminate or deny access to and use of the Website to any individual or entity for any reason, in Jennifer Dewalt\u2019s sole discretion. Jennifer Dewalt will have no obligation to provide a refund of any amounts previously paid. Responsibility of Website Visitors. Jennifer Dewalt has not reviewed, and cannot review, all of the material, including computer software, posted to the Website, and cannot therefore be responsible for that material\u2019s content, use or effects. By operating the Website, Jennifer Dewalt does not represent or imply that it endorses the material there posted, or that it believes such material to be accurate, useful or non-harmful. You are responsible for taking precautions as necessary to protect yourself and your computer systems from viruses, worms, Trojan horses, and other harmful or destructive content. The Website may contain content that is offensive, indecent, or otherwise objectionable, as well as content containing technical inaccuracies, typographical mistakes, and other errors. The Website may also contain material that violates the privacy or publicity rights, or infringes the intellectual property and other proprietary rights, of third parties, or the downloading, copying or use of which is subject to additional terms and conditions, stated or unstated. Jennifer Dewalt disclaims any responsibility for any harm resulting from the use by visitors of the Website, or from any downloading by those visitors of content there posted. Content Posted on Other Websites. We have not reviewed, and cannot review, all of the material, including computer software, made available through the websites and webpages to which jenniferdewalt.com links, and that link to jenniferdewalt.com. Jennifer Dewalt does not have any control over those non-jenniferdewalt.com websites and webpages, and is not responsible for their contents or their use. By linking to a non-jenniferdewalt.com website or webpage, Jennifer Dewalt does not represent or imply that it endorses such website or webpage. You are responsible for taking precautions as necessary to protect yourself and your computer systems from viruses, worms, Trojan horses, and other harmful or destructive content. Jennifer Dewalt disclaims any responsibility for any harm resulting from your use of non-jenniferdewalt.com websites and webpages. Copyright Infringement and DMCA Policy. As Jennifer Dewalt asks others to respect its intellectual property rights, it respects the intellectual property rights of others. If you believe that material located on or linked to by jenniferdewalt.com violates your copyright, you are encouraged to notify Jennifer Dewalt in accordance with Jennifer Dewalt\u2019s Digital Millennium Copyright Act (\u201cDMCA\u201d) Policy. Jennifer Dewalt will respond to all such notices, including as required or appropriate by removing the infringing material or disabling all links to the infringing material. Jennifer Dewalt will terminate a visitor\u2019s access to and use of the Website if, under appropriate circumstances, the visitor is determined to be a repeat infringer of the copyrights or other intellectual property rights of Jennifer Dewalt or others. In the case of such termination, Jennifer Dewalt will have no obligation to provide a refund of any amounts previously paid to Jennifer Dewalt. Intellectual Property. This Agreement does not transfer from Jennifer Dewalt to you any Jennifer Dewalt or third party intellectual property, and all right, title and interest in and to such property will remain (as between the parties) solely with Jennifer Dewalt. Jennifer Dewalt, jenniferdewalt, jenniferdewalt.com, the jenniferdewalt.com logo, and all other trademarks, service marks, graphics and logos used in connection with jenniferdewalt.com, or the Website are trademarks or registered trademarks of Jennifer Dewalt or Jennifer Dewalt\u2019s licensors. Other trademarks, service marks, graphics and logos used in connection with the Website may be the trademarks of other third parties. Your use of the Website grants you no right or license to reproduce or otherwise use any Jennifer Dewalt or third-party trademarks. Advertisements. Jennifer Dewalt reserves the right to display advertisements on your account. Changes. Jennifer Dewalt reserves the right, at its sole discretion, to modify or replace any part of this Agreement. It is your responsibility to check this Agreement periodically for changes. Your continued use of or access to the Website following the posting of any changes to this Agreement constitutes acceptance of those changes. Jennifer Dewalt may also, in the future, offer new services and/or features through the Website (including, the release of new tools and resources). Such new features and/or services shall be subject to the terms and conditions of this Agreement. Termination. Jennifer Dewalt may terminate your access to all or any part of the Website at any time, with or without cause, with or without notice, effective immediately. If you wish to terminate this Agreement or your jenniferdewalt.com account (if you have one), you may simply discontinue using the Website. All provisions of this Agreement which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity and limitations of liability. Disclaimer of Warranties. The Website is provided \u201cas is\u201d. Jennifer Dewalt and its suppliers and licensors hereby disclaim all warranties of any kind, express or implied, including, without limitation, the warranties of merchantability, fitness for a particular purpose and non-infringement. Neither Jennifer Dewalt nor its suppliers and licensors, makes any warranty that the Website will be error free or that access thereto will be continuous or uninterrupted. You understand that you download from, or otherwise obtain content or services through, the Website at your own discretion and risk. Limitation of Liability. In no event will Jennifer Dewalt, or its suppliers or licensors, be liable with respect to any subject matter of this agreement under any contract, negligence, strict liability or other legal or equitable theory for: (i) any special, incidental or consequential damages; (ii) the cost of procurement for substitute products or services; (iii) for interruption of use or loss or corruption of data; or (iv) for any amounts that exceed the fees paid by you to Jennifer Dewalt under this agreement during the twelve (12) month period prior to the cause of action. Jennifer Dewalt shall have no liability for any failure or delay due to matters beyond their reasonable control. The foregoing shall not apply to the extent prohibited by applicable law. General Representation and Warranty. You represent and warrant that (i) your use of the Website will be in strict accordance with the Jennifer Dewalt with this Agreement and with all applicable laws and regulations (including without limitation any local laws or regulations in your country, state, city, or other governmental area, regarding online conduct and acceptable content, and including all applicable laws regarding the transmission of technical data exported from the United States or the country in which you reside) and (ii) your use of the Website will not infringe or misappropriate the intellectual property rights of any third party. Indemnification. You agree to indemnify and hold harmless Jennifer Dewalt, its contractors, and its licensors, and their respective directors, officers, employees and agents from and against any and all claims and expenses, including attorneys\u2019 fees, arising out of your use of the Website, including but not limited to your violation of this Agreement. Miscellaneous. This Agreement constitutes the entire agreement between Jennifer Dewalt and you concerning the subject matter hereof, and they may only be modified by a written amendment signed by an authorized executive of Jennifer Dewalt, or by the posting by Jennifer Dewalt of a revised version. Except to the extent applicable law, if any, provides otherwise, this Agreement, any access to or use of the Website will be governed by the laws of the state of California, U.S.A., excluding its conflict of law provisions, and the proper venue for any disputes arising out of or relating to any of the same will be the state and federal courts located in San Francisco County, California. Except for claims for injunctive or equitable relief or claims regarding intellectual property rights (which may be brought in any competent court without the posting of a bond), any dispute arising under this Agreement shall be finally settled in accordance with the Comprehensive Arbitration Rules of the Judicial Arbitration and Mediation Service, Inc. (\u201cJAMS\u201d) by three arbitrators appointed in accordance with such Rules. The arbitration shall take place in San Francisco, California, in the English language and the arbitral decision may be enforced in any court. The prevailing party in any action or proceeding to enforce this Agreement shall be entitled to costs and attorneys\u2019 fees. If any part of this Agreement is held invalid or unenforceable, that part will be construed to reflect the parties\u2019 original intent, and the remaining portions will remain in full force and effect. A waiver by either party of any term or condition of this Agreement or any breach thereof, in any one instance, will not waive such term or condition or any subsequent breach thereof. You may assign your rights under this Agreement to any party that consents to, and agrees to be bound by, its terms and conditions; Jennifer Dewalt may assign its rights under this Agreement without condition. This Agreement will be binding upon and will inure to the benefit of the parties, their successors and permitted assigns.".split(" "),a=$("canvas")[0],s=a.getContext("2d"),c=window.innerHeight,l=window.innerWidth,h=[],u=1e-4,d=70;
a.height=c,a.width=l,o()}function tweetTime(){function t(t){var e=$.parseJSON(t);e.length>0?(c.clearRect(0,0,s.width,s.height),f=[],$("body").css({"background-color":"#222"}),$("#canvas_container").fadeIn(400,function(){n(e)})):alert("This person doesn't have any tweets!")}function e(){var t=["4 am","8 am","12 pm","4 pm","8 pm"],e=s.width/6,n=e;_.each(t,function(t){c.beginPath(),c.fillStyle="#ff9800",c.font="16px Arial Rounded MT Bold",c.textAlign="center",c.fillText(t,n,s.height-5),c.closePath(),n+=e})}function n(t){e(),_.each(t,function(t){f.push(new i(t))}),o(f[0],0,l)}function i(t){this.tweet=t.text,this.time=new Date(t.time),this.hours=new Date(t.time).getHours(),this.mins=new Date(t.time).getMinutes(),this.color="rgba(0, 183, 252, 0.7)",this.shadow="rgba(110, 215, 255, 0.15)",this.radius=l}function o(t,e,n){var i=h/(f.length+1),r=e+1;f.length>=r&&(t.x=(60*t.hours+t.mins)/2+t.radius,t.y=n,c.beginPath(),c.fillStyle=t.shadow,c.arc(t.x,t.y,t.radius,0,2*Math.PI),c.fill(),c.closePath(),c.beginPath(),c.fillStyle=t.color,c.arc(t.x,t.y,t.radius/1.5,0,2*Math.PI),c.fill(),c.closePath(),a=setTimeout(function(){o(f[r],r,n+i)},150))}function r(t,e,n,i,o){var r=t-n,a=e-i;return o*o>=r*r+a*a}var a,s=$("canvas")[0],c=s.getContext("2d"),l=7,h=400,u=h+2*l+30,d=720+2*l,f=[];s.width=d,s.height=u,$("#username_input").focus(),$("form").on("submit",function(e){e.preventDefault();var n=$("#username_input").val();clearTimeout(a),$("#container h1").animate({opacity:0},200,function(){$("form").animate({top:0},400),$("#container").remove()}),$.ajax({type:"POST",url:"/tweet_time/page",dataType:"json",data:{username:n},complete:function(e){t(e.responseText)},error:function(t,e,n){console.log(n),alert("Sorry, there seems to have been a problem with your search.")}})}),$("body").on("click",function(t){var e=t.pageX-s.offsetLeft,n=t.pageY-s.offsetTop;_.each(f,function(t){r(e,n,t.x,t.y,t.radius)&&$(".tweet").text(t.tweet)})})}function typingTest(){function t(){var t=(new Date).getTime(),i=0;o=setInterval(function(){var r=(new Date).getTime()-t;i=Math.floor(r/1e3),e(60-i),60==i&&(clearInterval(o),n($("textarea").val(),u))},500)}function e(t){var e=Math.floor(t/60),n=t%60;10>n&&(n="0"+n),10>e&&(e="0"+e),cur_time=e+":"+n,$(".timer").text(cur_time)}function n(t,e){var n={},o=0;e=e.replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/<br>/g," ").split(" "),t=t.replace(/\r?\n|\r/g," ").replace(/  /g," ").split(" "),_.each(e,function(t){n[t]=n[t]?n[t]+1:1}),_.each(t,function(t){n[t]&&n[t]>0&&(o+=1,n[t]=n[t]-1)}),i(o)}function i(t){$(".end .wpm").text("Words per minute: "+t),$(".end").fadeIn(300)}var o,r="<p>Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.</p><br><p>Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battlefield of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.</p><br><p>But, in a larger sense, we cannot dedicate -- we cannot consecrate -- we cannot hallow -- this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us -- that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion -- that we here highly resolve that these dead shall not have died in vain -- that this nation, under God, shall have a new birth of freedom -- and that government of the people, by the people, for the people, shall not perish from the earth.</p>",a="<p>Fans, for the past two weeks you have been reading about a bad break I got. Yet today I consider myself the luckiest man on the face of the earth. I have been in ballparks for seventeen years and have never received anything but kindness and encouragement from you fans.</p><br><p>Look at these grand men. Which of you wouldn't consider it the highlight of his career to associate with them for even one day?</p><br><p>Sure, I'm lucky. Who wouldn't consider it an honor to have known Jacob Ruppert -- also the builder of baseball's greatest empire, Ed Barrow -- to have spent the next nine years with that wonderful little fellow Miller Huggins -- then to have spent the next nine years with that outstanding leader, that smart student of psychology -- the best manager in baseball today, Joe McCarthy!</p><br><p>Sure, I'm lucky. When the New York Giants, a team you would give your right arm to beat, and vice versa, sends you a gift, that's something! When everybody down to the groundskeepers and those boys in white coats remember you with trophies, that's something.</p><br><p>When you have a wonderful mother-in-law who takes sides with you in squabbles against her own daughter, that's something. When you have a father and mother who work all their lives so that you can have an education and build your body, it's a blessing! When you have a wife who has been a tower of strength and shown more courage than you dreamed existed, that's the finest I know.</p><br><p>So I close in saying that I might have had a tough break -- but I have an awful lot to live for!</p>",s="<p>We observe today not a victory of party, but a celebration of freedom -- symbolizing an end, as well as a beginning -- signifying renewal, as well as change. For I have sworn before you and Almighty God the same solemn oath our forebears prescribed nearly a century and three-quarters ago.</p><br><p>The world is very different now. For man holds in his mortal hands the power to abolish all forms of human poverty and all forms of human life. And yet the same revolutionary beliefs for which our forebears fought are still at issue around the globe -- the belief that the rights of man come not from the generosity of the state, but from the hand of God.</p><br><p>We dare not forget today that we are the heirs of that first revolution. Let the word go forth from this time and place, to friend and foe alike, that the torch has been passed to a new generation of Americans -- born in this century, tempered by war, disciplined by a hard and bitter peace, proud of our ancient heritage, and unwilling to witness or permit the slow undoing of those human rights to which this nation has always been committed, and to which we are committed today at home and around the world.</p><br><p>Let every nation know, whether it wishes us well or ill, that we shall pay any price, bear any burden, meet any hardship, support any friend, oppose any foe, to assure the survival and the success of liberty.</p><br><p>This much we pledge -- and more.</p>",c="<p>We've grown used to wonders in this century. It's hard to dazzle us. But for 25 years the United States space program has been doing just that. We've grown used to the idea of space, and perhaps we forget that we've only just begun. We're still pioneers. They, the members of the Challenger crew, were pioneers.</p><br><p>And I want to say something to the school children of America who were watching the live coverage of the shuttle's takeoff. I know it is hard to understand, but sometimes painful things like this happen. It's all part of the process of exploration and discovery. It's all part of taking a chance and expanding man's horizons. The future doesn't belong to the fainthearted; it belongs to the brave. The Challenger crew was pulling us into the future, and we'll continue to follow them...</p><br><p>The crew of the space shuttle Challenger honoured us by the manner in which they lived their lives. We will never forget them, nor the last time we saw them, this morning, as they prepared for the journey and waved goodbye and 'slipped the surly bonds of earth' to 'touch the face of God.'</p>",l="<p>Now it is the time to act on behalf of women everywhere. If we take bold steps to better the lives of women, we will be taking bold steps to better the lives of children and families too. Families rely on mothers and wives for emotional support and care. Families rely on women for labor in the home. And increasingly, everywhere, families rely on women for income needed to raise healthy children and care for other relatives.</p><br><p>As long as discrimination and inequities remain so commonplace everywhere in the world, as long as girls and women are valued less, fed less, fed last, overworked, underpaid, not schooled, subjected to violence in and outside their homes -- the potential of the human family to create a peaceful, prosperous world will not be realized.</p><br><p>Let -- Let this conference be our -- and the world\u2019s -- call to action. Let us heed that call so we can create a world in which every woman is treated with respect and dignity, every boy and girl is loved and cared for equally, and every family has the hope of a strong and stable future. That is the work before you. That is the work before all of us who have a vision of the world we want to see -- for our children and our grandchildren.</p>",h=[r,a,s,c,l],u=h[randomInt(0,4)];$("textarea").blur(),$("button.start").on("click",function(){$("textarea").focus(),$("#text_passage").html(u),$(".modal.start").fadeOut(300),$("textarea").one("input",function(){t()})}),$(".end p").on("click",function(){$(".modal.end").fadeOut(300)})}function viewGraph(){function t(t){$(".view_mark:nth-child("+t+")").css("opacity",i)}var e=$("#views_container > div").size(),n=1/(1.3*e),i=1,o=e;_.each(_.range(e),function(e){t(o-e),i-=n}),$("#info_tab").on("click",function(){$(".modal.info").fadeIn("400")}),$(".close").on("click",function(){$(".modal.info").fadeOut("300")})}function whatDay(){function t(t){$.getJSON("http://en.wikipedia.org//w/api.php?action=parse&format=json&page="+t+"&prop=text&section=1&callback=?",function(t){e(t)})}function e(t){if(t.parse){var e=t.parse.text["*"].split("<ul>");e=e[1].split("</ul>")[0],e=e.replace(/\/wiki/g,"http://en.wikipedia.org/wiki"),$("#events_container").html(e)}$("#result").fadeIn(300)}var n=new Date;n.setHours(0,0,0,0);var i={month:n.getMonth(),date:n.getDate(),year:n.getFullYear()},o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=["January","February","March","April","May","June","July","August","September","October","November","December"];$("form .month").val(i.month+1),$("form .date").val(i.date),$("form .year").val(i.year),$("#day_container").text(r[i.month]+" "+i.date+", "+i.year+" is a "+o[n.getDay()]),t(r[i.month]+"%20"+i.date),$("form").on("submit",function(e){$("#result").hide(),e.preventDefault();var a={month:Number($.trim($("form .month").val()))-1,date:Number($.trim($("form .date").val())),year:Number($.trim($("form .year").val()))};(isNaN(a.month)||isNaN(a.date)||isNaN(a.year))&&(a.month=i.month,a.date=i.date,a.year=i.year);var s=new Date(a.year,a.month,a.date),c=n>s?"was":"is",l=r[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear()+" "+c+" a "+o[s.getDay()];$("#day_container").text(l),$("form .month").val(s.getMonth()+1),$("form .date").val(s.getDate()),$("form .year").val(s.getFullYear()),t(r[s.getMonth()]+"%20"+s.getDate())})}function windowPage(){function t(){r.draw(),h.draw()}var e=$("canvas")[0],n=e.getContext("2d"),i=600,o=500,r=new Image,a=n.createLinearGradient(0,2.3*e.height,1.5*e.width,0);a.addColorStop(0,"rgba(209, 221, 229, 0.399)"),a.addColorStop(.135,"rgba(255, 255, 255, 0.556)"),a.addColorStop(.19,"rgba(224, 228, 251, 0.506)"),a.addColorStop(.355,"rgba(255, 255, 255, 0.467)"),a.addColorStop(.5,"rgba(255, 255, 255, 0.467)"),a.addColorStop(.76,"rgba(179, 196, 239, 0.371)"),a.addColorStop(.925,"rgba(255, 255, 255, 0.449)"),a.addColorStop(.99,"rgba(210, 228, 249, 0.445)"),e.height=i,e.width=o;var s={y:e.height},c=new Howl({urls:["/assets/nature.mp3","/assets/nature.ogg"],volume:0,loop:!0}),l=$("#images").data("img"),h={width:e.width,height:e.height/2,position:e.height,open:0,draw:function(){n.beginPath(),n.fillStyle=a,n.fillRect(0,0,this.width,this.height),n.strokeStyle="#fafafa",n.lineWidth=10,n.moveTo(0,this.height),n.lineTo(this.width,this.height),n.stroke(),n.closePath(),n.beginPath(),n.fillStyle=a,n.fillRect(0,this.position,this.width,-1*this.height),n.strokeStyle="#fafafa",n.lineWidth=10,n.moveTo(0,this.position),n.lineTo(this.width,this.position),n.moveTo(0,this.position-this.height),n.lineTo(this.width,this.position-this.height),n.stroke(),n.closePath()}};r.onload=function(){t()},r.draw=function(){var t=(e.width-r.width)/2,i=(e.height-r.height)/2;n.drawImage(r,t,i)},$("canvas").on("mousemove",function(n){s.y=n.pageY-e.offsetTop,s.y<600&&s.y>e.height/2&&(h.position=s.y,c.volume(1-(s.y-e.height/2)/(e.height/2))),t()}),$("button").on("click",function(){r.src=l[randomInt(0,l.length-1)],t()}),c.play().volume(0),r.src=l[randomInt(0,l.length-1)]}function windowSizer(){function t(){o=randomInt(500,s-200),r=randomInt(250,a-200),$("#target_text").text(o+" x "+r),$("#target_area").animate({width:o,height:r},300).css({backgroundColor:randomColorHex}),$("#score").text("Resizes: "+l)}function e(){var t=(new Date).getTime(),e=0;clock=setInterval(function(){var o=(new Date).getTime()-t;e=Math.floor(o/1e3),n(60-e),60==e&&(clearInterval(clock),i())},500)}function n(t){$("#progress_bar").css("width",t/60*100+"%")}function i(){c=!1,$("#info_container").hide(),$("#final_score").text("Total Resizes: "+l),$("#end_container").fadeIn(300)}var o,r,a=screen.availHeight,s=screen.availWidth,c=!1,l=0;$("#start").on("click",function(){$("#start_container").fadeOut(300),c=!0,t(),e()}),$(window).resize(function(){window.innerWidth>o-3&&window.innerWidth<o+3&&window.innerHeight>r-3&&window.innerHeight<r+3&&c&&(l+=1,t())})}function wish(){function t(){$("#message").text(i[o]).show(),setTimeout(e,380)}function e(){$("#message").hide(),n()}function n(){o+=1,o>2&&(o=0),t()}var i=["were younger.","were thinner.","had a faster processor."],o=0;t()}function wordClock(){function t(){var e=(new Date).getHours();if(e>11)var n="pm";else var n="am";var i=(new Date).getMinutes();if(i>10&&20>i)var o=i,r=null;else if(i>9)var o=10*Math.floor(i/10),r=i%10;else if(0==i)var o=null,r=null;else var o="zero",r=i;$(".hour_list li").removeClass("now"),e%12==0?$(".hour_list .12").addClass("now"):$(".hour_list ."+e%12).addClass("now"),$(".abbrev").removeClass("now"),$("#"+n).addClass("now"),$(".min_list li").removeClass("now"),$(".min_list ."+r).addClass("now"),$(".min_list ."+o).addClass("now"),setTimeout(t,1e3)}t()}function wordCloud(){function t(t){$(".input_warning").css("opacity",0).text(t).animate({opacity:1},300),$("#text_field").focus()}$("#text_field").focus(),$("form").on("submit",function(e){var n=$("#text_field").val();n.length>255?(e.preventDefault(),t("Your text is too long.")):n.length<1&&(e.preventDefault(),t("Your text is too short."))}),$("#info_tab").on("click",function(){$(".modal").fadeIn(400)}),$(".close").on("click",function(){$(".modal").fadeOut(400)})}function yourSpace(){}function randomInt(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function randomColorHex(){return"#"+Math.random().toString(16).slice(2,8)}function randomColorRGB(){var t=randomInt(0,255),e=randomInt(0,255),n=randomInt(0,255);return t+", "+e+", "+n}function randomColorHSL(){var t=randomInt(0,360),e=randomInt(0,100),n=randomInt(0,100);return{h:t,s:e,l:n}}function randomFloat(t,e){return Math.random()*(e-t+1)+t}function randomNumWithGap(t,e,n,i){var o=Math.random();return.5>o?randomInt(t,e):randomInt(n,i)}function utf8_to_b64(t){return window.btoa(unescape(encodeURIComponent(t)))}function b64_to_utf8(t){return decodeURIComponent(escape(window.atob(t)))}function rgbComponentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function hexToRgb(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,n,i){return e+e+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function render(t,e){return JST["templates/"+t](e)}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=oe.type(t);return"function"===n||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(de.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=we[t]={};return oe.each(t.match(be)||[],function(t,n){e[n]=!0}),e}function a(){pe.addEventListener?(pe.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1)):(pe.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(pe.addEventListener||"load"===event.type||"complete"===pe.readyState)&&(a(),oe.ready())}function c(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(Se,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Te.test(n)?oe.parseJSON(n):n}catch(o){}oe.data(t,e,n)}else n=void 0}return n}function l(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,n,i){if(oe.acceptData(t)){var o,r,a=oe.expando,s=t.nodeType,c=s?oe.cache:t,l=s?t[a]:t[a]&&a;if(l&&c[l]&&(i||c[l].data)||void 0!==n||"string"!=typeof e)return l||(l=s?t[a]=X.pop()||oe.guid++:a),c[l]||(c[l]=s?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(i?c[l]=oe.extend(c[l],e):c[l].data=oe.extend(c[l].data,e)),r=c[l],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[oe.camelCase(e)]=n),"string"==typeof e?(o=r[e],null==o&&(o=r[oe.camelCase(e)])):o=r,o}}function u(t,e,n){if(oe.acceptData(t)){var i,o,r=t.nodeType,a=r?oe.cache:t,s=r?t[oe.expando]:oe.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in i?e=[e]:(e=oe.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!l(i):!oe.isEmptyObject(i))return}(n||(delete a[s].data,l(a[s])))&&(r?oe.cleanData([t],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function d(){return!0}function f(){return!1}function p(){try{return pe.activeElement}catch(t){}}function g(t){var e=Le.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==ke?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==ke?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||oe.nodeName(i,e)?r.push(i):oe.merge(r,m(i,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],r):r}function v(t){Ie.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=ze.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function _(t,e){for(var n,i=0;null!=(n=t[i]);i++)oe._data(n,"globalEval",!e||oe._data(e[i],"globalEval"))}function x(t,e){if(1===e.nodeType&&oe.hasData(t)){var n,i,o,r=oe._data(t),a=oe._data(e,r),s=r.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,o=s[n].length;o>i;i++)oe.event.add(e,n,s[n][i])}a.data&&(a.data=oe.extend({},a.data))}}function k(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[oe.expando]){o=oe._data(e);for(i in o.events)oe.removeEvent(e,i,o.handle);e.removeAttribute(oe.expando)}"script"===n&&e.text!==t.text?(b(e).text=t.text,w(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Ie.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function T(e,n){var i,o=oe(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:oe.css(o[0],"display");return o.detach(),r}function S(t){var e=pe,n=Ze[t];return n||(n=T(t,e),"none"!==n&&n||(Qe=(Qe||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Qe[0].contentWindow||Qe[0].contentDocument).document,e.write(),e.close(),n=T(t,e),Qe.detach()),Ze[t]=n),n}function C(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function $(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=fn.length;o--;)if(e=fn[o]+n,e in t)return e;return i}function P(t,e){for(var n,i,o,r=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(r[a]=oe._data(i,"olddisplay"),n=i.style.display,e?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Pe(i)&&(r[a]=oe._data(i,"olddisplay",S(i.nodeName)))):(o=Pe(i),(n&&"none"!==n||!o)&&oe._data(i,"olddisplay",o?n:oe.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[a]||"":"none"));return t}function N(t,e,n){var i=ln.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function I(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=oe.css(t,n+$e[r],!0,o)),i?("content"===n&&(a-=oe.css(t,"padding"+$e[r],!0,o)),"margin"!==n&&(a-=oe.css(t,"border"+$e[r]+"Width",!0,o))):(a+=oe.css(t,"padding"+$e[r],!0,o),"padding"!==n&&(a+=oe.css(t,"border"+$e[r]+"Width",!0,o)));return a}function D(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=tn(t),a=ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=en(t,e,r),(0>o||null==o)&&(o=t.style[e]),on.test(o))return o;i=a&&(ne.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+I(t,e,n||(a?"border":"content"),i,r)+"px"}function A(t,e,n,i,o){return new A.prototype.init(t,e,n,i,o)}function M(){return setTimeout(function(){pn=void 0}),pn=oe.now()}function E(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=$e[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function K(t,e,n){for(var i,o=(wn[e]||[]).concat(wn["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,e,t))return i}function L(t,e,n){var i,o,r,a,s,c,l,h,u=this,d={},f=t.style,p=t.nodeType&&Pe(t),g=oe._data(t,"fxshow");n.queue||(s=oe._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,oe.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],l=oe.css(t,"display"),h="none"===l?oe._data(t,"olddisplay")||S(t.nodeName):l,"inline"===h&&"none"===oe.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==S(t.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",ne.shrinkWrapBlocks()||u.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],mn.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;p=!0}d[i]=g&&g[i]||oe.style(t,i)}else l=void 0;if(oe.isEmptyObject(d))"inline"===("none"===l?S(t.nodeName):l)&&(f.display=l);else{g?"hidden"in g&&(p=g.hidden):g=oe._data(t,"fxshow",{}),r&&(g.hidden=!p),p?oe(t).show():u.done(function(){oe(t).hide()}),u.done(function(){var e;oe._removeData(t,"fxshow");for(e in d)oe.style(t,e,d[e])});for(i in d)a=K(p?g[i]:0,i,u),i in g||(g[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function j(t,e){var n,i,o,r,a;for(n in t)if(i=oe.camelCase(n),o=e[i],r=t[n],oe.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),a=oe.cssHooks[i],a&&"expand"in a){r=a.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function F(t,e,n){var i,o,r=0,a=bn.length,s=oe.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var e=pn||M(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,r=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(r);return s.notifyWith(t,[l,r,n]),1>r&&c?n:(s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:pn||M(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)l.tweens[n].run(1);return e?s.resolveWith(t,[l,e]):s.rejectWith(t,[l,e]),this}}),h=l.props;for(j(h,l.opts.specialEasing);a>r;r++)if(i=bn[r].call(l,t,h,l.opts))return i;return oe.map(h,K,l),oe.isFunction(l.opts.start)&&l.opts.start.call(t,l),oe.fx.timer(oe.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(be)||[];if(oe.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function O(t,e,n,i){function o(s){var c;return r[s]=!0,oe.each(t[s]||[],function(t,s){var l=s(e,n,i);return"string"!=typeof l||a||r[l]?a?!(c=l):void 0:(e.dataTypes.unshift(l),o(l),!1)}),c}var r={},a=t===qn;return o(e.dataTypes[0])||!r["*"]&&o("*")}function H(t,e){var n,i,o=oe.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&oe.extend(!0,t,n),t}function B(t,e,n){for(var i,o,r,a,s=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(a in s)if(s[a]&&s[a].test(o)){c.unshift(a);break}if(c[0]in n)r=c[0];else{for(a in n){if(!c[0]||t.converters[a+" "+c[0]]){r=a;break}i||(i=a)}r=r||i}return r?(r!==c[0]&&c.unshift(r),n[r]):void 0}function W(t,e,n,i){var o,r,a,s,c,l={},h=t.dataTypes.slice();if(h[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(r=h.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=r,r=h.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(a=l[c+" "+r]||l["* "+r],!a)for(o in l)if(s=o.split(" "),s[1]===r&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[o]:l[o]!==!0&&(r=s[0],h.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(u){return{state:"parsererror",error:a?u:"No conversion from "+c+" to "+r}}}return{state:"success",data:e}}function q(t,e,n,i){var o;if(oe.isArray(e))oe.each(e,function(e,o){n||Xn.test(t)?i(t,o):q(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(o in e)q(t+"["+o+"]",e[o],n,i)}function G(){try{return new t.XMLHttpRequest}catch(e){}}function U(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function z(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var X=[],Y=X.slice,J=X.concat,V=X.push,Q=X.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne={},ie="1.11.1",oe=function(t,e){return new oe.fn.init(t,e)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,ce=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Y.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:X.sort,splice:X.splice},oe.extend=oe.fn.extend=function(){var t,e,n,i,o,r,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===c&&(a=this,s--);c>s;s++)if(null!=(o=arguments[s]))for(i in o)t=a[i],n=o[i],a!==n&&(l&&n&&(oe.isPlainObject(n)||(e=oe.isArray(n)))?(e?(e=!1,r=t&&oe.isArray(t)?t:[]):r=t&&oe.isPlainObject(t)?t:{},a[i]=oe.extend(l,r,n)):void 0!==n&&(a[i]=n));return a},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!oe.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(se,ce)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,a=t.length,s=n(t);if(i){if(s)for(;a>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(s)for(;a>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(re,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):V.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Q)return Q.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,a=t.length,s=!n;a>r;r++)i=!e(t[r],r),i!==s&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,a=t.length,s=n(t),c=[];if(s)for(;a>r;r++)o=e(t[r],r,i),null!=o&&c.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&c.push(o);return J.apply([],c)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),oe.isFunction(t)?(n=Y.call(arguments,2),i=function(){return t.apply(e||this,n.concat(Y.call(arguments)))},i.guid=t.guid=t.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var le=/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
function(t){function e(t,e,n,i){var o,r,a,s,c,l,u,f,p,g;if((e?e.ownerDocument||e:O)!==A&&D(e),e=e||A,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(E&&!i){if(o=ye.exec(t))if(a=o[1]){if(9===s){if(r=e.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(a))&&F(e,r)&&r.id===a)return n.push(r),n}else{if(o[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((a=o[3])&&_.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(a)),n}if(_.qsa&&(!K||!K.test(t))){if(f=u=R,p=e,g=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(l=S(t),(u=e.getAttribute("id"))?f=u.replace(we,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",c=l.length;c--;)l[c]=f+d(l[c]);p=be.test(t)&&h(e.parentNode)||e,g=l.join(",")}if(g)try{return Z.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{u||e.removeAttribute("id")}}}return $(t.replace(ce,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function o(t){var e=A.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)x.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function c(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function h(t){return t&&typeof t.getElementsByTagName!==z&&t}function u(){}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=B++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,a){var s,c,l=[H,r];if(a){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(c=e[R]||(e[R]={}),(s=c[i])&&s[0]===H&&s[1]===r)return l[2]=s[2];if(c[i]=l,l[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function m(t,e,n,i,o){for(var r,a=[],s=0,c=t.length,l=null!=e;c>s;s++)(r=t[s])&&(!n||n(r,i,o))&&(a.push(r),l&&e.push(s));return a}function v(t,e,n,o,r,a){return o&&!o[R]&&(o=v(o)),r&&!r[R]&&(r=v(r,a)),i(function(i,a,s,c){var l,h,u,d=[],f=[],p=a.length,v=i||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?v:m(v,d,t,s,c),b=n?r||(i?t:p||o)?[]:a:y;if(n&&n(y,b,s,c),o)for(l=m(b,f),o(l,[],s,c),h=l.length;h--;)(u=l[h])&&(b[f[h]]=!(y[f[h]]=u));if(i){if(r||t){if(r){for(l=[],h=b.length;h--;)(u=b[h])&&l.push(y[h]=u);r(null,b=[],l,c)}for(h=b.length;h--;)(u=b[h])&&(l=r?ee.call(i,u):d[h])>-1&&(i[l]=!(a[l]=u))}}else b=m(b===a?b.splice(p,b.length):b),r?r(null,a,b,c):Z.apply(a,b)})}function y(t){for(var e,n,i,o=t.length,r=x.relative[t[0].type],a=r||x.relative[" "],s=r?1:0,c=f(function(t){return t===e},a,!0),l=f(function(t){return ee.call(e,t)>-1},a,!0),h=[function(t,n,i){return!r&&(i||n!==P)||((e=n).nodeType?c(t,n,i):l(t,n,i))}];o>s;s++)if(n=x.relative[t[s].type])h=[f(p(h),n)];else{if(n=x.filter[t[s].type].apply(null,t[s].matches),n[R]){for(i=++s;o>i&&!x.relative[t[i].type];i++);return v(s>1&&p(h),s>1&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ce,"$1"),n,i>s&&y(t.slice(s,i)),o>i&&y(t=t.slice(i)),o>i&&d(t))}h.push(n)}return p(h)}function b(t,n){var o=n.length>0,r=t.length>0,a=function(i,a,s,c,l){var h,u,d,f=0,p="0",g=i&&[],v=[],y=P,b=i||r&&x.find.TAG("*",l),w=H+=null==y?1:Math.random()||.1,_=b.length;for(l&&(P=a!==A&&a);p!==_&&null!=(h=b[p]);p++){if(r&&h){for(u=0;d=t[u++];)if(d(h,a,s)){c.push(h);break}l&&(H=w)}o&&((h=!d&&h)&&f--,i&&g.push(h))}if(f+=p,o&&p!==f){for(u=0;d=n[u++];)d(g,v,a,s);if(i){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=V.call(c));v=m(v)}Z.apply(c,v),l&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(c)}return l&&(H=w,P=y),g};return o?i(a):a}var w,_,x,k,T,S,C,$,P,N,I,D,A,M,E,K,L,j,F,R="sizzle"+-new Date,O=t.document,H=0,B=0,W=n(),q=n(),G=n(),U=function(t,e){return t===e&&(I=!0),0},z="undefined",X=1<<31,Y={}.hasOwnProperty,J=[],V=J.pop,Q=J.push,Z=J.push,te=J.slice,ee=J.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=oe.replace("w","w#"),ae="\\["+ie+"*("+oe+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",se=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",ce=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),he=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(se),fe=new RegExp("^"+re+"$"),pe={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(J=te.call(O.childNodes),O.childNodes),J[O.childNodes.length].nodeType}catch(ke){Z={apply:J.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}_=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:O,i=n.defaultView;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,M=n.documentElement,E=!T(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){D()},!1):i.attachEvent&&i.attachEvent("onunload",function(){D()})),_.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=ve.test(n.getElementsByClassName)&&o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),_.getById=o(function(t){return M.appendChild(t).id=R,!n.getElementsByName||!n.getElementsByName(R).length}),_.getById?(x.find.ID=function(t,e){if(typeof e.getElementById!==z&&E){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(_e,xe);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(_e,xe);return function(t){var n=typeof t.getAttributeNode!==z&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=_.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==z?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=_.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==z&&E?e.getElementsByClassName(t):void 0},L=[],K=[],(_.qsa=ve.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&K.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||K.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||K.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&K.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||K.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),K.push(",.*:")})),(_.matchesSelector=ve.test(j=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(t){_.disconnectedMatch=j.call(t,"div"),j.call(t,"[s!='']:x"),L.push("!=",se)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),e=ve.test(M.compareDocumentPosition),F=e||ve.test(M.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return I=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!_.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===O&&F(O,t)?-1:e===n||e.ownerDocument===O&&F(O,e)?1:N?ee.call(N,t)-ee.call(N,e):0:4&i?-1:1)}:function(t,e){if(t===e)return I=!0,0;var i,o=0,r=t.parentNode,s=e.parentNode,c=[t],l=[e];if(!r||!s)return t===n?-1:e===n?1:r?-1:s?1:N?ee.call(N,t)-ee.call(N,e):0;if(r===s)return a(t,e);for(i=t;i=i.parentNode;)c.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;c[o]===l[o];)o++;return o?a(c[o],l[o]):c[o]===O?-1:l[o]===O?1:0},n):A},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==A&&D(t),n=n.replace(ue,"='$1']"),!(!_.matchesSelector||!E||L&&L.test(n)||K&&K.test(n)))try{var i=j.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&D(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&D(t);var n=x.attrHandle[e.toLowerCase()],i=n&&Y.call(x.attrHandle,e.toLowerCase())?n(t,e,!E):void 0;return void 0!==i?i:_.attributes||!E?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(I=!_.detectDuplicates,N=!_.sortStable&&t.slice(0),t.sort(U),I){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return N=null,t},k=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=k(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_e,xe),t[3]=(t[3]||t[4]||t[5]||"").replace(_e,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&de.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_e,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==z&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,c){var l,h,u,d,f,p,g=r!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!c&&!s;if(m){if(r){for(;g;){for(u=e;u=u[g];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(h=m[R]||(m[R]={}),l=h[t]||[],f=l[0]===H&&l[1],d=l[0]===H&&l[2],u=f&&m.childNodes[f];u=++f&&u&&u[g]||(d=f=0)||p.pop();)if(1===u.nodeType&&++d&&u===e){h[t]=[H,f,d];break}}else if(y&&(l=(e[R]||(e[R]={}))[t])&&l[0]===H)d=l[1];else for(;(u=++f&&u&&u[g]||(d=f=0)||p.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(y&&((u[R]||(u[R]={}))[t]=[H,d]),u!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var o,r=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(n):r.length>1?(o=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),a=o.length;a--;)i=ee.call(t,o[a]),t[i]=!(e[i]=o[a])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=C(t.replace(ce,"$1"));return o[R]?i(function(t,e,n,i){for(var r,a=o(t,null,i,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:i(function(t){return fe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_e,xe).toLowerCase(),function(e){var n;do if(n=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})x.pseudos[w]=c(w);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,S=e.tokenize=function(t,n){var i,o,r,a,s,c,l,h=q[t+" "];if(h)return n?0:h.slice(0);for(s=t,c=[],l=x.preFilter;s;){(!i||(o=le.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),c.push(r=[])),i=!1,(o=he.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(ce," ")}),s=s.slice(i.length));for(a in x.filter)!(o=pe[a].exec(s))||l[a]&&!(o=l[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):q(t,c).slice(0)},C=e.compile=function(t,e){var n,i=[],o=[],r=G[t+" "];if(!r){for(e||(e=S(t)),n=e.length;n--;)r=y(e[n]),r[R]?i.push(r):o.push(r);r=G(t,b(o,i)),r.selector=t}return r},$=e.select=function(t,e,n,i){var o,r,a,s,c,l="function"==typeof t&&t,u=!i&&S(t=l.selector||t);if(n=n||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&_.getById&&9===e.nodeType&&E&&x.relative[r[1].type]){if(e=(x.find.ID(a.matches[0].replace(_e,xe),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=pe.needsContext.test(t)?0:r.length;o--&&(a=r[o],!x.relative[s=a.type]);)if((c=x.find[s])&&(i=c(a.matches[0].replace(_e,xe),be.test(r[0].type)&&h(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&d(r),!t)return Z.apply(n,i),n;break}}return(l||C(t,u))(i,e,!E,n,be.test(t)&&h(e.parentNode)||e),n},_.sortStable=R.split("").sort(U).join("")===R,_.detectDuplicates=!!I,D(),_.sortDetached=o(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);oe.find=le,oe.expr=le.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=le.uniqueSort,oe.text=le.getText,oe.isXMLDoc=le.isXML,oe.contains=le.contains;var he=oe.expr.match.needsContext,ue=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;o>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;o>e;e++)oe.find(t,i[e],n);return n=this.pushStack(o>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&he.test(t)?oe(t):t||[],!1).length}});var fe,pe=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=oe.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||fe).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:pe,!0)),ue.test(n[1])&&oe.isPlainObject(e))for(n in e)oe.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=pe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return fe.find(t);this.length=1,this[0]=i}return this.context=pe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof fe.ready?fe.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};me.prototype=oe.fn,fe=oe(pe);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!oe(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),oe.fn.extend({has:function(t){var e,n=oe(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(oe.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],a=he.test(t)||"string"!=typeof t?oe(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?oe.unique(r):r)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var o=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(ye[t]||(o=oe.unique(o)),ve.test(t)&&(o=o.reverse())),this.pushStack(o)}});var be=/\S+/g,we={};oe.Callbacks=function(t){t="string"==typeof t?we[t]||r(t):oe.extend({},t);var e,n,i,o,a,s,c=[],l=!t.once&&[],h=function(r){for(n=t.memory&&r,i=!0,a=s||0,s=0,o=c.length,e=!0;c&&o>a;a++)if(c[a].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,c&&(l?l.length&&h(l.shift()):n?c=[]:u.disable())},u={add:function(){if(c){var i=c.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&u.has(n)||c.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),e?o=c.length:n&&(s=i,h(n))}return this},remove:function(){return c&&oe.each(arguments,function(t,n){for(var i;(i=oe.inArray(n,c,i))>-1;)c.splice(i,1),e&&(o>=i&&o--,a>=i&&a--)}),this},has:function(t){return t?oe.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||u.disable(),this},locked:function(){return!l},fireWith:function(t,n){return!c||i&&!l||(n=n||[],n=[t,n.slice?n.slice():n],e?l.push(n):h(n)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,r){var a=oe.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},o={};return i.pipe=i.then,oe.each(e,function(t,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=Y.call(arguments),a=r.length,s=1!==a||t&&oe.isFunction(t.promise)?a:0,c=1===s?t:oe.Deferred(),l=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?Y.call(arguments):o,i===e?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)r[o]&&oe.isFunction(r[o].promise)?r[o].promise().done(l(o,i,r)).fail(c.reject).progress(l(o,n,e)):--s;return s||c.resolveWith(i,r),c.promise()}});var _e;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!pe.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(_e.resolveWith(pe,[oe]),oe.fn.triggerHandler&&(oe(pe).triggerHandler("ready"),oe(pe).off("ready")))}}}),oe.ready.promise=function(e){if(!_e)if(_e=oe.Deferred(),"complete"===pe.readyState)setTimeout(oe.ready);else if(pe.addEventListener)pe.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1);else{pe.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&pe.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!oe.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}a(),oe.ready()}}()}return _e.promise(e)};var xe,ke="undefined";for(xe in oe(ne))break;ne.ownLast="0"!==xe,ne.inlineBlockNeedsLayout=!1,oe(function(){var t,e,n,i;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==ke&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=pe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!l(t)},data:function(t,e,n){return h(t,e,n)},removeData:function(t,e){return u(t,e)},_data:function(t,e,n){return h(t,e,n,!0)},_removeData:function(t,e){return u(t,e,!0)}}),oe.fn.extend({data:function(t,e){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=oe.data(r),1===r.nodeType&&!oe._data(r,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),c(r,i,o[i])));oe._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):r?c(r,t,oe.data(r,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=oe._data(t,e),n&&(!i||oe.isArray(n)?i=oe._data(t,e,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,o=n.shift(),r=oe._queueHooks(t,e),a=function(){oe.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?oe.queue(this[0],t):void 0===e?this:this.each(function(){var n=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=oe.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=oe._data(r[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$e=["Top","Right","Bottom","Left"],Pe=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},Ne=oe.access=function(t,e,n,i,o,r,a){var s=0,c=t.length,l=null==n;if("object"===oe.type(n)){o=!0;for(s in n)oe.access(t,e,s,n[s],!0,r,a)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(a=!0),l&&(a?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(oe(t),n)})),e))for(;c>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:l?e.call(t):c?e(t[0],n):r},Ie=/^(?:checkbox|radio)$/i;!function(){var t=pe.createElement("input"),e=pe.createElement("div"),n=pe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==pe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(i){ne.deleteExpando=!1}}}(),function(){var e,n,i=pe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ne[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var De=/^(?:input|select|textarea)$/i,Ae=/^key/,Me=/^(?:mouse|pointer|contextmenu)|click/,Ee=/^(?:focusinfocus|focusoutblur)$/,Ke=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,n,i,o){var r,a,s,c,l,h,u,d,f,p,g,m=oe._data(t);if(m){for(n.handler&&(c=n,n=c.handler,o=c.selector),n.guid||(n.guid=oe.guid++),(a=m.events)||(a=m.events={}),(h=m.handle)||(h=m.handle=function(t){return typeof oe===ke||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(be)||[""],s=e.length;s--;)r=Ke.exec(e[s])||[],f=g=r[1],p=(r[2]||"").split(".").sort(),f&&(l=oe.event.special[f]||{},f=(o?l.delegateType:l.bindType)||f,l=oe.event.special[f]||{},u=oe.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:p.join(".")},c),(d=a[f])||(d=a[f]=[],d.delegateCount=0,l.setup&&l.setup.call(t,i,p,h)!==!1||(t.addEventListener?t.addEventListener(f,h,!1):t.attachEvent&&t.attachEvent("on"+f,h))),l.add&&(l.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),oe.event.global[f]=!0);t=null}},remove:function(t,e,n,i,o){var r,a,s,c,l,h,u,d,f,p,g,m=oe.hasData(t)&&oe._data(t);if(m&&(h=m.events)){for(e=(e||"").match(be)||[""],l=e.length;l--;)if(s=Ke.exec(e[l])||[],f=g=s[1],p=(s[2]||"").split(".").sort(),f){for(u=oe.event.special[f]||{},f=(i?u.delegateType:u.bindType)||f,d=h[f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=r=d.length;r--;)a=d[r],!o&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(d.splice(r,1),a.selector&&d.delegateCount--,u.remove&&u.remove.call(t,a));c&&!d.length&&(u.teardown&&u.teardown.call(t,p,m.handle)!==!1||oe.removeEvent(t,f,m.handle),delete h[f])}else for(f in h)oe.event.remove(t,f+e[l],n,i,!0);oe.isEmptyObject(h)&&(delete m.handle,oe._removeData(t,"events"))}},trigger:function(e,n,i,o){var r,a,s,c,l,h,u,d=[i||pe],f=ee.call(e,"type")?e.type:e,p=ee.call(e,"namespace")?e.namespace.split("."):[];if(s=h=i=i||pe,3!==i.nodeType&&8!==i.nodeType&&!Ee.test(f+oe.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),a=f.indexOf(":")<0&&"on"+f,e=e[oe.expando]?e:new oe.Event(f,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:oe.makeArray(n,[e]),l=oe.event.special[f]||{},o||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!o&&!l.noBubble&&!oe.isWindow(i)){for(c=l.delegateType||f,Ee.test(c+f)||(s=s.parentNode);s;s=s.parentNode)d.push(s),h=s;
h===(i.ownerDocument||pe)&&d.push(h.defaultView||h.parentWindow||t)}for(u=0;(s=d[u++])&&!e.isPropagationStopped();)e.type=u>1?c:l.bindType||f,r=(oe._data(s,"events")||{})[e.type]&&oe._data(s,"handle"),r&&r.apply(s,n),r=a&&s[a],r&&r.apply&&oe.acceptData(s)&&(e.result=r.apply(s,n),e.result===!1&&e.preventDefault());if(e.type=f,!o&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&oe.acceptData(i)&&a&&i[f]&&!oe.isWindow(i)){h=i[a],h&&(i[a]=null),oe.event.triggered=f;try{i[f]()}catch(g){}oe.event.triggered=void 0,h&&(i[a]=h)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,n,i,o,r,a=[],s=Y.call(arguments),c=(oe._data(this,"events")||{})[t.type]||[],l=oe.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,c),e=0;(o=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,a=[],s=e.delegateCount,c=t.target;if(s&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==t.type)){for(o=[],r=0;s>r;r++)i=e[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?oe(n,this).index(c)>=0:oe.find(n,this,null,[c]).length),o[n]&&o.push(i);o.length&&a.push({elem:c,handlers:o})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[oe.expando])return t;var e,n,i,o=t.type,r=t,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Me.test(o)?this.mouseHooks:Ae.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new oe.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||pe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||pe,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(o,null,e):oe.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=pe.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===ke&&(t[i]=null),t.detachEvent(i,n))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:f):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!oe.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return De.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;De.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!De.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=oe._data(i,e);o||i.addEventListener(t,n,!0),oe._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=oe._data(i,e)-1;o?oe._data(i,e,o):(i.removeEventListener(t,n,!0),oe._removeData(i,e))}}}),oe.fn.extend({on:function(t,e,n,i,o){var r,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=f;else if(!i)return this;return 1===o&&(a=i,i=function(t){return oe().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=f),this.each(function(){oe.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Le="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",je=/ jQuery\d+="(?:null|\d+)"/g,Fe=new RegExp("<(?:"+Le+")[\\s/>]","i"),Re=/^\s+/,Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Be=/<tbody/i,We=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,Ge=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^$|\/(?:java|ecma)script/i,ze=/^true\/(.*)/,Xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Je=g(pe),Ve=Je.appendChild(pe.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,oe.extend({clone:function(t,e,n){var i,o,r,a,s,c=oe.contains(t.ownerDocument,t);if(ne.html5Clone||oe.isXMLDoc(t)||!Fe.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Ve.innerHTML=t.outerHTML,Ve.removeChild(r=Ve.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(i=m(r),s=m(t),a=0;null!=(o=s[a]);++a)i[a]&&k(o,i[a]);if(e)if(n)for(s=s||m(t),i=i||m(r),a=0;null!=(o=s[a]);a++)x(o,i[a]);else x(t,r);return i=m(r,"script"),i.length>0&&_(i,!c&&m(t,"script")),i=s=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,a,s,c,l,h,u=t.length,d=g(e),f=[],p=0;u>p;p++)if(r=t[p],r||0===r)if("object"===oe.type(r))oe.merge(f,r.nodeType?[r]:r);else if(We.test(r)){for(s=s||d.appendChild(e.createElement("div")),c=(He.exec(r)||["",""])[1].toLowerCase(),h=Ye[c]||Ye._default,s.innerHTML=h[1]+r.replace(Oe,"<$1></$2>")+h[2],o=h[0];o--;)s=s.lastChild;if(!ne.leadingWhitespace&&Re.test(r)&&f.push(e.createTextNode(Re.exec(r)[0])),!ne.tbody)for(r="table"!==c||Be.test(r)?"<table>"!==h[1]||Be.test(r)?0:s:s.firstChild,o=r&&r.childNodes.length;o--;)oe.nodeName(l=r.childNodes[o],"tbody")&&!l.childNodes.length&&r.removeChild(l);for(oe.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else f.push(e.createTextNode(r));for(s&&d.removeChild(s),ne.appendChecked||oe.grep(m(f,"input"),v),p=0;r=f[p++];)if((!i||-1===oe.inArray(r,i))&&(a=oe.contains(r.ownerDocument,r),s=m(d.appendChild(r),"script"),a&&_(s),n))for(o=0;r=s[o++];)Ue.test(r.type||"")&&n.push(r);return s=null,d},cleanData:function(t,e){for(var n,i,o,r,a=0,s=oe.expando,c=oe.cache,l=ne.deleteExpando,h=oe.event.special;null!=(n=t[a]);a++)if((e||oe.acceptData(n))&&(o=n[s],r=o&&c[o])){if(r.events)for(i in r.events)h[i]?oe.event.remove(n,i):oe.removeEvent(n,i,r.handle);c[o]&&(delete c[o],l?delete n[s]:typeof n.removeAttribute!==ke?n.removeAttribute(s):n[s]=null,X.push(o))}}}),oe.fn.extend({text:function(t){return Ne(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&_(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return Ne(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(je,""):void 0;if(!("string"!=typeof t||qe.test(t)||!ne.htmlSerialize&&Fe.test(t)||!ne.leadingWhitespace&&Re.test(t)||Ye[(He.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Oe,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(oe.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=J.apply([],t);var n,i,o,r,a,s,c=0,l=this.length,h=this,u=l-1,d=t[0],f=oe.isFunction(d);if(f||l>1&&"string"==typeof d&&!ne.checkClone&&Ge.test(d))return this.each(function(n){var i=h.eq(n);f&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(l&&(s=oe.buildFragment(t,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(r=oe.map(m(s,"script"),b),o=r.length;l>c;c++)i=s,c!==u&&(i=oe.clone(i,!0,!0),o&&oe.merge(r,m(i,"script"))),e.call(this[c],i,c);if(o)for(a=r[r.length-1].ownerDocument,oe.map(r,w),c=0;o>c;c++)i=r[c],Ue.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(a,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xe,"")));s=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=0,o=[],r=oe(t),a=r.length-1;a>=i;i++)n=i===a?this:this.clone(!0),oe(r[i])[e](n),V.apply(o,n.get());return this.pushStack(o)}});var Qe,Ze={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=pe.getElementsByTagName("body")[0],n&&n.style?(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==ke&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(pe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var tn,en,nn=/^margin/,on=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),rn=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},en=function(t,e,n){var i,o,r,a,s=t.style;return n=n||tn(t),a=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||oe.contains(t.ownerDocument,t)||(a=oe.style(t,e)),on.test(a)&&nn.test(e)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0===a?a:a+""}):pe.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var i,o,r,a,s=t.style;return n=n||tn(t),a=n?n[e]:void 0,null==a&&s&&s[e]&&(a=s[e]),on.test(a)&&!rn.test(e)&&(i=s.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,r&&(o.left=r)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,n,i,o;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=a=!1,c=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,a="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(pe.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",c=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===o[0].offsetHeight,s&&(o[0].style.display="",o[1].style.display="none",s=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,a,s,c;n=pe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,oe.extend(ne,{reliableHiddenOffsets:function(){return null==s&&e(),s},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==c&&e(),c}}))}(),oe.swap=function(t,e,n,i){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=a[r];return o};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,cn=/^(none|table(?!-c[ea]).+)/,ln=new RegExp("^("+Ce+")(.*)$","i"),hn=new RegExp("^([+-])=("+Ce+")","i"),un={position:"absolute",visibility:"hidden",display:"block"},dn={letterSpacing:"0",fontWeight:"400"},fn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=oe.camelCase(e),c=t.style;if(e=oe.cssProps[s]||(oe.cssProps[s]=$(c,s)),a=oe.cssHooks[e]||oe.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:c[e];if(r=typeof n,"string"===r&&(o=hn.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(oe.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||oe.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,i)))))try{c[e]=n}catch(l){}}},css:function(t,e,n,i){var o,r,a,s=oe.camelCase(e);return e=oe.cssProps[s]||(oe.cssProps[s]=$(t.style,s)),a=oe.cssHooks[e]||oe.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=en(t,e,i)),"normal"===r&&e in dn&&(r=dn[e]),""===n||n?(o=parseFloat(r),n===!0||oe.isNumeric(o)?o||0:r):r}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,i){return n?cn.test(oe.css(t,"display"))&&0===t.offsetWidth?oe.swap(t,un,function(){return D(t,e,i)}):D(t,e,i):void 0},set:function(t,n,i){var o=i&&tn(t);return N(t,n,i?I(t,e,i,ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o),o):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(t,e){return sn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===oe.trim(r.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=an.test(r)?r.replace(an,o):r+" "+o)}}),oe.cssHooks.marginRight=C(ne.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+$e[i]+e]=r[i]||r[i-2]||r[0];return o}},nn.test(t)||(oe.cssHooks[t+e].set=N)}),oe.fn.extend({css:function(t,e){return Ne(this,function(t,e,n){var i,o,r={},a=0;if(oe.isArray(e)){for(i=tn(t),o=e.length;o>a;a++)r[e[a]]=oe.css(t,e[a],!1,i);return r}return void 0!==n?oe.style(t,e,n):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pe(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=A,A.prototype={constructor:A,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(oe.cssNumber[n]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,n=A.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=A.prototype.init,oe.fx.step={};var pn,gn,mn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),yn=/queueHooks$/,bn=[L],wn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=vn.exec(e),r=o&&o[3]||(oe.cssNumber[t]?"":"px"),a=(oe.cssNumber[t]||"px"!==r&&+i)&&vn.exec(oe.css(n.elem,t)),s=1,c=20;if(a&&a[3]!==r){r=r||a[3],o=o||[],a=+i||1;do s=s||".5",a/=s,oe.style(n.elem,t,a+r);while(s!==(s=n.cur()/i)&&1!==s&&--c)}return o&&(a=n.start=+a||+i||0,n.unit=r,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};oe.Animation=oe.extend(F,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],wn[n]=wn[n]||[],wn[n].unshift(e)},prefilter:function(t,e){e?bn.unshift(t):bn.push(t)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=oe.isEmptyObject(t),r=oe.speed(e,n,i),a=function(){var e=F(this,oe.extend({},t),r);(o||oe._data(this,"finish"))&&e.stop(!0)};return a.finish=a,o||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=oe.timers,a=oe._data(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&yn.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=oe.timers,a=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(E(e,!0),t,i,o)}}),oe.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,n=0;for(pn=oe.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||oe.fx.stop(),pn=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){gn||(gn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(gn),gn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o;e=pe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=pe.createElement("select"),o=n.appendChild(pe.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=o.selected,ne.enctype=!!pe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!o.disabled,t=pe.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var _n=/\r/g;oe.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(_n,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.trim(oe.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,a=r?null:[],s=r?o+1:i.length,c=0>o?s:r?o:0;s>c;c++)if(n=i[c],!(!n.selected&&c!==o||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=oe.makeArray(e),a=o.length;a--;)if(i=o[a],oe.inArray(oe.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xn,kn,Tn=oe.expr.attrHandle,Sn=/^(?:checked|selected)$/i,Cn=ne.getSetAttribute,$n=ne.input;oe.fn.extend({attr:function(t,e){return Ne(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===ke?oe.prop(t,e,n):(1===r&&oe.isXMLDoc(t)||(e=e.toLowerCase(),i=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?kn:xn)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=oe.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void oe.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(be);if(r&&1===t.nodeType)for(;n=r[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?$n&&Cn||!Sn.test(n)?t[i]=!1:t[oe.camelCase("default-"+n)]=t[i]=!1:oe.attr(t,n,""),t.removeAttribute(Cn?n:i)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),kn={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):$n&&Cn||!Sn.test(n)?t.setAttribute(!Cn&&oe.propFix[n]||n,n):t[oe.camelCase("default-"+n)]=t[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Tn[e]||oe.find.attr;Tn[e]=$n&&Cn||!Sn.test(e)?function(t,e,i){var o,r;return i||(r=Tn[e],Tn[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,Tn[e]=r),o}:function(t,e,n){return n?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),$n&&Cn||(oe.attrHooks.value={set:function(t,e,n){return oe.nodeName(t,"input")?void(t.defaultValue=e):xn&&xn.set(t,e,n)}}),Cn||(xn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},Tn.id=Tn.name=Tn.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:xn.set},oe.attrHooks.contenteditable={set:function(t,e,n){xn.set(t,""===e?!1:e,n)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Pn=/^(?:input|select|textarea|button|object)$/i,Nn=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return Ne(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!oe.isXMLDoc(t),r&&(e=oe.propFix[e]||e,o=oe.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):Pn.test(t.nodeName)||Nn.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var In=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,n,i,o,r,a,s=0,c=this.length,l="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(be)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(In," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=oe.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,o,r,a,s=0,c=this.length,l=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(be)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(In," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");a=t?oe.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=oe(this),r=t.match(be)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===ke||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")
})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(In," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Dn=oe.now(),An=/\?/,Mn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=oe.trim(e+"");return o&&!oe.trim(o.replace(Mn,function(t,e,o,r){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!r-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),n};var En,Kn,Ln=/#.*$/,jn=/([?&])_=[^&]*/,Fn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,On=/^(?:GET|HEAD)$/,Hn=/^\/\//,Bn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wn={},qn={},Gn="*/".concat("*");try{Kn=location.href}catch(Un){Kn=pe.createElement("a"),Kn.href="",Kn=Kn.href}En=Bn.exec(Kn.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Kn,type:"GET",isLocal:Rn.test(En[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,oe.ajaxSettings),e):H(oe.ajaxSettings,t)},ajaxPrefilter:R(Wn),ajaxTransport:R(qn),ajax:function(t,e){function n(t,e,n,i){var o,h,v,y,w,x=e;2!==b&&(b=2,s&&clearTimeout(s),l=void 0,a=i||"",_.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(y=B(u,_,n)),y=W(u,y,_,o),o?(u.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(oe.lastModified[r]=w),w=_.getResponseHeader("etag"),w&&(oe.etag[r]=w)),204===t||"HEAD"===u.type?x="nocontent":304===t?x="notmodified":(x=y.state,h=y.data,v=y.error,o=!v)):(v=x,(t||!x)&&(x="error",0>t&&(t=0))),_.status=t,_.statusText=(e||x)+"",o?p.resolveWith(d,[h,x,_]):p.rejectWith(d,[_,x,v]),_.statusCode(m),m=void 0,c&&f.trigger(o?"ajaxSuccess":"ajaxError",[_,u,o?h:v]),g.fireWith(d,[_,x]),c&&(f.trigger("ajaxComplete",[_,u]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,a,s,c,l,h,u=oe.ajaxSetup({},e),d=u.context||u,f=u.context&&(d.nodeType||d.jquery)?oe(d):oe.event,p=oe.Deferred(),g=oe.Callbacks("once memory"),m=u.statusCode||{},v={},y={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!h)for(h={};e=Fn.exec(a);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||w;return l&&l.abort(e),n(0,e),this}};if(p.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,u.url=((t||u.url||Kn)+"").replace(Ln,"").replace(Hn,En[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=oe.trim(u.dataType||"*").toLowerCase().match(be)||[""],null==u.crossDomain&&(i=Bn.exec(u.url.toLowerCase()),u.crossDomain=!(!i||i[1]===En[1]&&i[2]===En[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(En[3]||("http:"===En[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=oe.param(u.data,u.traditional)),O(Wn,u,e,_),2===b)return _;c=u.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!On.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(An.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=jn.test(r)?r.replace(jn,"$1_="+Dn++):r+(An.test(r)?"&":"?")+"_="+Dn++)),u.ifModified&&(oe.lastModified[r]&&_.setRequestHeader("If-Modified-Since",oe.lastModified[r]),oe.etag[r]&&_.setRequestHeader("If-None-Match",oe.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&_.setRequestHeader("Content-Type",u.contentType),_.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Gn+"; q=0.01":""):u.accepts["*"]);for(o in u.headers)_.setRequestHeader(o,u.headers[o]);if(u.beforeSend&&(u.beforeSend.call(d,_,u)===!1||2===b))return _.abort();w="abort";for(o in{success:1,error:1,complete:1})_[o](u[o]);if(l=O(qn,u,e,_)){_.readyState=1,c&&f.trigger("ajaxSend",[_,u]),u.async&&u.timeout>0&&(s=setTimeout(function(){_.abort("timeout")},u.timeout));try{b=1,l.send(v,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return _},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var zn=/%20/g,Xn=/\[\]$/,Yn=/\r?\n/g,Jn=/^(?:submit|button|image|reset|file)$/i,Vn=/^(?:input|select|textarea|keygen)/i;oe.param=function(t,e){var n,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(n in t)q(n,t[n],e,o);return i.join("&").replace(zn,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Vn.test(this.nodeName)&&!Jn.test(t)&&(this.checked||!Ie.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(Yn,"\r\n")}}):{name:e.name,value:n.replace(Yn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&G()||U()}:G;var Qn=0,Zn={},ti=oe.ajaxSettings.xhr();t.ActiveXObject&&oe(t).on("unload",function(){for(var t in Zn)Zn[t](void 0,!0)}),ne.cors=!!ti&&"withCredentials"in ti,ti=ne.ajax=!!ti,ti&&oe.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,i){var o,r=t.xhr(),a=++Qn;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var s,c,l;if(e&&(o||4===r.readyState))if(delete Zn[a],e=void 0,r.onreadystatechange=oe.noop,o)4!==r.readyState&&r.abort();else{l={},s=r.status,"string"==typeof r.responseText&&(l.text=r.responseText);try{c=r.statusText}catch(h){c=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&i(s,c,l,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Zn[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=pe.head||oe("head")[0]||pe.documentElement;return{send:function(i,o){e=pe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ni=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||oe.expando+"_"+Dn++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,a,s=e.jsonp!==!1&&(ni.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ni,"$1"+o):e.jsonp!==!1&&(e.url+=(An.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,ei.push(o)),a&&oe.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||pe;var i=ue.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var ii=oe.fn.load;oe.fn.load=function(t,e,n){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var i,o,r,a=this,s=t.indexOf(" ");return s>=0&&(i=oe.trim(t.slice(s,t.length)),t=t.slice(0,s)),oe.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&oe.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var oi=t.document.documentElement;oe.offset={setOffset:function(t,e,n){var i,o,r,a,s,c,l,h=oe.css(t,"position"),u=oe(t),d={};"static"===h&&(t.style.position="relative"),s=u.offset(),r=oe.css(t,"top"),c=oe.css(t,"left"),l=("absolute"===h||"fixed"===h)&&oe.inArray("auto",[r,c])>-1,l?(i=u.position(),a=i.top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(c)||0),oe.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+o),"using"in e?e.using.call(t,d):u.css(d)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return e=r.documentElement,oe.contains(e,o)?(typeof o.getBoundingClientRect!==ke&&(i=o.getBoundingClientRect()),n=z(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(n=t.offset()),n.top+=oe.css(t[0],"borderTopWidth",!0),n.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-oe.css(i,"marginTop",!0),left:e.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||oi;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||oi})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);oe.fn[t]=function(i){return Ne(this,function(t,i,o){var r=z(t);return void 0===o?r?e in r?r[e]:r.document.documentElement[i]:t[i]:void(r?r.scrollTo(n?oe(r).scrollLeft():o,n?o:oe(r).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=C(ne.pixelPosition,function(t,n){return n?(n=en(t,e),on.test(n)?oe(t).position()[e]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){oe.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||o===!0?"margin":"border");return Ne(this,function(e,n,i){var o;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?oe.css(e,n,a):oe.style(e,n,i,a)},e,r?i:void 0,r,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var ri=t.jQuery,ai=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=ai),e&&t.jQuery===oe&&(t.jQuery=ri),oe},typeof e===ke&&(t.jQuery=t.$=oe),oe}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var o=t.Event(n);return e.trigger(o,i),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var o,r,a,s,c,l,h,u;if(n.fire(i,"ajax:before")){if(s=i.data("cross-domain"),c=s===e?null:s,l=i.data("with-credentials")||null,h=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),r=i.attr("action"),a=i.serializeArray();var d=i.data("ujs:submit-button");d&&(a.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(o=i.data("method")||"get",r=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),a=i.data("params")||null);return u={type:o||"GET",data:a,dataType:h,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[t,o])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:c},l&&(u.xhrFields={withCredentials:l}),r&&(u.url=r),n.ajax(u)}return!1},handleMethod:function(i){var o=n.href(i),r=i.data("method"),a=i.attr("target"),s=t("meta[name=csrf-token]").attr("content"),c=t("meta[name=csrf-param]").attr("content"),l=t('<form method="post" action="'+o+'"></form>'),h='<input name="_method" value="'+r+'" type="hidden" />';c!==e&&s!==e&&(h+='<input name="'+c+'" value="'+s+'" type="hidden" />'),a&&l.attr("target",a),l.hide().append(h).appendTo("body"),l.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),o=!1;return i?(n.fire(t,"confirm")&&(o=n.confirm(i),e=n.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,n,i){var o,r,a=t(),s=n||"input,textarea",c=e.find(s);return c.each(function(){if(o=t(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!i){if(o.is("input[type=radio]")&&c.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;a=a.add(o)}}),a.length?a:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var o=t(this),r=o.data("method"),a=o.data("params"),s=i.metaKey||i.ctrlKey;if(!n.allowAction(o))return n.stopEverything(i);if(!s&&o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==e){if(s&&(!r||"GET"===r)&&!a)return!0;var c=n.handleRemote(o);return c===!1?n.enableElement(o):c.error(function(){n.enableElement(o)}),!1}return o.data("method")?(n.handleMethod(o),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var o=n.handleRemote(i);return o===!1?n.enableFormElement(i):o.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var o,r,a=t(this),s=a.data("remote")!==e;if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")==e&&(o=n.blankInputs(a,n.requiredInputSelector),o&&n.fire(a,"ajax:aborted:required",[o])))return n.stopEverything(i);if(s){if(r=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var c=n.fire(a,"ajax:aborted:file",[r]);return c||setTimeout(function(){n.enableFormElements(a)},13),c}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),/*!
 * jQuery UI Core 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function(t,e){function n(e,n){var o,r,a,s=e.nodeName.toLowerCase();return"area"===s?(o=e.parentNode,r=o.name,e.href&&r&&"map"===o.nodeName.toLowerCase()?(a=t("img[usemap=#"+r+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,o,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(e,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function o(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?s["inner"+i].call(this):this.each(function(){t(this).css(a,o(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?s["outer"+i].call(this,e):this.each(function(){t(this).css(a,o(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var o,r=t.ui[e].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(t,e,n){var i,o=t.plugins[e];if(o&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<o.length;i++)t.options[o[i][0]]&&o[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return e[i]>0?!0:(e[i]=1,o=e[i]>0,e[i]=0,o)}})}(jQuery),/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(t,e){var n=0,i=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}o(e)},t.widget=function(e,n,i){var o,r,a,s,c={},l=e.split(".")[0];e=e.split(".")[1],o=l+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[l]=t[l]||{},r=t[l][e],a=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(c[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(c[e]=i)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix:e},c,{constructor:a,namespace:l,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete r._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(n){for(var o,r,a=i.call(arguments,1),s=0,c=a.length;c>s;s++)for(o in a[s])r=a[s][o],a[s].hasOwnProperty(o)&&r!==e&&(n[o]=t.isPlainObject(r)?t.isPlainObject(n[o])?t.widget.extend({},n[o],r):t.widget.extend({},r):r);return n},t.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;t.fn[n]=function(a){var s="string"==typeof a,c=i.call(arguments,1),l=this;return a=!s&&c.length?t.widget.extend.apply(null,[a].concat(c)):a,this.each(s?function(){var i,o=t.data(this,r);return o?t.isFunction(o[a])&&"_"!==a.charAt(0)?(i=o[a].apply(o,c),i!==o&&i!==e?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+a+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,r);e?e.option(a||{})._init():t.data(this,r,new o(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var o,r,a,s=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(s={},o=n.split("."),n=o.shift(),o.length){for(r=s[n]=t.widget.extend({},this.options[n]),a=0;a<o.length-1;a++)r[o[a]]=r[o[a]]||{},r=r[o[a]];if(n=o.pop(),i===e)return r[n]===e?null:r[n];r[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,a){function s(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var c=i.match(/^(\w+)\s*(.*)$/),l=c[1]+r.eventNamespace,h=c[2];h?o.delegate(h,l,s):n.bind(l,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var o,r,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var a,s=o?o===!0||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),a=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),a&&t.effects&&t.effects.effect[s]?i[e](o):s!==e&&i[s]?i[s](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(jQuery),/*!
 * jQuery UI Mouse 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),/*!
 * jQuery UI Draggable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=t(o.containment),i=n[0],void(i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,o,r,a=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=e.pageX,l=e.pageY;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(c=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(c=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),a.grid&&(o=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-a.grid[1]:o+a.grid[1]:o,r=a.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,c=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-a.grid[0]:r+a.grid[0]:r)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),o=i.options,r=t.extend({},n,{item:i.element});i.sortables=[],t(o.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n){var i=t(this).data("ui-draggable"),o=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,n){var i=t(this).data("ui-draggable"),o=this;t.each(i.sortables,function(){var r=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),o=t(this).data("ui-draggable").options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,o=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?o=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(o=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?o=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(o=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,o,r,a,s,c,l,h,u,d,f=t(this).data("ui-draggable"),p=f.options,g=p.snapTolerance,m=n.offset.left,v=m+f.helperProportions.width,y=n.offset.top,b=y+f.helperProportions.height;for(u=f.snapElements.length-1;u>=0;u--)s=f.snapElements[u].left,c=s+f.snapElements[u].width,l=f.snapElements[u].top,h=l+f.snapElements[u].height,s-g>v||m>c+g||l-g>b||y>h+g||!t.contains(f.snapElements[u].item.ownerDocument,f.snapElements[u].item)?(f.snapElements[u].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[u].item})),f.snapElements[u].snapping=!1):("inner"!==p.snapMode&&(i=Math.abs(l-b)<=g,o=Math.abs(h-y)<=g,r=Math.abs(s-v)<=g,a=Math.abs(c-m)<=g,i&&(n.position.top=f._convertPositionTo("relative",{top:l-f.helperProportions.height,left:0}).top-f.margins.top),o&&(n.position.top=f._convertPositionTo("relative",{top:h,left:0}).top-f.margins.top),r&&(n.position.left=f._convertPositionTo("relative",{top:0,left:s-f.helperProportions.width}).left-f.margins.left),a&&(n.position.left=f._convertPositionTo("relative",{top:0,left:c}).left-f.margins.left)),d=i||o||r||a,"outer"!==p.snapMode&&(i=Math.abs(l-y)<=g,o=Math.abs(h-b)<=g,r=Math.abs(s-m)<=g,a=Math.abs(c-v)<=g,i&&(n.position.top=f._convertPositionTo("relative",{top:l,left:0}).top-f.margins.top),o&&(n.position.top=f._convertPositionTo("relative",{top:h-f.helperProportions.height,left:0}).top-f.margins.top),r&&(n.position.left=f._convertPositionTo("relative",{top:0,left:s}).left-f.margins.left),a&&(n.position.left=f._convertPositionTo("relative",{top:0,left:c-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[u].snapping&&(i||o||r||a||d)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[u].item})),f.snapElements[u].snapping=i||o||r||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),o=t(this).data("ui-draggable").options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),/*!
 * jQuery UI Droppable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
function(t){function e(t,e,n){return t>e&&e+n>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,n=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,n=t.ui.ddmanager.droppables[this.options.scope];e<n.length;e++)n[e]===this&&n.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){"accept"===e&&(this.accept=t.isFunction(n)?n:function(t){return t.is(n)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,o=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&t.ui.intersect(i,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,n,i){if(!n.offset)return!1;var o,r,a=(t.positionAbs||t.position.absolute).left,s=a+t.helperProportions.width,c=(t.positionAbs||t.position.absolute).top,l=c+t.helperProportions.height,h=n.offset.left,u=h+n.proportions.width,d=n.offset.top,f=d+n.proportions.height;switch(i){case"fit":return a>=h&&u>=s&&c>=d&&f>=l;case"intersect":return h<a+t.helperProportions.width/2&&s-t.helperProportions.width/2<u&&d<c+t.helperProportions.height/2&&l-t.helperProportions.height/2<f;case"pointer":return o=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,r=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(r,d,n.proportions.height)&&e(o,h,n.proportions.width);case"touch":return(c>=d&&f>=c||l>=d&&f>=l||d>c&&l>f)&&(a>=h&&u>=a||s>=h&&u>=s||h>a&&s>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var i,o,r=t.ui.ddmanager.droppables[e.options.scope]||[],a=n?n.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<r.length;i++)if(!(r[i].options.disabled||e&&!r[i].accept.call(r[i].element[0],e.currentItem||e.element))){for(o=0;o<s.length;o++)if(s[o]===r[i].element[0]){r[i].proportions.height=0;continue t}r[i].visible="none"!==r[i].element.css("display"),r[i].visible&&("mousedown"===a&&r[i]._activate.call(r[i],n),r[i].offset=r[i].element.offset(),r[i].proportions={width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight})}},drop:function(e,n){var i=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,o,r,a=t.ui.intersect(e,this,this.options.tolerance),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===o}),r.length&&(i=t.data(r[0],"ui-droppable"),i.greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}}}(jQuery),/*
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,i=t.ui.mouse.prototype,o=i._mouseInit;i._touchStart=function(t){var i=this;!n&&i._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},i._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},i._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},i._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),o.call(e)}}}(jQuery),function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,r=Function.prototype,a=i.push,s=i.slice,c=i.concat,l=o.toString,h=o.hasOwnProperty,u=i.forEach,d=i.map,f=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,_=Object.keys,x=r.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.4";var T=k.each=k.forEach=function(t,e,i){if(null!=t)if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,r=t.length;r>o;o++)if(e.call(i,t[o],o,t)===n)return}else for(var a in t)if(k.has(t,a)&&e.call(i,t[a],a,t)===n)return};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(T(t,function(t,o,r){i[i.length]=e.call(n,t,o,r)}),i)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=k.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(T(t,function(t,r,a){o?n=e.call(i,n,t,r,a):(n=t,o=!0)}),!o)throw new TypeError(S);return n},k.reduceRight=k.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=k.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var a=k.keys(t);r=a.length}if(T(t,function(s,c,l){c=a?a[--r]:--r,o?n=e.call(i,n,t[c],c,l):(n=t[c],o=!0)}),!o)throw new TypeError(S);return n},k.find=k.detect=function(t,e,n){var i;return C(t,function(t,o,r){return e.call(n,t,o,r)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(T(t,function(t,o,r){e.call(n,t,o,r)&&(i[i.length]=t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,i):(T(t,function(t,r,a){return(o=o&&e.call(i,t,r,a))?void 0:n}),!!o)};var C=k.some=k.any=function(t,e,i){e||(e=k.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(T(t,function(t,r,a){return o||(o=e.call(i,t,r,a))?n:void 0}),!!o)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):C(t,function(t){return t===e})},k.invoke=function(t,e){var n=s.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e,n){return k.isEmpty(e)?n?null:[]:k[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},k.findWhere=function(t,e){return k.where(t,e,!0)},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return T(t,function(t,o,r){var a=e?e.call(n,t,o,r):t;a>=i.computed&&(i={value:t,computed:a})}),i.value},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return T(t,function(t,o,r){var a=e?e.call(n,t,o,r):t;i.computed>a&&(i={value:t,computed:a})}),i.value},k.shuffle=function(t){var e,n=0,i=[];return T(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i};var $=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,n){var i=$(e);return k.pluck(k.map(t,function(t,e,o){return{value:t,index:e,criteria:i.call(n,t,e,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var P=function(t,e,n,i){var o={},r=$(e||k.identity);return T(t,function(e,a){var s=r.call(n,e,a,t);i(o,s,e)}),o};k.groupBy=function(t,e,n){return P(t,e,n,function(t,e,n){(k.has(t,e)?t[e]:t[e]=[]).push(n)})},k.countBy=function(t,e,n){return P(t,e,n,function(t,e){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,n,i){n=null==n?k.identity:$(n);for(var o=n.call(i,e),r=0,a=t.length;a>r;){var s=r+a>>>1;o>n.call(i,t[s])?r=s+1:a=s}return r},k.toArray=function(t){return t?k.isArray(t)?s.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:s.call(t,0,e)},k.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var N=function(t,e,n){return T(t,function(t){k.isArray(t)?e?a.apply(n,t):N(t,e,n):n.push(t)}),n};k.flatten=function(t,e){return N(t,e,[])},k.without=function(t){return k.difference(t,s.call(arguments,1))},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var o=n?k.map(t,n,i):t,r=[],a=[];return T(o,function(n,i){(e?i&&a[a.length-1]===n:k.contains(a,n))||(a.push(n),r.push(t[i]))}),r},k.union=function(){return k.uniq(c.apply(i,arguments))},k.intersection=function(t){var e=s.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=c.apply(i,s.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=s.call(arguments),e=k.max(k.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=k.pluck(t,""+i);return n},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;o>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},k.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,r=Array(i);i>o;)r[o++]=t,t+=n;return r},k.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,s.call(arguments,1));var n=s.call(arguments,2);return function(){return t.apply(e,n.concat(s.call(arguments)))}},k.partial=function(t){var e=s.call(arguments,1);return function(){return t.apply(this,e.concat(s.call(arguments)))}},k.bindAll=function(t){var e=s.call(arguments,1);return 0===e.length&&(e=k.functions(t)),T(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(s.call(arguments,1)))},k.throttle=function(t,e){var n,i,o,r,a=0,s=function(){a=new Date,o=null,r=t.apply(n,i)};return function(){var c=new Date,l=e-(c-a);return n=this,i=arguments,0>=l?(clearTimeout(o),o=null,a=c,r=t.apply(n,i)):o||(o=setTimeout(s,l)),r}},k.debounce=function(t,e,n){var i,o;return function(){var r=this,a=arguments,s=function(){i=null,n||(o=t.apply(r,a))},c=n&&!i;return clearTimeout(i),i=setTimeout(s,e),c&&(o=t.apply(r,a)),o}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var n=[t];return a.apply(n,arguments),e.apply(this,n)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},k.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)k.has(t,n)&&(e[e.length]=n);return e},k.values=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push(t[n]);return e},k.pairs=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push([n,t[n]]);return e},k.invert=function(t){var e={};for(var n in t)k.has(t,n)&&(e[t[n]]=n);return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return T(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=c.apply(i,s.call(arguments,1));return T(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=c.apply(i,s.call(arguments,1));for(var o in t)k.contains(n,o)||(e[o]=t[o]);return e},k.defaults=function(t){return T(s.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var I=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var o=l.call(t);if(o!=l.call(e))return!1;switch(o){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;n.push(t),i.push(e);var a=0,s=!0;if("[object Array]"==o){if(a=t.length,s=a==e.length)for(;a--&&(s=I(t[a],e[a],n,i)););}else{var c=t.constructor,h=e.constructor;if(c!==h&&!(k.isFunction(c)&&c instanceof c&&k.isFunction(h)&&h instanceof h))return!1;for(var u in t)if(k.has(t,u)&&(a++,!(s=k.has(e,u)&&I(t[u],e[u],n,i))))break;if(s){for(u in e)if(k.has(e,u)&&!a--)break;s=!a}}return n.pop(),i.pop(),s};k.isEqual=function(t,e){return I(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==l.call(t)},k.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,n){for(var i=Array(t),o=0;t>o;o++)i[o]=e.call(n,o);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};D.unescape=k.invert(D.escape);var A={escape:RegExp("["+k.keys(D.escape).join("")+"]","g"),unescape:RegExp("("+k.keys(D.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(A[t],function(e){return D[t][e]})}}),k.result=function(t,e){if(null==t)return null;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){T(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),j.call(this,n.apply(k,t))}})};var M=0;k.uniqueId=function(t){var e=++M+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var o=RegExp([(n.escape||E).source,(n.interpolate||E).source,(n.evaluate||E).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(o,function(e,n,i,o,s){return a+=t.slice(r,s).replace(L,function(t){return"\\"+K[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(e)return i(e,k);var c=function(t){return i.call(this,t,k)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},k.chain=function(t){return k(t).chain()};var j=function(t){return this._chain?k(t).chain():t};k.mixin(k),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return j.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,a,s=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(r=c.length,n=0;r>n;n+=1)a[n]=str(n,c)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,c),o&&a.push(quote(i)+(gap?": ":":")+o));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(o=str(i,c),o&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var t,e=this,n=e.Backbone,i=[],o=i.push,r=i.slice,a=i.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var s=e._;s||"undefined"==typeof require||(s=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var c=t.Events={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var i=this,o=s.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,r,a,c,l,u,d;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:s.keys(this._events),c=0,l=a.length;l>c;c++)if(t=a[c],r=this._events[t]){if(this._events[t]=i=[],e||n)for(u=0,d=r.length;d>u;u++)o=r[u],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&u(n,e),i&&u(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var o=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var r in i)i[r].off(e,n,this),o&&delete this._listeners[r];return this}},l=/\s+/,h=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),a=0,s=r.length;s>a;a++)t[e].apply(t,[r[a]].concat(i));return!1}return!0},u=function(t,e){var n,i=-1,o=t.length,r=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a,s);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};s.each(d,function(t,e){c[e]=function(e,n,i){var o=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=s.uniqueId("l"));return o[r]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),c.bind=c.on,c.unbind=c.off,s.extend(t,c);var f=t.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=s.uniqueId("c"),this.attributes={},s.extend(this,s.pick(e,p)),e.parse&&(i=this.parse(i,e)||{}),(n=s.result(this,"defaults"))&&(i=s.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];s.extend(f.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,r,a,c,l,h,u;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;r=n.unset,c=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=s.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],s.isEqual(u[i],e)||a.push(i),s.isEqual(h[i],e)?delete this.changed[i]:this.changed[i]=e,r?delete u[i]:u[i]=e;if(!c){a.length&&(this._pending=!0);for(var d=0,f=a.length;f>d;d++)this.trigger("change:"+a[d],this,u[a[d]],n)}if(l)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)s.isEqual(i[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},j(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,o,r,a=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=s.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=s.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var c=this,l=n.success;return n.success=function(t){c.attributes=a;var e=c.parse(t,n);return n.wait&&(e=s.extend(i||{},e)),s.isObject(e)&&!c.set(e,n)?!1:(l&&l(c,t,n),void c.trigger("sync",c,t,n))},j(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=i),r=this.sync(o,this,n),i&&n.wait&&(this.attributes=a),r},destroy:function(t){t=t?s.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(o){(t.wait||e.isNew())&&i(),n&&n(e,o,t),e.isNew()||e.trigger("sync",e,o,t)},this.isNew())return t.success(),!1;j(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||L();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,s.extend(e||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];s.each(g,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),s[t].apply(s,e)}});var m=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};s.extend(m.prototype,c,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,s.defaults(e||{},y))},remove:function(t,e){t=s.isArray(t)?t.slice():[t],e||(e={});var n,i,o,r;for(n=0,i=t.length;i>n;n++)r=this.get(t[n]),r&&(delete this._byId[r.id],delete this._byId[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,e.silent||(e.index=o,r.trigger("remove",r,this,e)),this._removeReference(r));return this},set:function(t,e){e=s.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),s.isArray(t)||(t=t?[t]:[]);var n,i,r,c,l,h=e.at,u=this.comparator&&null==h&&e.sort!==!1,d=s.isString(this.comparator)?this.comparator:null,f=[],p=[],g={};for(n=0,i=t.length;i>n;n++)(r=this._prepareModel(t[n],e))&&((c=this.get(r))?(e.remove&&(g[c.cid]=!0),e.merge&&(c.set(r.attributes,e),u&&!l&&c.hasChanged(d)&&(l=!0))):e.add&&(f.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(n=0,i=this.length;i>n;++n)g[(r=this.models[n]).cid]||p.push(r);p.length&&this.remove(p,e)}if(f.length&&(u&&(l=!0),this.length+=f.length,null!=h?a.apply(this.models,[h,0].concat(f)):o.apply(this.models,f)),l&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=f.length;i>n;n++)(r=f[n]).trigger("add",r,this,e);return l&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return s.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=s.isFunction(e)?e:function(t){return t.get(e)};return s.sortedIndex(this.models,t,i,n)},pluck:function(t){return s.invoke(this.models,"get",t)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},j(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?s.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(o){e.wait&&n.add(t,e),i&&i(t,o,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(b,function(t){m.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),s[t].apply(s,e)}});var w=["groupBy","countBy","sortBy"];s.each(w,function(t){m.prototype[t]=function(e,n){var i=s.isFunction(e)?e:function(t){return t.get(e)};return s[t](this.models,i,n)}});var _=t.View=function(t){this.cid=s.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];s.extend(_.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(s.isFunction(n)||(n=this[t[e]]),n){var i=e.match(x),o=i[1],r=i[2];n=s.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=s.extend({},s.result(this,"options"),t)),s.extend(this,s.pick(t,k)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var e=s.extend({},s.result(this,"attributes"));this.id&&(e.id=s.result(this,"id")),this.className&&(e["class"]=s.result(this,"className"));var n=t.$("<"+s.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var o=T[e];s.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:o,dataType:"json"};if(i.url||(r.url=s.result(n,"url")||L()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",i.emulateJSON&&(r.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||i.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=t.ajax(s.extend(r,i));return n.trigger("request",n,c,i),c};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,P=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(S.prototype,c,{initialize:function(){},route:function(e,n,i){s.isRegExp(e)||(e=this._routeToRegExp(e)),s.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return t.history.route(e,function(r){var a=o._extractParameters(e,r);i&&i.apply(o,a),o.trigger.apply(o,["route:"+n].concat(a)),o.trigger("route",n,a),t.history.trigger("route",o,n,a)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var t,e=s.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(N,"\\$&").replace(C,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(P,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return s.map(n,function(t){return t?decodeURIComponent(t):null})}});var I=t.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,M=/msie [\w.]+/,E=/\/$/;I.started=!1,s.extend(I.prototype,c,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(E,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();
return t.replace(D,"")},start:function(e){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,o=M.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(A,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=s.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!I.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new I;var K=function(t,e){var n,i=this;n=t&&s.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},s.extend(n,i,e);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,t&&s.extend(n.prototype,t),n.__super__=i.prototype,n};f.extend=m.extend=S.extend=_.extend=I.extend=K;var L=function(){throw new Error('A "url" property or function must be specified')},j=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this),/*!
 *  howler.js v1.1.7
 *  howlerjs.com
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){var t={},e=null,n=!0,i=!1;if("undefined"!=typeof AudioContext?e=new AudioContext:"undefined"!=typeof webkitAudioContext?e=new webkitAudioContext:"undefined"!=typeof Audio?n=!1:(n=!1,i=!0),n){var o="undefined"==typeof e.createGain?e.createGainNode():e.createGain();o.gain.value=1,o.connect(e.destination)}var r=function(){this._volume=1,this._muted=!1,this.usingWebAudio=n,this._howls=[]};r.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t&&t>=0&&1>=t){e._volume=t,n&&(o.gain.value=t);for(var i in e._howls)if(e._howls.hasOwnProperty(i)&&e._howls[i]._webAudio===!1)for(var r=0;r<e._howls[i]._audioNode.length;r++)e._howls[i]._audioNode[r].volume=e._howls[i]._volume*e._volume;return e}return n?o.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e=this;e._muted=t,n&&(o.gain.value=t?0:e._volume);for(var i in e._howls)if(e._howls.hasOwnProperty(i)&&e._howls[i]._webAudio===!1)for(var r=0;r<e._howls[i]._audioNode.length;r++)e._howls[i]._audioNode[r].muted=t}};var a=new r,s=null;if(!i){s=new Audio;var c={mp3:!!s.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!s.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!s.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(s.canPlayType("audio/x-m4a;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),webm:!!s.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var l=function(t){var e=this;e._autoplay=t.autoplay||!1,e._buffer=t.buffer||!1,e._duration=t.duration||0,e._format=t.format||null,e._loop=t.loop||!1,e._loaded=!1,e._sprite=t.sprite||{},e._src=t.src||"",e._pos3d=t.pos3d||[0,0,-.5],e._volume=t.volume||1,e._urls=t.urls||[],e._onload=[t.onload||function(){}],e._onloaderror=[t.onloaderror||function(){}],e._onend=[t.onend||function(){}],e._onpause=[t.onpause||function(){}],e._onplay=[t.onplay||function(){}],e._onendTimer=[],e._webAudio=n&&!e._buffer,e._audioNode=[],e._webAudio&&e._setupAudioNode(),a._howls.push(e),e.load()};if(l.prototype={load:function(){var e=this,n=null;if(i)return void e.on("loaderror");for(var o={mp3:c.mp3,opus:c.opus,ogg:c.ogg,wav:c.wav,m4a:c.m4a,weba:c.webm},r=0;r<e._urls.length;r++){var s;if(e._format?s=e._format:(s=e._urls[r].toLowerCase().match(/.+\.([^?]+)(\?|$)/),s=s&&s.length>=2?s[1]:e._urls[r].toLowerCase().match(/data\:audio\/([^?]+);/)[1]),o[s]){n=e._urls[r];break}}if(!n)return void e.on("loaderror");if(e._src=n,e._webAudio)h(e,n);else{var l=new Audio;e._audioNode.push(l),l.src=n,l._pos=0,l.preload="auto",l.volume=a._muted?0:e._volume*a.volume(),t[n]=e;var u=function(){e._duration=l.duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),l.removeEventListener("canplaythrough",u,!1)};l.addEventListener("canplaythrough",u,!1),l.load()}return e},urls:function(t){var e=this;return t?(e._urls=t,e._loaded=!1,e.stop(),e.load(),e):e._urls},play:function(t,n){var i=this;return"function"==typeof t&&(n=t),t&&"function"!=typeof t||(t="_default"),i._loaded?i._sprite[t]?(i._inactiveNode(function(o){o._sprite=t;var r,s=o._pos>0?o._pos:i._sprite[t][0]/1e3,c=i._sprite[t][1]/1e3-o._pos,l=!(!i._loop&&!i._sprite[t][2]),h="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:h,sprite:t,loop:l};r=setTimeout(function(){!i._webAudio&&l&&i.stop(e.id,e.timer).play(t,e.id),i._webAudio&&!l&&(i._nodeById(e.id).paused=!0),i._webAudio||l||i.stop(e.id,e.timer),i.on("end",h)},1e3*c),i._onendTimer.push(r),e.timer=i._onendTimer[i._onendTimer.length-1]}(),i._webAudio)o.id=h,o.paused=!1,d(i,[l,s,c],h),i._playStart=e.currentTime,o.gain.value=i._volume,"undefined"==typeof o.bufferSource.start?o.bufferSource.noteGrainOn(0,s,c):o.bufferSource.start(0,s,c);else{if(4!==o.readyState)return i._clearEndTimer(r),function(){var e=i,r=t,a=n,s=o,c=function(){e.play(r,a),s.removeEventListener("canplaythrough",c,!1)};s.addEventListener("canplaythrough",c,!1)}(),i;o.id=h,o.currentTime=s,o.muted=a._muted,o.volume=i._volume*a.volume(),o.play()}return i.on("play"),"function"==typeof n&&n(h),i}),i):("function"==typeof n&&n(),i):(i.on("load",function(){i.play(t,n)}),i)},pause:function(t,n){var i=this;if(!i._loaded)return i.on("play",function(){i.pause(t)}),i;i._clearEndTimer(n||0);var o=t?i._nodeById(t):i._activeNode();if(o)if(i._webAudio){if(!o.bufferSource)return i;o.paused=!0,o._pos+=e.currentTime-i._playStart,"undefined"==typeof o.bufferSource.stop?o.bufferSource.noteOff(0):o.bufferSource.stop(0)}else o._pos=o.currentTime,o.pause();return i.on("pause"),i},stop:function(t,e){var n=this;if(!n._loaded)return n.on("play",function(){n.stop(t)}),n;n._clearEndTimer(e||0);var i=t?n._nodeById(t):n._activeNode();if(i)if(i._pos=0,n._webAudio){if(!i.bufferSource)return n;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause(),i.currentTime=0;return n},mute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.mute(t)}),e;var n=t?e._nodeById(t):e._activeNode();return n&&(e._webAudio?n.gain.value=0:n.volume=0),e},unmute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.unmute(t)}),e;var n=t?e._nodeById(t):e._activeNode();return n&&(e._webAudio?n.gain.value=e._volume:n.volume=e._volume),e},volume:function(t,e){var n=this;if(t=parseFloat(t),!n._loaded)return n.on("play",function(){n.volume(t,e)}),n;if(t>=0&&1>=t){n._volume=t;var i=e?n._nodeById(e):n._activeNode();return i&&(n._webAudio?i.gain.value=t:i.volume=t*a.volume()),n}return n._volume},loop:function(t){var e=this;return"boolean"==typeof t?(e._loop=t,e):e._loop},sprite:function(t){var e=this;return"object"==typeof t?(e._sprite=t,e):e._sprite},pos:function(t,n){var i=this;if(!i._loaded)return i.on("load",function(){i.pos(t)}),i;var o=n?i._nodeById(n):i._activeNode();return o?i._webAudio?t>=0?(o._pos=t,i.pause(n).play(o._sprite,n),i):o._pos+(e.currentTime-i._playStart):t>=0?(o.currentTime=t,i):o.currentTime:void 0},pos3d:function(t,e,n,i){var o=this;if(e="undefined"!=typeof e&&e?e:0,n="undefined"!=typeof n&&n?n:-.5,!o._loaded)return o.on("play",function(){o.pos3d(t,e,n,i)}),o;if(!(t>=0||0>t))return o._pos3d;if(o._webAudio){var r=i?o._nodeById(i):o._activeNode();r&&(o._pos3d=[t,e,n],r.panner.setPosition(t,e,n))}return o},fade:function(t,e,n,i,o){var r=this,a=Math.abs(t-e),s=t>e?"down":"up",c=a/.01,l=n/c;if(!r._loaded)return r.on("load",function(){r.fade(t,e,n,i,o)}),r;r.volume(t,o);for(var h=1;c>=h;h++)!function(){var t=r._volume+("up"===s?.01:-.01)*h,n=Math.round(1e3*t)/1e3,a=e;setTimeout(function(){r.volume(n,o),n===a&&i&&i()},l*h)}()},fadeIn:function(t,e,n){return this.volume(0).play().fade(0,t,e,n)},fadeOut:function(t,e,n,i){var o=this;return o.fade(o._volume,t,e,function(){n&&n(),o.pause(i),o.on("end")},i)},_nodeById:function(t){for(var e=this,n=e._audioNode[0],i=0;i<e._audioNode.length;i++)if(e._audioNode[i].id===t){n=e._audioNode[i];break}return n},_activeNode:function(){for(var t=this,e=null,n=0;n<t._audioNode.length;n++)if(!t._audioNode[n].paused){e=t._audioNode[n];break}return t._drainPool(),e},_inactiveNode:function(t){for(var e=this,n=null,i=0;i<e._audioNode.length;i++)if(e._audioNode[i].paused&&4===e._audioNode[i].readyState){t(e._audioNode[i]),n=!0;break}if(e._drainPool(),!n){var o;e._webAudio?(o=e._setupAudioNode(),t(o)):(e.load(),o=e._audioNode[e._audioNode.length-1],o.addEventListener("loadedmetadata",function(){t(o)}))}},_drainPool:function(){var t,e=this,n=0;for(t=0;t<e._audioNode.length;t++)e._audioNode[t].paused&&n++;for(t=e._audioNode.length-1;t>=0&&!(5>=n);t--)e._audioNode[t].paused&&(n--,e._audioNode.splice(t,1))},_clearEndTimer:function(t){var e=this,n=e._onendTimer.indexOf(t);n=n>=0?n:0,e._onendTimer[n]&&(clearTimeout(e._onendTimer[n]),e._onendTimer.splice(n,1))},_setupAudioNode:function(){var t=this,n=t._audioNode,i=t._audioNode.length;return n[i]="undefined"==typeof e.createGain?e.createGainNode():e.createGain(),n[i].gain.value=t._volume,n[i].paused=!0,n[i]._pos=0,n[i].readyState=4,n[i].connect(o),n[i].panner=e.createPanner(),n[i].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),n[i].panner.connect(n[i]),n[i]},on:function(t,e){var n=this,i=n["_on"+t];if("function"==typeof e)i.push(e);else for(var o=0;o<i.length;o++)e?i[o].call(n,e):i[o].call(n);return n},off:function(t,e){for(var n=this,i=n["_on"+t],o=e.toString(),r=0;r<i.length;r++)if(o===i[r].toString()){i.splice(r,1);break}return n}},n)var h=function(n,i){if(i in t)n._duration=t[i].duration,u(n);else{var o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType="arraybuffer",o.onload=function(){e.decodeAudioData(o.response,function(e){e&&(t[i]=e,u(n,e))})},o.onerror=function(){n._webAudio&&(n._buffer=!0,n._webAudio=!1,n._audioNode=[],delete n._gainNode,n.load())};try{o.send()}catch(r){o.onerror()}}},u=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},d=function(n,i,o){var r=n._nodeById(o);r.bufferSource=e.createBufferSource(),r.bufferSource.buffer=t[n._src],r.bufferSource.connect(r.panner),r.bufferSource.loop=i[0],i[0]&&(r.bufferSource.loopStart=i[1],r.bufferSource.loopEnd=i[1]+i[2])};"function"==typeof define&&define.amd?define("Howler",function(){return{Howler:a,Howl:l}}):(window.Howler=a,window.Howl=l)}();/*! KineticJS v4.5.4 2013-06-09 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/
var Kinetic={};!function(){Kinetic.version="4.5.4",Kinetic.Filters={},Kinetic.Node=function(t){this._nodeInit(t)},Kinetic.Shape=function(t){this._initShape(t)},Kinetic.Container=function(t){this._containerInit(t)},Kinetic.Stage=function(t){this._initStage(t)},Kinetic.Layer=function(t){this._initLayer(t)},Kinetic.Group=function(t){this._initGroup(t)},Kinetic.Global={stages:[],idCounter:0,ids:{},names:{},shapes:{},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var n=this.names[t];if(void 0!==n){for(var i=0;i<n.length;i++){var o=n[i];o._id===e&&n.splice(i,1)}0===n.length&&delete this.names[t]}}}}}(),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.returnExports=e()}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,n=0;for(this.length=e;e>n;n++)this[n]=t[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},Kinetic.Collection.mapMethods=function(t){var e,n=t.length;for(e=0;n>e;e++)!function(e){var n=t[e];Kinetic.Collection.prototype[n]=function(){var t,e=this.length;for(args=[].slice.call(arguments),t=0;e>t;t++)this[t][n].apply(this[t],args)}}(e)}}(),function(){Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},scale:function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,o=this.m[1]*e+this.m[3]*n,r=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;this.m[0]=i,this.m[1]=o,this.m[2]=r,this.m[3]=a},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=r},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=a},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,o=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=a},getMatrix:function(){return this.m}}}(),function(){var t="canvas",e="2d",n="[object Array]",i="[object Number]",o="[object String]",r=Math.PI/180,a=180/Math.PI,s="#",c="",l="0",h="Kinetic warning: ",u="rgb(",d={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},f=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==n},_isNumber:function(t){return Object.prototype.toString.call(t)==i},_isString:function(t){return Object.prototype.toString.call(t)==o},_hasMethods:function(t){var e,n=[];for(e in t)this._isFunction(t[e])&&n.push(e);return n.length>0},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_getXY:function(t){if(this._isNumber(t))return{x:t,y:t};if(this._isArray(t)){if(1===t.length){var e=t[0];if(this._isNumber(e))return{x:e,y:e};if(this._isArray(e))return{x:e[0],y:e[1]};if(this._isObject(e))return e}else if(t.length>=2)return{x:t[0],y:t[1]}}else if(this._isObject(t))return t;return null},_getSize:function(t){if(this._isNumber(t))return{width:t,height:t};if(this._isArray(t))if(1===t.length){var e=t[0];if(this._isNumber(e))return{width:e,height:e};if(this._isArray(e)){if(e.length>=4)return{width:e[2],height:e[3]};if(e.length>=2)return{width:e[0],height:e[1]}}else if(this._isObject(e))return e}else{if(t.length>=4)return{width:t[2],height:t[3]};if(t.length>=2)return{width:t[0],height:t[1]}}else if(this._isObject(t))return t;return null},_getPoints:function(t){var e,n,i=[];if(void 0===t)return[];if(n=t.length,this._isArray(t[0])){for(e=0;n>e;e++)i.push({x:t[e][0],y:t[e][1]});return i}if(this._isObject(t[0]))return t;for(e=0;n>e;e+=2)i.push({x:t[e],y:t[e+1]});return i},_getImage:function(n,i){var o,r,a,s;n?this._isElement(n)?i(n):this._isString(n)?(o=new Image,o.onload=function(){i(o)},o.src=n):n.data?(r=document.createElement(t),r.width=n.width,r.height=n.height,a=r.getContext(e),a.putImageData(n,0,0),s=r.toDataURL(),o=new Image,o.onload=function(){i(o)},o.src=s):i(null):i(null)},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(s,c);var e=parseInt(t,16);return{r:255&e>>16,g:255&e>>8,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=l+t;return s+t},getRGB:function(t){var e;return t in d?(e=d[t],{r:e[0],g:e[1],b:e[2]}):t[0]===s?this._hexToRgb(t.substring(1)):t.substr(0,4)===u?(e=f.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var n=this._clone(e);for(var i in t)n[i]=this._isObject(t[i])?this._merge(t[i],n[i]):t[i];return n},_clone:function(t){var e={};for(var n in t)e[n]=this._isObject(t[n])?this._clone(t[n]):t[n];return e},_degToRad:function(t){return t*r},_radToDeg:function(t){return t*a},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},warn:function(t){window.console&&console.warn&&console.warn(h+t)},extend:function(t,e){for(var n in e.prototype)n in t.prototype||(t.prototype[n]=e.prototype[n])},addMethods:function(t,e){var n;for(n in e)t.prototype[n]=e[n]},_getControlPoints:function(t,e,n,i){var o=t.x,r=t.y,a=e.x,s=e.y,c=n.x,l=n.y,h=Math.sqrt(Math.pow(a-o,2)+Math.pow(s-r,2)),u=Math.sqrt(Math.pow(c-a,2)+Math.pow(l-s,2)),d=i*h/(h+u),f=i*u/(h+u),p=a-d*(c-o),g=s-d*(l-r),m=a+f*(c-o),v=s+f*(l-r);return[{x:p,y:g},{x:m,y:v}]},_expandPoints:function(t,e){var n,i,o=t.length,r=[];for(n=1;o-1>n;n++)i=Kinetic.Util._getControlPoints(t[n-1],t[n],t[n+1],e),r.push(i[0]),r.push(t[n]),r.push(i[1]);return r}}}(),function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,o=n/i;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.width||0,n=t.height||0,i=t.pixelRatio||o,r=t.contextType||"2d";this.pixelRatio=i,this.element=document.createElement("canvas"),this.element.style.padding=0,this.element.style.margin=0,this.element.style.border=0,this.element.style.background="transparent",this.context=this.element.getContext(r),this.setSize(e,n)},getElement:function(){return this.element},getContext:function(){return this.context},setWidth:function(t){this.width=this.element.width=t*this.pixelRatio,this.element.style.width=t+"px"},setHeight:function(t){this.height=this.element.height=t*this.pixelRatio,this.element.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},clear:function(){var t=this.getContext();this.getElement(),t.clearRect(0,0,this.getWidth(),this.getHeight())},toDataURL:function(t,e){try{return this.element.toDataURL(t,e)}catch(n){try{return this.element.toDataURL()}catch(i){return Kinetic.Util.warn("Unable to get data URL. "+i.message),""}}},fill:function(t){t.getFillEnabled()&&this._fill(t)},stroke:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStroke:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t,t.hasShadow()&&t.hasFill()&&e)},applyShadow:function(t,e){var n=this.context;n.save(),this._applyShadow(t),e(),n.restore(),e()},_applyLineCap:function(t){var e=t.getLineCap();e&&(this.context.lineCap=e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&(this.context.globalAlpha=e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&(this.context.lineJoin=e)},_applyAncestorTransforms:function(t){var e,n,i=this.context;t._eachAncestorReverse(function(t){e=t.getTransform(!0),n=e.getMatrix(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5])},!0)},_clip:function(t){var e=this.getContext();e.save(),this._applyAncestorTransforms(t),e.beginPath(),t.getClipFunc()(this),e.clip(),e.setTransform(1,0,0,1,0,0)}},Kinetic.SceneCanvas=function(t){Kinetic.Canvas.call(this,t)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio;Kinetic.Canvas.prototype.setWidth.call(this,t),this.context.scale(e,e)},setHeight:function(t){var e=this.pixelRatio;Kinetic.Canvas.prototype.setHeight.call(this,t),this.context.scale(e,e)},_fillColor:function(t){var e=this.context,n=t.getFill();e.fillStyle=n,t._fillFunc(e)},_fillPattern:function(t){var e=this.context,n=t.getFillPatternImage(),i=t.getFillPatternX(),o=t.getFillPatternY(),r=t.getFillPatternScale(),a=t.getFillPatternRotation(),s=t.getFillPatternOffset(),c=t.getFillPatternRepeat();(i||o)&&e.translate(i||0,o||0),a&&e.rotate(a),r&&e.scale(r.x,r.y),s&&e.translate(-1*s.x,-1*s.y),e.fillStyle=e.createPattern(n,c||"repeat"),e.fill()},_fillLinearGradient:function(t){var e=this.context,n=t.getFillLinearGradientStartPoint(),i=t.getFillLinearGradientEndPoint(),o=t.getFillLinearGradientColorStops(),r=e.createLinearGradient(n.x,n.y,i.x,i.y);if(o){for(var a=0;a<o.length;a+=2)r.addColorStop(o[a],o[a+1]);e.fillStyle=r,e.fill()}},_fillRadialGradient:function(t){for(var e=this.context,n=t.getFillRadialGradientStartPoint(),i=t.getFillRadialGradientEndPoint(),o=t.getFillRadialGradientStartRadius(),r=t.getFillRadialGradientEndRadius(),a=t.getFillRadialGradientColorStops(),s=e.createRadialGradient(n.x,n.y,o,i.x,i.y,r),c=0;c<a.length;c+=2)s.addColorStop(a[c],a[c+1]);e.fillStyle=s,e.fill()},_fill:function(t,e){var n=this.context,i=t.getFill(),o=t.getFillPatternImage(),r=t.getFillLinearGradientColorStops(),a=t.getFillRadialGradientColorStops(),s=t.getFillPriority();n.save(),!e&&t.hasShadow()&&this._applyShadow(t),i&&"color"===s?this._fillColor(t):o&&"pattern"===s?this._fillPattern(t):r&&"linear-gradient"===s?this._fillLinearGradient(t):a&&"radial-gradient"===s?this._fillRadialGradient(t):i?this._fillColor(t):o?this._fillPattern(t):r?this._fillLinearGradient(t):a&&this._fillRadialGradient(t),n.restore(),!e&&t.hasShadow()&&this._fill(t,!0)},_stroke:function(t,e){var n=this.context,i=t.getStroke(),o=t.getStrokeWidth(),r=t.getDashArray();(i||o)&&(n.save(),t.getStrokeScaleEnabled()||n.setTransform(1,0,0,1,0,0),this._applyLineCap(t),r&&t.getDashArrayEnabled()&&(n.setLineDash?n.setLineDash(r):"mozDash"in n?n.mozDash=r:"webkitLineDash"in n&&(n.webkitLineDash=r)),!e&&t.hasShadow()&&this._applyShadow(t),n.lineWidth=o||2,n.strokeStyle=i||"black",t._strokeFunc(n),n.restore(),!e&&t.hasShadow()&&this._stroke(t,!0))},_applyShadow:function(t){var e=this.context;if(t.hasShadow()&&t.getShadowEnabled()){var n=t.getAbsoluteOpacity(),i=t.getShadowColor()||"black",o=t.getShadowBlur()||5,r=t.getShadowOffset()||{x:0,y:0};t.getShadowOpacity()&&(e.globalAlpha=t.getShadowOpacity()*n),e.shadowColor=i,e.shadowBlur=o,e.shadowOffsetX=r.x,e.shadowOffsetY=r.y}}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){Kinetic.Canvas.call(this,t)},Kinetic.HitCanvas.prototype={_fill:function(t){var e=this.context;e.save(),e.fillStyle=t.colorKey,t._fillFuncHit(e),e.restore()},_stroke:function(t){var e=this.context,n=t.getStroke(),i=t.getStrokeWidth();(n||i)&&(this._applyLineCap(t),e.save(),e.lineWidth=i||2,e.strokeStyle=t.colorKey,t._strokeFuncHit(e),e.restore())}},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t=" ",e="",n=".",i="get",o="set",r="Shape",a="Stage",s="X",c="Y",l="kinetic",h="before",u="Change",d="id",f="name",p="mouseenter",g="mouseleave",m="Deg",v="beforeDraw",y="draw",b="RGB",w="r",_="g",x="b",k="R",T="G",S="B",C="#",$="children";Kinetic.Util.addMethods(Kinetic.Node,{_nodeInit:function(t){this._id=Kinetic.Global.idCounter++,this.eventListeners={},this.setAttrs(t)},on:function(i,o){var r,a,s,c,l,h,u=i.split(t),d=u.length;for(r=0;d>r;r++)a=u[r],s=a,c=s.split(n),l=c[0],h=c.length>1?c[1]:e,this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:o});return this},off:function(e){var i,o,r,a,s,c,l=e.split(t),h=l.length;for(i=0;h>i;i++)if(o=l[i],a=o,s=a.split(n),c=s[0],s.length>1)if(c)this.eventListeners[c]&&this._off(c,s[1]);else for(r in this.eventListeners)this._off(r,s[1]);else delete this.eventListeners[c];return this},remove:function(){var t=this.getParent();return t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),delete this.parent),this},destroy:function(){var t=Kinetic.Global;t._removeId(this.getId()),t._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=i+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=o+Kinetic.Util._capitalize(e),i=this[n];return t.shift(),Kinetic.Util._isFunction(i)?i.apply(this,t):this.attrs[e]=t[0],this},getAttrs:function(){return this.attrs||{}},createAttrs:function(){return void 0===this.attrs&&(this.attrs={}),this},setAttrs:function(t){var e,n;if(t)for(e in t)e===$||(n=o+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]));return this},getVisible:function(){var t=this.attrs.visible,e=this.getParent();return void 0===t&&(t=!0),t&&e&&!e.getVisible()?!1:t},getListening:function(){var t=this.attrs.listening,e=this.getParent();return void 0===t&&(t=!0),t&&e&&!e.getListening()?!1:t},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(a){for(e=[],n=a.length,i=0;n>i;i++)o=a[i],l++,o.nodeType!==r&&(e=e.concat(o.getChildren().toArray())),o._id===c._id&&(i=n);e.length>0&&e[0].getLevel()<=s&&t(e)}var e,n,i,o,s=this.getLevel(),c=(this.getStage(),this),l=0;return c.nodeType!==a&&t(c.getStage().getChildren()),l},getLevel:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(){var t=Kinetic.Util._getXY([].slice.call(arguments));return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform(),e=this.getOffset();return t.translate(e.x,e.y),t.getTranslation()},setAbsolutePosition:function(){var t,e=Kinetic.Util._getXY([].slice.call(arguments)),n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,t=this.getAbsoluteTransform(),t.invert(),t.translate(e.x,e.y),e={x:this.attrs.x+t.getTranslation().x,y:this.attrs.y+t.getTranslation().y},this.setPosition(e.x,e.y),this._setTransform(n),this},move:function(){var t=Kinetic.Util._getXY([].slice.call(arguments)),e=this.getX(),n=this.getY();return void 0!==t.x&&(e+=t.x),void 0!==t.y&&(n+=t.y),this.setPosition(e,n),this},_eachAncestorReverse:function(t,e){var n,i,o=[],r=this.getParent();for(e&&o.unshift(this);r;)o.unshift(r),r=r.parent;for(n=o.length,i=0;n>i;i++)t(o[i])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},rotateDeg:function(t){return this.setRotation(this.getRotation()+Kinetic.Util._degToRad(t)),this},moveToTop:function(){var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,n=Kinetic.Util,i={},o=this.getAttrs();i.attrs={};for(t in o)e=o[t],n._isFunction(e)||n._isElement(e)||n._isObject(e)&&n._hasMethods(e)||(i.attrs[t]=e);return i.className=this.getClassName(),i},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){return this.getParent().getLayer()},getStage:function(){return this.getParent()?this.getParent().getStage():void 0},fire:function(t,e,n){return n?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(){var t,e=new Kinetic.Transform;return this._eachAncestorReverse(function(n){t=n.getTransform(),e.multiply(t)},!0),e},_getAndCacheTransform:function(){var t=new Kinetic.Transform,e=this.getX(),n=this.getY(),i=this.getRotation(),o=this.getScaleX(),r=this.getScaleY(),a=this.getSkewX(),s=this.getSkewY(),c=this.getOffsetX(),l=this.getOffsetY();return(0!==e||0!==n)&&t.translate(e,n),0!==i&&t.rotate(i),(0!==a||0!==s)&&t.skew(a,s),(1!==o||1!==r)&&t.scale(o,r),(0!==c||0!==l)&&t.translate(-1*c,-1*l),this.cachedTransform=t,t},getTransform:function(t){var e=this.cachedTransform;return t&&e?e:this._getAndCacheTransform()},clone:function(t){var e,n,i,o,r,a=this.getClassName(),s=new Kinetic[a](this.attrs);for(e in this.eventListeners)for(n=this.eventListeners[e],i=n.length,o=0;i>o;o++)r=n[o],r.name.indexOf(l)<0&&(s.eventListeners[e]||(s.eventListeners[e]=[]),s.eventListeners[e].push(r));return s.setAttrs(t),s},toDataURL:function(t){t=t||{};var e=t.mimeType||null,n=t.quality||null,i=this.getStage(),o=t.x||0,r=t.y||0,a=new Kinetic.SceneCanvas({width:t.width||i.getWidth(),height:t.height||i.getHeight(),pixelRatio:1}),s=a.getContext();return s.save(),(o||r)&&s.translate(-1*o,-1*r),this.drawScene(a),s.restore(),a.toDataURL(e,n)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(){var t=Kinetic.Util._getSize(Array.prototype.slice.call(arguments));return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var n,i=this.eventListeners[t];for(n=0;n<i.length;n++)if(i[n].name===e){if(i.splice(n,1),0===i.length){delete this.eventListeners[t];break}n--}},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t},_setTransform:function(t){var e;for(e in t)this.attrs[e]=t[e];this.cachedTransform=null},_fireBeforeChangeEvent:function(t,e,n){this._fire(h+Kinetic.Util._capitalize(t)+u,{oldVal:e,newVal:n})},_fireChangeEvent:function(t,e,n){this._fire(t+u,{oldVal:e,newVal:n})},setId:function(t){var e=this.getId(),n=(this.getStage(),Kinetic.Global);return n._removeId(e),n._addId(this,t),this._setAttr(d,t),this},setName:function(t){var e=this.getName(),n=(this.getStage(),Kinetic.Global);return n._removeName(e,this._id),n._addName(this,t),this._setAttr(f,t),this},_setAttr:function(t,e){var n;void 0!==e&&(n=this.attrs[t],this._fireBeforeChangeEvent(t,n,e),this.attrs[t]=e,this._fireChangeEvent(t,n,e))},_fireAndBubble:function(t,e,n){e&&this.nodeType===r&&(e.targetNode=this),this.getStage(),this.eventListeners;var i=!0;t===p&&n&&this._id===n._id?i=!1:t===g&&n&&this._id===n._id&&(i=!1),i&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var n,i,o=this.eventListeners[t];if(o)for(n=o.length,i=0;n>i;i++)o[i].handler.call(this,e)},draw:function(){var t={node:this};return this._fire(v,t),this.drawScene(),this.drawHit(),this._fire(y,t),this},shouldDrawHit:function(){return this.isVisible()&&this.isListening()&&!Kinetic.Global.isDragging()},isDraggable:function(){return!1}}),Kinetic.Node.setPoints=function(t){var e=Kinetic.Util._getPoints(t);this._setAttr("points",e)},Kinetic.Node.addGetterSetter=function(t,e,n,i){this.addGetter(t,e,n),this.addSetter(t,e,i)},Kinetic.Node.addPointGetterSetter=function(t,e,n,i){this.addPointGetter(t,e),this.addPointSetter(t,e),this.addGetter(t,e+s,n),this.addGetter(t,e+c,n),this.addSetter(t,e+s,i),this.addSetter(t,e+c,i)},Kinetic.Node.addPointsGetterSetter=function(t,e){this.addPointsGetter(t,e),this.addPointsSetter(t,e)},Kinetic.Node.addRotationGetterSetter=function(t,e,n,i){this.addRotationGetter(t,e,n),this.addRotationSetter(t,e,i)},Kinetic.Node.addColorGetterSetter=function(t,e){this.addGetter(t,e),this.addSetter(t,e),this.addColorRGBGetter(t,e),this.addColorComponentGetter(t,e,w),this.addColorComponentGetter(t,e,_),this.addColorComponentGetter(t,e,x),this.addColorRGBSetter(t,e),this.addColorComponentSetter(t,e,w),this.addColorComponentSetter(t,e,_),this.addColorComponentSetter(t,e,x)},Kinetic.Node.addColorRGBGetter=function(t,e){var n=i+Kinetic.Util._capitalize(e)+b;t.prototype[n]=function(){return Kinetic.Util.getRGB(this.attrs[e])}},Kinetic.Node.addColorComponentGetter=function(t,e,n){var o=i+Kinetic.Util._capitalize(e),r=o+Kinetic.Util._capitalize(n);t.prototype[r]=function(){return this[o+b]()[n]}},Kinetic.Node.addPointsGetter=function(t,e){var n=i+Kinetic.Util._capitalize(e);t.prototype[n]=function(){var t=this.attrs[e];return void 0===t?[]:t}},Kinetic.Node.addGetter=function(t,e,n){var o=i+Kinetic.Util._capitalize(e);t.prototype[o]=function(){var t=this.attrs[e];return void 0===t?n:t}},Kinetic.Node.addPointGetter=function(t,e){var n=i+Kinetic.Util._capitalize(e);t.prototype[n]=function(){var t=this;return{x:t[n+s](),y:t[n+c]()}}},Kinetic.Node.addRotationGetter=function(t,e,n){var o=i+Kinetic.Util._capitalize(e);t.prototype[o]=function(){var t=this.attrs[e];return void 0===t&&(t=n),t},t.prototype[o+m]=function(){var t=this.attrs[e];return void 0===t&&(t=n),Kinetic.Util._radToDeg(t)}},Kinetic.Node.addColorRGBSetter=function(t,e){var n=o+Kinetic.Util._capitalize(e)+b;t.prototype[n]=function(t){var n=t&&void 0!==t.r?0|t.r:this.getAttr(e+k),i=t&&void 0!==t.g?0|t.g:this.getAttr(e+T),o=t&&void 0!==t.b?0|t.b:this.getAttr(e+S);this._setAttr(e,C+Kinetic.Util._rgbToHex(n,i,o))}},Kinetic.Node.addColorComponentSetter=function(t,e,n){var i=o+Kinetic.Util._capitalize(e),r=i+Kinetic.Util._capitalize(n);t.prototype[r]=function(t){var e={};e[n]=t,this[i+b](e)}},Kinetic.Node.addPointsSetter=function(t,e){var n=o+Kinetic.Util._capitalize(e);t.prototype[n]=Kinetic.Node.setPoints},Kinetic.Node.addSetter=function(t,e,n){var i=o+Kinetic.Util._capitalize(e);t.prototype[i]=function(t){this._setAttr(e,t),n&&(this.cachedTransform=null)}},Kinetic.Node.addPointSetter=function(t,e){var n=o+Kinetic.Util._capitalize(e);t.prototype[n]=function(){var t=Kinetic.Util._getXY([].slice.call(arguments)),i=this.attrs[e],o=0,r=0;t&&(o=t.x,r=t.y,this._fireBeforeChangeEvent(e,i,t),void 0!==o&&this[n+s](o),void 0!==r&&this[n+c](r),this._fireChangeEvent(e,i,t))}},Kinetic.Node.addRotationSetter=function(t,e,n){var i=o+Kinetic.Util._capitalize(e);t.prototype[i]=function(t){this._setAttr(e,t),n&&(this.cachedTransform=null)},t.prototype[i+m]=function(t){this._setAttr(e,Kinetic.Util._degToRad(t)),n&&(this.cachedTransform=null)}},Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var n,i,o,r=Kinetic.Node.prototype.getClassName.call(t),a=t.children;if(e&&(t.attrs.container=e),n=new Kinetic[r](t.attrs),a)for(i=a.length,o=0;i>o;o++)n.add(this._createNode(a[o]));return n},Kinetic.Node.addGetterSetter(Kinetic.Node,"x",0,!0),Kinetic.Node.addGetterSetter(Kinetic.Node,"y",0,!0),Kinetic.Node.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Node.addGetter(Kinetic.Node,"name"),Kinetic.Node.addGetter(Kinetic.Node,"id"),Kinetic.Node.addRotationGetterSetter(Kinetic.Node,"rotation",0,!0),Kinetic.Node.addPointGetterSetter(Kinetic.Node,"scale",1,!0),Kinetic.Node.addPointGetterSetter(Kinetic.Node,"skew",0,!0),Kinetic.Node.addPointGetterSetter(Kinetic.Node,"offset",0,!0),Kinetic.Node.addSetter(Kinetic.Node,"width"),Kinetic.Node.addSetter(Kinetic.Node,"height"),Kinetic.Node.addSetter(Kinetic.Node,"listening"),Kinetic.Node.addSetter(Kinetic.Node,"visible"),Kinetic.Node.prototype.isListening=Kinetic.Node.prototype.getListening,Kinetic.Node.prototype.isVisible=Kinetic.Node.prototype.getVisible,Kinetic.Collection.mapMethods(["on","off","remove","destroy","show","hide","move","rotate","moveToTop","moveUp","moveDown","moveToBottom","moveTo","fire","draw"])}(),function(){function t(t){window.setTimeout(t,1e3/60)}Kinetic.Animation=function(t,e){this.func=t,this.setLayers(e),this.id=Kinetic.Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,n,i=this.layers;if(i){for(e=i.length,n=0;e>n;n++)if(i[n]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){for(var t=Kinetic.Animation,e=t.animations,n=0;n<e.length;n++)if(e[n].id===this.id)return!0;return!1},start:function(){this.stop(),this.frame.timeDiff=0,this.frame.lastTime=(new Date).getTime(),Kinetic.Animation._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){for(var e=t.id,n=this.animations,i=n.length,o=0;i>o;o++)if(n[o].id===e){this.animations.splice(o,1);break}},Kinetic.Animation._runFrames=function(){var t,e,n,i,o,r,a,s,c={},l=this.animations;for(i=0;i<l.length;i++){for(t=l[i],e=t.layers,n=t.func,t._updateFrameObject((new Date).getTime()),r=e.length,o=0;r>o;o++)a=e[o],void 0!==a._id&&(c[a._id]=a);n&&n.call(t,t.frame)}for(s in c)c[s].draw()},Kinetic.Animation._animationLoop=function(){var t=this;this.animations.length>0?(this._runFrames(),Kinetic.Animation.requestAnimFrame(function(){t._animationLoop()})):this.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())},RAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t}(),Kinetic.Animation.requestAnimFrame=function(e){var n=Kinetic.DD&&Kinetic.DD.isDragging?t:RAF;n(e)};var e=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){e.call(this,t)},Kinetic.Layer.batchAnim=new Kinetic.Animation(function(){0===this.getLayers().length&&this.stop(),this.setLayers([])}),Kinetic.Layer.prototype.batchDraw=function(){var t=Kinetic.Layer.batchAnim;t.addLayer(this),t.isRunning()||t.start()}}(),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,n=2,i=3,o=0;Kinetic.Tween=function(e){var n,i=this,a=e.node,s=a._id,c=e.duration||1,l=e.easing||Kinetic.Easings.Linear,h=!!e.yoyo;this.node=a,this._id=o++,this.onFinish=e.onFinish,this.anim=new Kinetic.Animation(function(){i.tween.onEnterFrame()},a.getLayer()||a.getLayers()),this.tween=new r(n,function(t){i._tweenFunc(t)},l,0,1,1e3*c,h),this._addListeners(),Kinetic.Tween.attrs[s]||(Kinetic.Tween.attrs[s]={}),Kinetic.Tween.attrs[s][this._id]||(Kinetic.Tween.attrs[s][this._id]={}),Kinetic.Tween.tweens[s]||(Kinetic.Tween.tweens[s]={});for(n in e)void 0===t[n]&&this._addAttr(n,e[n]);this.reset()},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var n,i,o,r,a,s,c,l=this.node,h=l._id;if(o=Kinetic.Tween.tweens[h][t],o&&delete Kinetic.Tween.attrs[h][o][t],n=l.getAttr(t),Kinetic.Util._isArray(e))for(e=Kinetic.Util._getPoints(e),i=[],a=e.length,r=0;a>r;r++)s=n[r],c=e[r],i.push({x:c.x-s.x,y:c.y-s.y});else i=e-n;Kinetic.Tween.attrs[h][this._id][t]={start:n,diff:i},Kinetic.Tween.tweens[h][t]=this._id},_tweenFunc:function(t){var e,n,i,o,r,a,s,c,l,h=this.node,u=Kinetic.Tween.attrs[h._id][this._id];for(e in u){if(n=u[e],i=n.start,o=n.diff,Kinetic.Util._isArray(i))for(r=[],s=i.length,a=0;s>a;a++)c=i[a],l=o[a],r.push({x:c.x+l.x*t,y:c.y+l.y*t});else r=i+o*t;h.setAttr(e,r)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){var t=this.node;return this.tween.reset(),(t.getLayer()||t.getLayers()).draw(),this},seek:function(t){var e=this.node;return this.tween.seek(1e3*t),(e.getLayer()||e.getLayers()).draw(),this},pause:function(){return this.tween.pause(),this},finish:function(){var t=this.node;return this.tween.finish(),(t.getLayer()||t.getLayers()).draw(),this},destroy:function(){var t,e=this.node._id,n=this._id,i=Kinetic.Tween.tweens[e];this.pause();for(t in i)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][n]}};var r=function(t,e,n,i,o,r,a){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=o-this.begin,this.pause()};r.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=i,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===n?this.setTime(t):this.state===i&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,n,i){var o=1.70158;
return n*(t/=i)*t*((o+1)*t-o)+e},BackEaseOut:function(t,e,n,i){var o=1.70158;return n*((t=t/i-1)*t*((o+1)*t+o)+1)+e},BackEaseInOut:function(t,e,n,i){var o=1.70158;return(t/=i/2)<1?n/2*t*t*(((o*=1.525)+1)*t-o)+e:n/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e},ElasticEaseIn:function(t,e,n,i,o,r){var a=0;return 0===t?e:1==(t/=i)?e+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/r))+e)},ElasticEaseOut:function(t,e,n,i,o,r){var a=0;return 0===t?e:1==(t/=i)?e+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*i-a)*Math.PI/r)+n+e)},ElasticEaseInOut:function(t,e,n,i,o,r){var a=0;return 0===t?e:2==(t/=i/2)?e+n:(r||(r=.3*i*1.5),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/r)+e:.5*o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/r)+n+e)},BounceEaseOut:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,i){return n-Kinetic.Easings.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut:function(t,e,n,i){return i/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,n,i)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+e},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,n=e.node;if(n){var i=n.getStage().getPointerPosition(),o=n.getDragBoundFunc(),r={x:i.x-e.offset.x,y:i.y-e.offset.y};void 0!==o&&(r=o.call(n,r,t)),n.setAbsolutePosition(r),e.isDragging||(e.isDragging=!0,n.fire("dragstart",t,!0)),n.fire("dragmove",t,!0)}},_endDragBefore:function(t){var e,n,i=Kinetic.DD,o=i.node;o&&(e=o.nodeType,n=o.getLayer(),i.anim.stop(),i.isDragging&&(i.isDragging=!1,t&&(t.dragEndNode=o)),delete i.node,(n||o).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",t,!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),n=this.getLayer(),i=e.getPointerPosition(),o=(this.getTransform().getTranslation(),this.getAbsolutePosition());i&&(t.node&&t.node.stopDrag(),t.node=this,t.offset.x=i.x-o.x,t.offset.y=i.y-o.y,t.anim.setLayers(n||this.getLayers()),t.anim.start())},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){this._dragCleanup();var t=this;this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){this.off("mousedown.kinetic"),this.off("touchstart.kinetic")},Kinetic.Node.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Node.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Node.prototype.isDraggable=Kinetic.Node.prototype.getDraggable;var e=document.getElementsByTagName("html")[0];e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{_containerInit:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(){return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=this.children;e.length>0;){var t=e[0];t.hasChildren()&&t.removeChildren(),t.remove()}return this},destroyChildren:function(){for(var t=this.children;t.length>0;)t[0].destroy();return this},add:function(t){var e=(Kinetic.Global,this.children);return t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},get:function(t){var e=new Kinetic.Collection;if("#"===t.charAt(0)){var n=this._getNodeById(t.slice(1));n&&e.push(n)}else if("."===t.charAt(0)){var i=this._getNodesByName(t.slice(1));Kinetic.Collection.apply(e,i)}else{for(var o=[],r=this.getChildren(),a=r.length,s=0;a>s;s++)o=o.concat(r[s]._get(t));Kinetic.Collection.apply(e,o)}return e},_getNodeById:function(t){var e=(this.getStage(),Kinetic.Global),n=e.ids[t];return void 0!==n&&this.isAncestorOf(n)?n:null},_getNodesByName:function(t){var e=Kinetic.Global,n=e.names[t]||[];return this._getDescendants(n)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),n=this.getChildren(),i=n.length,o=0;i>o;o++)e=e.concat(n[o]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;n>i;i++){var o=e[i];t.children.push(o.toObject())}return t},_getDescendants:function(t){for(var e=[],n=t.length,i=0;n>i;i++){var o=t[i];this.isAncestorOf(o)&&e.push(o)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(){for(var t=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),e=[],n=this.get("Shape"),i=n.length,o=0;i>o;o++){var r=n[o];r.isVisible()&&r.intersects(t)&&e.push(r)}return e},_setChildrenIndices:function(){for(var t=this.children,e=t.length,n=0;e>n;n++)t[n].index=n},drawScene:function(t){var e,n,i,o=this.getLayer(),r=!!this.getClipFunc();if(!t&&o&&(t=o.getCanvas()),this.isVisible()){for(r&&t._clip(this),e=this.children,i=e.length,n=0;i>n;n++)e[n].drawScene(t);r&&t.getContext().restore()}return this},drawHit:function(){var t,e=!!this.getClipFunc()&&"Stage"!==this.nodeType,n=0,i=0,o=[];if(this.shouldDrawHit()){for(e&&(t=this.getLayer().hitCanvas,t._clip(this)),o=this.children,i=o.length,n=0;i>n;n++)o[n].drawHit();e&&t.getContext().restore()}return this}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Node.addGetterSetter(Kinetic.Container,"clipFunc")}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function n(t){t.fill()}function i(t){t.stroke()}Kinetic.Util.addMethods(Kinetic.Shape,{_initShape:function(o){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=n,this._strokeFuncHit=i;for(var r,a=Kinetic.Global.shapes;r=Kinetic.Util.getRandomColor(),!r||r in a;);this.colorKey=r,a[r]=this,this.createAttrs(),Kinetic.Node.call(this,o)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(){var t=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),e=this.getStage(),n=e.hitCanvas;n.clear(),this.drawScene(n);var i=n.context.getImageData(0|t.x,0|t.y,1,1).data;return i[3]>0},enableFill:function(){return this._setAttr("fillEnabled",!0),this},disableFill:function(){return this._setAttr("fillEnabled",!1),this},enableStroke:function(){return this._setAttr("strokeEnabled",!0),this},disableStroke:function(){return this._setAttr("strokeEnabled",!1),this},enableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!0),this},disableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!1),this},enableShadow:function(){return this._setAttr("shadowEnabled",!0),this},disableShadow:function(){return this._setAttr("shadowEnabled",!1),this},enableDashArray:function(){return this._setAttr("dashArrayEnabled",!0),this},disableDashArray:function(){return this._setAttr("dashArrayEnabled",!1),this},destroy:function(){return Kinetic.Node.prototype.destroy.call(this),delete Kinetic.Global.shapes[this.colorKey],this},drawScene:function(t){t=t||this.getLayer().getCanvas();var e=this.getDrawFunc(),n=t.getContext();return e&&this.isVisible()&&(n.save(),t._applyOpacity(this),t._applyLineJoin(this),t._applyAncestorTransforms(this),e.call(this,t),n.restore()),this},drawHit:function(){var t=this.getAttrs(),e=t.drawHitFunc||t.drawFunc,n=this.getLayer().hitCanvas,i=n.getContext();return e&&this.shouldDrawHit()&&(i.save(),n._applyLineJoin(this),n._applyAncestorTransforms(this),e.call(this,n),i.restore()),this},_setDrawFuncs:function(){!this.attrs.drawFunc&&this.drawFunc&&this.setDrawFunc(this.drawFunc),!this.attrs.drawHitFunc&&this.drawHitFunc&&this.setDrawHitFunc(this.drawHitFunc)}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Node.addColorGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"strokeWidth"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"drawFunc"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"drawHitFunc"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"dashArray"),Kinetic.Node.addColorGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Node.addColorGetterSetter(Kinetic.Shape,"fill"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternX"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternY"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPatternRepeat"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"dashArrayEnabled",!0),Kinetic.Node.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Node.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillPatternOffset",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillPatternScale",1),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",0),Kinetic.Node.addPointGetterSetter(Kinetic.Shape,"shadowOffset",0),Kinetic.Node.addRotationGetterSetter(Kinetic.Shape,"fillPatternRotation",0)}(),function(){function t(t,e){t.content.addEventListener(e,function(n){n.preventDefault(),t[k+e](n)},!1)}var e="Stage",n="string",i="px",o="mouseout",r="mouseleave",a="mouseover",s="mouseenter",c="mousemove",l="mousedown",h="mouseup",u="click",d="dblclick",f="touchstart",p="touchend",g="tap",m="dbltap",v="touchmove",y="div",b="relative",w="inline-block",_="kineticjs-content",x=" ",k="_",T="container",S="",C=[l,c,h,o,f,v,p],$=C.length;Kinetic.Util.addMethods(Kinetic.Stage,{_initStage:function(t){this.createAttrs(),Kinetic.Container.call(this,t),this.nodeType=e,this.dblClickWindow=400,this._id=Kinetic.Global.idCounter++,this._buildDOM(),this._bindContentEvents(),Kinetic.Global.stages.push(this)},setContainer:function(t){return typeof t===n&&(t=document.getElementById(t)),this._setAttr(T,t),this},draw:function(){var t,e,n=this.getChildren(),i=n.length;for(t=0;i>t;t++)e=n[t],e.getClearBeforeDraw()&&(e.getCanvas().clear(),e.getHitCanvas().clear());return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,n=e.length;for(t=0;n>t;t++)e[t].clear();return this},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t)},getMousePosition:function(){return this.mousePos},getTouchPosition:function(){return this.touchPos},getPointerPosition:function(){return this.getTouchPosition()||this.getMousePosition()},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(o){var r=c[o],l=r.toDataURL(),h=new Image;h.onload=function(){s.drawImage(h,0,0),o<c.length-1?e(o+1):t.callback(a.toDataURL(n,i))},h.src=l}t=t||{};var n=t.mimeType||null,i=t.quality||null,o=t.x||0,r=t.y||0,a=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),s=a.getContext(),c=this.children;(o||r)&&s.translate(-1*o,-1*r),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(){var t,e,n=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),i=this.getChildren(),o=i.length,r=o-1;for(t=r;t>=0;t--)if(e=i[t].getIntersection(n))return e;return null},_resizeDOM:function(){if(this.content){var t,e=this.getWidth(),n=this.getHeight(),o=this.getChildren(),r=o.length;for(this.content.style.width=e+i,this.content.style.height=n+i,this.bufferCanvas.setSize(e,n,1),this.hitCanvas.setSize(e,n),t=0;r>t;t++)layer=o[t],layer.getCanvas().setSize(e,n),layer.hitCanvas.setSize(e,n),layer.draw()}},add:function(t){return Kinetic.Container.prototype.add.call(this,t),t.canvas.setSize(this.attrs.width,this.attrs.height),t.hitCanvas.setSize(this.attrs.width,this.attrs.height),t.draw(),this.content.appendChild(t.canvas.element),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_setPointerPosition:function(t){t||(t=window.event),this._setMousePosition(t),this._setTouchPosition(t)},_bindContentEvents:function(){var e;for(e=0;$>e;e++)t(this,C[e])},_mouseout:function(t){this._setPointerPosition(t);var e=Kinetic.Global,n=this.targetShape;n&&!e.isDragging()&&(n._fireAndBubble(o,t),n._fireAndBubble(r,t),this.targetShape=null),this.mousePos=void 0},_mousemove:function(t){this._setPointerPosition(t);var e,n=Kinetic.Global,i=Kinetic.DD,l=this.getIntersection(this.getPointerPosition());l?(e=l.shape,e&&(n.isDragging()||255!==l.pixel[3]||this.targetShape&&this.targetShape._id===e._id?e._fireAndBubble(c,t):(this.targetShape&&(this.targetShape._fireAndBubble(o,t,e),this.targetShape._fireAndBubble(r,t,e)),e._fireAndBubble(a,t,this.targetShape),e._fireAndBubble(s,t,this.targetShape),this.targetShape=e))):this.targetShape&&!n.isDragging()&&(this.targetShape._fireAndBubble(o,t),this.targetShape._fireAndBubble(r,t),this.targetShape=null),i&&i._drag(t)},_mousedown:function(t){this._setPointerPosition(t);var e,n=Kinetic.Global,i=this.getIntersection(this.getPointerPosition());i&&i.shape&&(e=i.shape,this.clickStart=!0,this.clickStartShape=e,e._fireAndBubble(l,t)),this.isDraggable()&&!n.isDragReady()&&this.startDrag(t)},_mouseup:function(t){this._setPointerPosition(t);var e,n=this,i=Kinetic.Global,o=this.getIntersection(this.getPointerPosition());o&&o.shape&&(e=o.shape,e._fireAndBubble(h,t),this.clickStart&&(i.isDragging()||e._id!==this.clickStartShape._id||(e._fireAndBubble(u,t),this.inDoubleClickWindow&&e._fireAndBubble(d,t),this.inDoubleClickWindow=!0,setTimeout(function(){n.inDoubleClickWindow=!1},this.dblClickWindow)))),this.clickStart=!1},_touchstart:function(t){this._setPointerPosition(t);var e,n=Kinetic.Global,i=this.getIntersection(this.getPointerPosition());i&&i.shape&&(e=i.shape,this.tapStart=!0,this.tapStartShape=e,e._fireAndBubble(f,t)),this.isDraggable()&&!n.isDragReady()&&this.startDrag(t)},_touchend:function(t){this._setPointerPosition(t);var e,n=this,i=Kinetic.Global,o=this.getIntersection(this.getPointerPosition());o&&o.shape&&(e=o.shape,e._fireAndBubble(p,t),this.tapStart&&(i.isDragging()||e._id!==this.tapStartShape._id||(e._fireAndBubble(g,t),this.inDoubleClickWindow&&e._fireAndBubble(m,t),this.inDoubleClickWindow=!0,setTimeout(function(){n.inDoubleClickWindow=!1},this.dblClickWindow)))),this.tapStart=!1},_touchmove:function(t){this._setPointerPosition(t);var e,n=Kinetic.DD,i=this.getIntersection(this.getPointerPosition());i&&i.shape&&(e=i.shape,e._fireAndBubble(v,t)),n&&n._drag(t)},_setMousePosition:function(t){var e=t.clientX-this._getContentPosition().left,n=t.clientY-this._getContentPosition().top;this.mousePos={x:e,y:n}},_setTouchPosition:function(t){var e,n,i;void 0!==t.touches&&1===t.touches.length&&(e=t.touches[0],n=e.clientX-this._getContentPosition().left,i=e.clientY-this._getContentPosition().top,this.touchPos={x:n,y:i})},_getContentPosition:function(){var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();t.innerHTML=S,this.content=document.createElement(y),this.content.style.position=b,this.content.style.display=w,this.content.className=_,t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var n,i,o=t.split(x),r=o.length;for(n=0;r>n;n++)i=o[n],this.content.addEventListener(i,e,!1)}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Node.addGetter(Kinetic.Stage,"container")}(),function(){var t="#";Kinetic.Util.addMethods(Kinetic.Layer,{_initLayer:function(t){this.nodeType="Layer",this.createAttrs(),this.canvas=new Kinetic.SceneCanvas,this.canvas.getElement().style.position="absolute",this.hitCanvas=new Kinetic.HitCanvas,Kinetic.Container.call(this,t)},getIntersection:function(){var e,n,i,o=Kinetic.Util._getXY(Array.prototype.slice.call(arguments));if(this.isVisible()&&this.isListening()){if(e=this.hitCanvas.context.getImageData(0|o.x,0|o.y,1,1).data,255===e[3])return n=Kinetic.Util._rgbToHex(e[0],e[1],e[2]),i=Kinetic.Global.shapes[t+n],{shape:i,pixel:e};if(e[0]>0||e[1]>0||e[2]>0||e[3]>0)return{pixel:e}}return null},drawScene:function(t){return t=t||this.getCanvas(),this.getClearBeforeDraw()&&t.clear(),Kinetic.Container.prototype.drawScene.call(this,t),this},drawHit:function(){var t=this.getLayer();return t&&t.getClearBeforeDraw()&&t.getHitCanvas().clear(),Kinetic.Container.prototype.drawHit.call(this),this},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(){return this.getCanvas().clear(),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas().element.style.display="block",this.hitCanvas.element.style.display="block"):(this.getCanvas().element.style.display="none",this.hitCanvas.element.style.display="none"),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas().element),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas().element,e.getChildren()[t+1].getCanvas().element):e.content.appendChild(this.getCanvas().element)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas().element),t.content.appendChild(this.getCanvas().element))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas().element),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas().element,t.getChildren()[this.index+1].getCanvas().element):t.content.appendChild(this.getCanvas().element))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas().element),t.content.insertBefore(this.getCanvas().element,e[this.index+1].getCanvas().element)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas().element),t.content.insertBefore(this.getCanvas().element,e[1].getCanvas().element)}}},getLayer:function(){return this},remove:function(){var t=this.getStage(),e=this.getCanvas(),n=e.element;return Kinetic.Node.prototype.remove.call(this),t&&e&&Kinetic.Util._isInDocument(n)&&t.content.removeChild(n),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Node.addGetterSetter(Kinetic.Layer,"clearBeforeDraw",!0)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{_initGroup:function(t){this.nodeType="Group",this.createAttrs(),Kinetic.Container.call(this,t)}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container)}(),function(){Kinetic.Rect=function(t){this._initRect(t)},Kinetic.Rect.prototype={_initRect:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Rect",this._setDrawFuncs()},drawFunc:function(t){var e=t.getContext(),n=this.getCornerRadius(),i=this.getWidth(),o=this.getHeight();e.beginPath(),n?(e.moveTo(n,0),e.lineTo(i-n,0),e.arc(i-n,n,n,3*Math.PI/2,0,!1),e.lineTo(i,o-n),e.arc(i-n,o-n,n,0,Math.PI/2,!1),e.lineTo(n,o),e.arc(n,o-n,n,Math.PI/2,Math.PI,!1),e.lineTo(0,n),e.arc(n,n,n,Math.PI,3*Math.PI/2,!1)):e.rect(0,0,i,o),e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Rect,"cornerRadius",0)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this._initCircle(t)},Kinetic.Circle.prototype={_initCircle:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className=e,this._setDrawFuncs()},drawFunc:function(e){var n=e.getContext();n.beginPath(),n.arc(0,0,this.getRadius(),0,t,!1),n.closePath(),e.fillStroke(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Circle,"radius",0)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this._initEllipse(t)},Kinetic.Ellipse.prototype={_initEllipse:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className=e,this._setDrawFuncs()},drawFunc:function(e){var n=e.getContext(),i=this.getRadius();n.beginPath(),n.save(),i.x!==i.y&&n.scale(1,i.y/i.x),n.arc(0,0,i.x,0,t,!1),n.restore(),n.closePath(),e.fillStroke(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Node.addPointGetterSetter(Kinetic.Ellipse,"radius",0)}(),function(){Kinetic.Wedge=function(t){this._initWedge(t)},Kinetic.Wedge.prototype={_initWedge:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Wedge",this._setDrawFuncs()},drawFunc:function(t){var e=t.getContext();e.beginPath(),e.arc(0,0,this.getRadius(),0,this.getAngle(),this.getClockwise()),e.lineTo(0,0),e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Node.addRotationGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Node.addGetterSetter(Kinetic.Wedge,"clockwise",!1)}(),function(){var t="Image",e="crop",n="set";Kinetic.Image=function(t){this._initImage(t)},Kinetic.Image.prototype={_initImage:function(e){Kinetic.Shape.call(this,e),this.className=t,this._setDrawFuncs()},drawFunc:function(t){var e,n,i,o,r,a,s=this.getWidth(),c=this.getHeight(),l=this,h=t.getContext(),u=this.getCrop();this.getFilter()&&this._applyFilter&&(this.applyFilter(),this._applyFilter=!1),a=this.filterCanvas?this.filterCanvas.getElement():this.getImage(),h.beginPath(),h.rect(0,0,s,c),h.closePath(),t.fillStroke(this),a&&(u?(n=u.x||0,i=u.y||0,o=u.width||0,r=u.height||0,e=[a,n,i,o,r,0,0,s,c]):e=[a,0,0,s,c],this.hasShadow()?t.applyShadow(this,function(){l._drawImage(h,e)}):this._drawImage(h,e))},drawHitFunc:function(t){var e=this.getWidth(),n=this.getHeight(),i=this.imageHitRegion,o=t.getContext();i?(o.drawImage(i,0,0,e,n),o.beginPath(),o.rect(0,0,e,n),o.closePath(),t.stroke(this)):(o.beginPath(),o.rect(0,0,e,n),o.closePath(),t.fillStroke(this))},applyFilter:function(){var t,e,n,i=this.getImage(),o=this.getWidth(),r=this.getHeight(),a=this.getFilter();t=this.filterCanvas?this.filterCanvas:this.filterCanvas=new Kinetic.SceneCanvas({width:o,height:r}),e=t.getContext();try{this._drawImage(e,[i,0,0,o,r]),n=e.getImageData(0,0,t.getWidth(),t.getHeight()),a.call(this,n),e.putImageData(n,0,0)}catch(s){this.clearFilter(),Kinetic.Util.warn("Unable to apply filter. "+s.message)}},clearFilter:function(){this.filterCanvas=null,this._applyFilter=!1},setCrop:function(){var t=[].slice.call(arguments),n=Kinetic.Util._getXY(t),i=Kinetic.Util._getSize(t),o=Kinetic.Util._merge(n,i);this._setAttr(e,Kinetic.Util._merge(o,this.getCrop()))},createImageHitRegion:function(t){var e,n,i,o,r,a=this,s=this.getWidth(),c=this.getHeight(),l=new Kinetic.Canvas({width:s,height:c}),h=l.getContext(),u=this.getImage();h.drawImage(u,0,0);try{for(e=h.getImageData(0,0,s,c),n=e.data,i=Kinetic.Util._hexToRgb(this.colorKey),o=0,r=n.length;r>o;o+=4)n[o+3]>0&&(n[o]=i.r,n[o+1]=i.g,n[o+2]=i.b);Kinetic.Util._getImage(e,function(e){a.imageHitRegion=e,t&&t()})}catch(d){Kinetic.Util.warn("Unable to create image hit region. "+d.message)}},clearImageHitRegion:function(){delete this.imageHitRegion},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)},_drawImage:function(t,e){5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Node.addFilterGetterSetter=function(t,e,n){this.addGetter(t,e,n),this.addFilterSetter(t,e)},Kinetic.Node.addFilterSetter=function(t,e){var i=n+Kinetic.Util._capitalize(e);t.prototype[i]=function(t){this._setAttr(e,t),this._applyFilter=!0}},Kinetic.Node.addGetterSetter(Kinetic.Image,"image"),Kinetic.Node.addGetter(Kinetic.Image,"crop"),Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filter")}(),function(){Kinetic.Polygon=function(t){this._initPolygon(t)},Kinetic.Polygon.prototype={_initPolygon:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Polygon",this._setDrawFuncs()},drawFunc:function(t){var e=t.getContext(),n=this.getPoints(),i=n.length;e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var o=1;i>o;o++)e.lineTo(n[o].x,n[o].y);e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Polygon,Kinetic.Shape),Kinetic.Node.addPointsGetterSetter(Kinetic.Polygon,"points")}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="auto",i="Calibri",o="canvas",r="center",a="Change.kinetic",s="2d",c="-",l="",h="left",u="text",d="Text",f="middle",p="normal",g="px ",m=" ",v="right",y="word",b="char",w="none",_=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height","wrap"],x=_.length,k=document.createElement(o).getContext(s);Kinetic.Text=function(t){this._initText(t)},Kinetic.Text.prototype={_initText:function(i){var o=this;this.createAttrs(),this.attrs.width=n,this.attrs.height=n,Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this.className=d,this._setDrawFuncs();for(var r=0;x>r;r++)this.on(_[r]+a,o._setTextData);this._setTextData()},drawFunc:function(t){var e=t.getContext(),n=this.getPadding(),i=(this.getFontStyle(),this.getFontSize(),this.getFontFamily(),this.getTextHeight()),o=this.getLineHeight()*i,a=this.textArr,s=a.length,c=this.getWidth();e.font=this._getContextFont(),e.textBaseline=f,e.textAlign=h,e.save(),e.translate(n,0),e.translate(0,n+i/2);for(var l=0;s>l;l++){var u=a[l],d=u.text,p=u.width;e.save(),this.getAlign()===v?e.translate(c-p-2*n,0):this.getAlign()===r&&e.translate((c-p-2*n)/2,0),this.partialText=d,t.fillStroke(this),e.restore(),e.translate(0,o)}e.restore()},drawHitFunc:function(t){var e=t.getContext(),n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),t.fillStroke(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();this._setAttr(u,e)},getWidth:function(){return this.attrs.width===n?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===n?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,n=k,i=this.getFontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:parseInt(i,10)}},_getContextFont:function(){return this.getFontStyle()+m+this.getFontSize()+g+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return k.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),i=0,o=this.getLineHeight()*e,r=this.attrs.width,a=this.attrs.height,s=r!==n,l=a!==n,h=this.getPadding(),u=r-2*h,d=a-2*h,f=0,p=this.getWrap(),v=p!==w,y=p!==b&&v;this.textArr=[],k.save(),k.font=this.getFontStyle()+m+e+g+this.getFontFamily();for(var _=0,x=t.length;x>_;++_){var T=t[_],S=this._getTextWidth(T);if(s&&S>u)for(;T.length>0;){for(var C=0,$=T.length,P="",N=0;$>C;){var I=C+$>>>1,D=T.slice(0,I+1),A=this._getTextWidth(D);u>=A?(C=I+1,P=D,N=A):$=I}if(!P)break;if(y){var M=Math.max(P.lastIndexOf(m),P.lastIndexOf(c))+1;M>0&&(C=M,P=P.slice(0,C),N=this._getTextWidth(P))}if(this._addTextLine(P,N),f+=o,!v||l&&f+o>d)break;if(T=T.slice(C),T.length>0&&(S=this._getTextWidth(T),u>=S)){this._addTextLine(T,S),f+=o;break}}else this._addTextLine(T,S),f+=o,i=Math.max(i,S);if(l&&f+o>d)break}k.restore(),this.textHeight=e,this.textWidth=i}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Text,"fontFamily",i),Kinetic.Node.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Node.addGetterSetter(Kinetic.Text,"fontStyle",p),Kinetic.Node.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Node.addGetterSetter(Kinetic.Text,"align",h),Kinetic.Node.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Node.addGetterSetter(Kinetic.Text,"wrap",y),Kinetic.Node.addGetter(Kinetic.Text,u,l),Kinetic.Node.addSetter(Kinetic.Text,"width"),Kinetic.Node.addSetter(Kinetic.Text,"height")}(),function(){Kinetic.Line=function(t){this._initLine(t)},Kinetic.Line.prototype={_initLine:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Line",this._setDrawFuncs()},drawFunc:function(t){var e,n,i=this.getPoints(),o=i.length,r=t.getContext();for(r.beginPath(),r.moveTo(i[0].x,i[0].y),e=1;o>e;e++)n=i[e],r.lineTo(n.x,n.y);t.stroke(this)}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Node.addPointsGetterSetter(Kinetic.Line,"points")}(),function(){Kinetic.Spline=function(t){this._initSpline(t)},Kinetic.Spline.prototype={_initSpline:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Spline",this._setDrawFuncs()
},drawFunc:function(t){var e,n,i,o,r=this.getPoints(),a=r.length,s=t.getContext(),c=this.getTension();if(s.beginPath(),s.moveTo(r[0].x,r[0].y),0!==c&&a>2){for(e=this.allPoints,n=e.length,i=2,s.quadraticCurveTo(e[0].x,e[0].y,e[1].x,e[1].y);n-1>i;)s.bezierCurveTo(e[i].x,e[i++].y,e[i].x,e[i++].y,e[i].x,e[i++].y);s.quadraticCurveTo(e[n-1].x,e[n-1].y,r[a-1].x,r[a-1].y)}else for(i=1;a>i;i++)o=r[i],s.lineTo(o.x,o.y);t.stroke(this)},setTension:function(t){this._setAttr("tension",t),this._setAllPoints()},setPoints:function(t){Kinetic.Node.setPoints.call(this,t),this._setAllPoints()},_setAllPoints:function(){this.allPoints=Kinetic.Util._expandPoints(this.getPoints(),this.getTension())}},Kinetic.Util.extend(Kinetic.Spline,Kinetic.Shape),Kinetic.Node.addGetter(Kinetic.Spline,"tension",1),Kinetic.Node.addPointsGetter(Kinetic.Spline,"points")}(),function(){Kinetic.Blob=function(t){this._initBlob(t)},Kinetic.Blob.prototype={_initBlob:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Blob",this._setDrawFuncs()},drawFunc:function(t){var e,n,i,o,r=this.getPoints(),a=r.length,s=t.getContext(),c=this.getTension();if(s.beginPath(),s.moveTo(r[0].x,r[0].y),0!==c&&a>2)for(e=this.allPoints,n=e.length,i=0;n-1>i;)s.bezierCurveTo(e[i].x,e[i++].y,e[i].x,e[i++].y,e[i].x,e[i++].y);else for(i=1;a>i;i++)o=r[i],s.lineTo(o.x,o.y);s.closePath(),t.fillStroke(this)},setTension:function(t){this._setAttr("tension",t),this._setAllPoints()},setPoints:function(t){Kinetic.Node.setPoints.call(this,t),this._setAllPoints()},_setAllPoints:function(){var t=this.getPoints(),e=t.length,n=this.getTension(),i=Kinetic.Util,o=i._getControlPoints(t[e-1],t[0],t[1],n),r=i._getControlPoints(t[e-2],t[e-1],t[0],n);this.allPoints=Kinetic.Util._expandPoints(this.getPoints(),this.getTension()),this.allPoints.unshift(o[1]),this.allPoints.push(r[0]),this.allPoints.push(t[e-1]),this.allPoints.push(r[1]),this.allPoints.push(o[0]),this.allPoints.push(t[0])}},Kinetic.Util.extend(Kinetic.Blob,Kinetic.Shape),Kinetic.Node.addGetter(Kinetic.Blob,"tension",1),Kinetic.Node.addPointsGetter(Kinetic.Blob,"points")}(),function(){Kinetic.Sprite=function(t){this._initSprite(t)},Kinetic.Sprite.prototype={_initSprite:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Sprite",this._setDrawFuncs(),this.anim=new Kinetic.Animation;var e=this;this.on("animationChange",function(){e.setIndex(0)})},drawFunc:function(t){var e=this.getAnimation(),n=this.getIndex(),i=this.getAnimations()[e][n],o=t.getContext(),r=this.getImage();r&&o.drawImage(r,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},drawHitFunc:function(t){var e=this.getAnimation(),n=this.getIndex(),i=this.getAnimations()[e][n],o=t.getContext();o.beginPath(),o.rect(0,0,i.width,i.height),o.closePath(),t.fill(this)},start:function(){var t=this,e=this.getLayer();this.anim.setLayers(e),this.interval=setInterval(function(){var e=t.getIndex();t._updateIndex(),t.afterFrameFunc&&e===t.afterFrameIndex&&(t.afterFrameFunc(),delete t.afterFrameFunc,delete t.afterFrameIndex)},1e3/this.getFrameRate()),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},afterFrame:function(t,e){this.afterFrameIndex=t,this.afterFrameFunc=e},_updateIndex:function(){var t=this.getIndex(),e=this.getAnimation(),n=this.getAnimations(),i=n[e],o=i.length;this.setIndex(o-1>t?t+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"index",0),Kinetic.Node.addGetterSetter(Kinetic.Sprite,"frameRate",17)}(),function(){Kinetic.Path=function(t){this._initPath(t)},Kinetic.Path.prototype={_initPath:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this._setDrawFuncs(),this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())})},drawFunc:function(t){var e=this.dataArray,n=t.getContext();n.beginPath();for(var i=0;i<e.length;i++){var o=e[i].command,r=e[i].points;switch(o){case"L":n.lineTo(r[0],r[1]);break;case"M":n.moveTo(r[0],r[1]);break;case"C":n.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":n.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var a=r[0],s=r[1],c=r[2],l=r[3],h=r[4],u=r[5],d=r[6],f=r[7],p=c>l?c:l,g=c>l?1:c/l,m=c>l?l/c:1;n.translate(a,s),n.rotate(d),n.scale(g,m),n.arc(0,0,p,h,h+u,1-f),n.scale(1/g,1/m),n.rotate(-d),n.translate(-a,-s);break;case"z":n.closePath()}}t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},Kinetic.Path.getPointOnLine=function(t,e,n,i,o,r,a){void 0===r&&(r=e),void 0===a&&(a=n);var s=(o-n)/(i-e+1e-8),c=Math.sqrt(t*t/(1+s*s));e>i&&(c*=-1);var l,h=s*c;if((a-n)/(r-e+1e-8)===s)l={x:r+c,y:a+h};else{var u,d,f=this.getLineLength(e,n,i,o);if(1e-8>f)return void 0;var p=(r-e)*(i-e)+(a-n)*(o-n);p/=f*f,u=e+p*(i-e),d=n+p*(o-n);var g=this.getLineLength(r,a,u,d),m=Math.sqrt(t*t-g*g);c=Math.sqrt(m*m/(1+s*s)),e>i&&(c*=-1),h=s*c,l={x:u+c,y:d+h}}return l},Kinetic.Path.getPointOnCubicBezier=function(t,e,n,i,o,r,a,s,c){function l(t){return t*t*t}function h(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}var f=s*l(t)+r*h(t)+i*u(t)+e*d(t),p=c*l(t)+a*h(t)+o*u(t)+n*d(t);return{x:f,y:p}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,n,i,o,r,a){function s(t){return t*t}function c(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}var h=r*s(t)+i*c(t)+e*l(t),u=a*s(t)+o*c(t)+n*l(t);return{x:h,y:u}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,n,i,o,r){var a=Math.cos(r),s=Math.sin(r),c={x:n*Math.cos(o),y:i*Math.sin(o)};return{x:t+(c.x*a-c.y*s),y:e+(c.x*s+c.y*a)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);for(var o=e.split("|"),r=[],a=0,s=0,i=1;i<o.length;i++){var c=o[i],l=c.charAt(0);c=c.slice(1),c=c.replace(new RegExp(",-","g"),"-"),c=c.replace(new RegExp("-","g"),",-"),c=c.replace(new RegExp("e,-","g"),"e-");var h=c.split(",");h.length>0&&""===h[0]&&h.shift();for(var u=0;u<h.length;u++)h[u]=parseFloat(h[u]);for(;h.length>0&&!isNaN(h[0]);){var d=null,f=[],p=a,g=s;switch(l){case"l":a+=h.shift(),s+=h.shift(),d="L",f.push(a,s);break;case"L":a=h.shift(),s=h.shift(),f.push(a,s);break;case"m":a+=h.shift(),s+=h.shift(),d="M",f.push(a,s),l="l";break;case"M":a=h.shift(),s=h.shift(),d="M",f.push(a,s),l="L";break;case"h":a+=h.shift(),d="L",f.push(a,s);break;case"H":a=h.shift(),d="L",f.push(a,s);break;case"v":s+=h.shift(),d="L",f.push(a,s);break;case"V":s=h.shift(),d="L",f.push(a,s);break;case"C":f.push(h.shift(),h.shift(),h.shift(),h.shift()),a=h.shift(),s=h.shift(),f.push(a,s);break;case"c":f.push(a+h.shift(),s+h.shift(),a+h.shift(),s+h.shift()),a+=h.shift(),s+=h.shift(),d="C",f.push(a,s);break;case"S":var m=a,v=s,y=r[r.length-1];"C"===y.command&&(m=a+(a-y.points[2]),v=s+(s-y.points[3])),f.push(m,v,h.shift(),h.shift()),a=h.shift(),s=h.shift(),d="C",f.push(a,s);break;case"s":var m=a,v=s,y=r[r.length-1];"C"===y.command&&(m=a+(a-y.points[2]),v=s+(s-y.points[3])),f.push(m,v,a+h.shift(),s+h.shift()),a+=h.shift(),s+=h.shift(),d="C",f.push(a,s);break;case"Q":f.push(h.shift(),h.shift()),a=h.shift(),s=h.shift(),f.push(a,s);break;case"q":f.push(a+h.shift(),s+h.shift()),a+=h.shift(),s+=h.shift(),d="Q",f.push(a,s);break;case"T":var m=a,v=s,y=r[r.length-1];"Q"===y.command&&(m=a+(a-y.points[0]),v=s+(s-y.points[1])),a=h.shift(),s=h.shift(),d="Q",f.push(m,v,a,s);break;case"t":var m=a,v=s,y=r[r.length-1];"Q"===y.command&&(m=a+(a-y.points[0]),v=s+(s-y.points[1])),a+=h.shift(),s+=h.shift(),d="Q",f.push(m,v,a,s);break;case"A":var b=h.shift(),w=h.shift(),_=h.shift(),x=h.shift(),k=h.shift(),T=a,S=s;a=h.shift(),s=h.shift(),d="A",f=this.convertEndpointToCenterParameterization(T,S,a,s,x,k,b,w,_);break;case"a":var b=h.shift(),w=h.shift(),_=h.shift(),x=h.shift(),k=h.shift(),T=a,S=s;a+=h.shift(),s+=h.shift(),d="A",f=this.convertEndpointToCenterParameterization(T,S,a,s,x,k,b,w,_)}r.push({command:d||l,points:f,start:{x:p,y:g},pathLength:this.calcLength(p,g,d||l,f)})}("z"===l||"Z"===l)&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r},Kinetic.Path.calcLength=function(e,n,i,o){var r,a,s,c=Kinetic.Path;switch(i){case"L":return c.getLineLength(e,n,o[0],o[1]);case"C":for(r=0,a=c.getPointOnCubicBezier(0,e,n,o[0],o[1],o[2],o[3],o[4],o[5]),t=.01;1>=t;t+=.01)s=c.getPointOnCubicBezier(t,e,n,o[0],o[1],o[2],o[3],o[4],o[5]),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return r;case"Q":for(r=0,a=c.getPointOnQuadraticBezier(0,e,n,o[0],o[1],o[2],o[3]),t=.01;1>=t;t+=.01)s=c.getPointOnQuadraticBezier(t,e,n,o[0],o[1],o[2],o[3]),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return r;case"A":r=0;var l=o[4],h=o[5],u=o[4]+h,d=Math.PI/180;if(Math.abs(l-u)<d&&(d=Math.abs(l-u)),a=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],l,0),0>h)for(t=l-d;t>u;t-=d)s=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],t,0),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(t=l+d;u>t;t+=d)s=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],t,0),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],u,0),r+=c.getLineLength(a.x,a.y,s.x,s.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,n,i,o,r,a,s,c){var l=c*(Math.PI/180),h=Math.cos(l)*(t-n)/2+Math.sin(l)*(e-i)/2,u=-1*Math.sin(l)*(t-n)/2+Math.cos(l)*(e-i)/2,d=h*h/(a*a)+u*u/(s*s);d>1&&(a*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((a*a*s*s-a*a*u*u-s*s*h*h)/(a*a*u*u+s*s*h*h));o==r&&(f*=-1),isNaN(f)&&(f=0);var p=f*a*u/s,g=f*-s*h/a,m=(t+n)/2+Math.cos(l)*p-Math.sin(l)*g,v=(e+i)/2+Math.sin(l)*p+Math.cos(l)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},w=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},_=w([1,0],[(h-p)/a,(u-g)/s]),x=[(h-p)/a,(u-g)/s],k=[(-1*h-p)/a,(-1*u-g)/s],T=w(x,k);return b(x,k)<=-1&&(T=Math.PI),b(x,k)>=1&&(T=0),0===r&&T>0&&(T-=2*Math.PI),1==r&&0>T&&(T+=2*Math.PI),[m,v,a,s,_,T,l,r]},Kinetic.Node.addGetterSetter(Kinetic.Path,"data")}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="",i="Calibri",o="normal";Kinetic.TextPath=function(t){this._initTextPath(t)},Kinetic.TextPath.prototype={_initTextPath:function(n){var i=this;this.createAttrs(),this.dummyCanvas=document.createElement("canvas"),this.dataArray=[],Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this.className="TextPath",this._setDrawFuncs(),this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange",function(){i.dataArray=Kinetic.Path.parsePathData(this.attrs.data)});for(var o=["text","textStroke","textStrokeWidth"],r=0;r<o.length;r++){var a=o[r];this.on(a+"Change",i._setTextData)}i._setTextData()},drawFunc:function(t){var e=(this.charArr,t.getContext());e.font=this._getContextFont(),e.textBaseline="middle",e.textAlign="left",e.save();for(var n=this.glyphInfo,i=0;i<n.length;i++){e.save();var o=n[i].p0;n[i].p1,parseFloat(this.attrs.fontSize),e.translate(o.x,o.y),e.rotate(n[i].rotation),this.partialText=n[i].text,t.fillStroke(this),e.restore()}e.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,n=e.getContext("2d");n.save(),n.font=this._getContextFont();var i=n.measureText(t);return n.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var n,i,o,r=this.attrs.text.split(""),a=-1,s=0,c=function(){s=0;for(var e=t.dataArray,i=a+1;i<e.length;i++){if(e[i].pathLength>0)return a=i,e[i];"M"==e[i].command&&(n={x:e[i].points[0],y:e[i].points[1]})}return{}},l=function(e){var r=t._getTextSize(e).width,a=0,l=0;for(i=void 0;Math.abs(r-a)/r>.01&&25>l;){l++;for(var h=a;void 0===o;)o=c(),o&&h+o.pathLength<r&&(h+=o.pathLength,o=void 0);if(o==={}||void 0===n)return void 0;var u=!1;switch(o.command){case"L":Kinetic.Path.getLineLength(n.x,n.y,o.points[0],o.points[1])>r?i=Kinetic.Path.getPointOnLine(r,n.x,n.y,o.points[0],o.points[1],n.x,n.y):o=void 0;break;case"A":var d=o.points[4],f=o.points[5],p=o.points[4]+f;0===s?s=d+1e-8:r>a?s+=Math.PI/180*f/Math.abs(f):s-=Math.PI/360*f/Math.abs(f),Math.abs(s)>Math.abs(p)&&(s=p,u=!0),i=Kinetic.Path.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],s,o.points[6]);break;case"C":0===s?s=r>o.pathLength?1e-8:r/o.pathLength:r>a?s+=(r-a)/o.pathLength:s-=(a-r)/o.pathLength,s>1&&(s=1,u=!0),i=Kinetic.Path.getPointOnCubicBezier(s,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case"Q":0===s?s=r/o.pathLength:r>a?s+=(r-a)/o.pathLength:s-=(a-r)/o.pathLength,s>1&&(s=1,u=!0),i=Kinetic.Path.getPointOnQuadraticBezier(s,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3])}void 0!==i&&(a=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y)),u&&(u=!1,o=void 0)}},h=0;h<r.length&&(l(r[h]),void 0!==n&&void 0!==i);h++){var u=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y),d=0,f=Kinetic.Path.getPointOnLine(d+u/2,n.x,n.y,i.x,i.y),p=Math.atan2(i.y-n.y,i.x-n.x);this.glyphInfo.push({transposeX:f.x,transposeY:f.y,text:r[h],rotation:p,p0:n,p1:i}),n=i}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.TextPath,"fontFamily",i),Kinetic.Node.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Node.addGetterSetter(Kinetic.TextPath,"fontStyle",o),Kinetic.Node.addGetter(Kinetic.TextPath,"text",n)}(),function(){Kinetic.RegularPolygon=function(t){this._initRegularPolygon(t)},Kinetic.RegularPolygon.prototype={_initRegularPolygon:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="RegularPolygon",this._setDrawFuncs()},drawFunc:function(t){var e,n,i,o=t.getContext(),r=this.attrs.sides,a=this.attrs.radius;for(o.beginPath(),o.moveTo(0,0-a),e=1;r>e;e++)n=a*Math.sin(2*e*Math.PI/r),i=-1*a*Math.cos(2*e*Math.PI/r),o.lineTo(n,i);o.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Node.addGetterSetter(Kinetic.RegularPolygon,"sides",0)}(),function(){Kinetic.Star=function(t){this._initStar(t)},Kinetic.Star.prototype={_initStar:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Star",this._setDrawFuncs()},drawFunc:function(t){var e=t.getContext(),n=this.attrs.innerRadius,i=this.attrs.outerRadius,o=this.attrs.numPoints;e.beginPath(),e.moveTo(0,0-this.attrs.outerRadius);for(var r=1;2*o>r;r++){var a=0===r%2?i:n,s=a*Math.sin(r*Math.PI/o),c=-1*a*Math.cos(r*Math.PI/o);e.lineTo(s,c)}e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Star,"numPoints",0),Kinetic.Node.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Node.addGetterSetter(Kinetic.Star,"outerRadius",0)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",n="none",i="up",o="right",r="down",a="left",s="Label",c=t.length;Kinetic.Label=function(t){this._initLabel(t)},Kinetic.Label.prototype={_initLabel:function(t){var e=this;this.createAttrs(),this.className=s,Kinetic.Group.call(this,t),this.on("add",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.get("Text")[0]},getTag:function(){return this.get("Tag")[0]},_addListeners:function(n){var i,o=this;for(i=0;c>i;i++)n.on(t[i]+e,function(){o._sync()})},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,n,s,c,l,h=this.getText(),u=this.getTag();if(h&&u){switch(t=h.getWidth(),e=h.getHeight(),n=u.getPointerDirection(),s=u.getPointerWidth(),pointerHeight=u.getPointerHeight(),c=0,l=0,n){case i:c=t/2,l=-1*pointerHeight;break;case o:c=t+s,l=e/2;break;case r:c=t/2,l=e+pointerHeight;break;case a:c=-1*s,l=e/2}u.setAttrs({x:-1*c,y:-1*l,width:t,height:e}),h.setAttrs({x:-1*c,y:-1*l})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Tag=function(t){this._initTag(t)},Kinetic.Tag.prototype={_initTag:function(t){this.createAttrs(),Kinetic.Shape.call(this,t),this.className="Tag",this._setDrawFuncs()},drawFunc:function(t){var e=t.getContext(),n=this.getWidth(),s=this.getHeight(),c=this.getPointerDirection(),l=this.getPointerWidth(),h=this.getPointerHeight();this.getCornerRadius(),e.beginPath(),e.moveTo(0,0),c===i&&(e.lineTo((n-l)/2,0),e.lineTo(n/2,-1*h),e.lineTo((n+l)/2,0)),e.lineTo(n,0),c===o&&(e.lineTo(n,(s-h)/2),e.lineTo(n+l,s/2),e.lineTo(n,(s+h)/2)),e.lineTo(n,s),c===r&&(e.lineTo((n+l)/2,s),e.lineTo(n/2,s+h),e.lineTo((n-l)/2,s)),e.lineTo(0,s),c===a&&(e.lineTo(0,(s+h)/2),e.lineTo(-1*l,s/2),e.lineTo(0,(s-h)/2)),e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Node.addGetterSetter(Kinetic.Tag,"pointerDirection",n),Kinetic.Node.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Node.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Node.addGetterSetter(Kinetic.Tag,"cornerRadius",0)}(),function(){Kinetic.Filters.Grayscale=function(t){for(var e=t.data,n=0;n<e.length;n+=4){var i=.34*e[n]+.5*e[n+1]+.16*e[n+2];e[n]=i,e[n+1]=i,e[n+2]=i}}}(),function(){Kinetic.Filters.Brighten=function(t){for(var e=this.getFilterBrightness(),n=t.data,i=0;i<n.length;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e},Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filterBrightness",0)}(),function(){Kinetic.Filters.Invert=function(t){for(var e=t.data,n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,o){var r,a,s,c,l,h,u,d,f,p,g,m,v,y,b,w,_,x,k,T,S,C,$,P,N=e.data,I=e.width,D=e.height,A=o+o+1,M=I-1,E=D-1,K=o+1,L=K*(K+1)/2,j=new t,F=j,R=null,O=null,H=n[o],B=i[o];for(s=1;A>s;s++)if(F=F.next=new t,s==K)var W=F;for(F.next=j,u=h=0,a=0;D>a;a++){for(w=_=x=k=d=f=p=g=0,m=K*(T=N[h]),v=K*(S=N[h+1]),y=K*(C=N[h+2]),b=K*($=N[h+3]),d+=L*T,f+=L*S,p+=L*C,g+=L*$,F=j,s=0;K>s;s++)F.r=T,F.g=S,F.b=C,F.a=$,F=F.next;for(s=1;K>s;s++)c=h+((s>M?M:s)<<2),d+=(F.r=T=N[c])*(P=K-s),f+=(F.g=S=N[c+1])*P,p+=(F.b=C=N[c+2])*P,g+=(F.a=$=N[c+3])*P,w+=T,_+=S,x+=C,k+=$,F=F.next;for(R=j,O=W,r=0;I>r;r++)N[h+3]=$=g*H>>B,0!=$?($=255/$,N[h]=(d*H>>B)*$,N[h+1]=(f*H>>B)*$,N[h+2]=(p*H>>B)*$):N[h]=N[h+1]=N[h+2]=0,d-=m,f-=v,p-=y,g-=b,m-=R.r,v-=R.g,y-=R.b,b-=R.a,c=u+((c=r+o+1)<M?c:M)<<2,w+=R.r=N[c],_+=R.g=N[c+1],x+=R.b=N[c+2],k+=R.a=N[c+3],d+=w,f+=_,p+=x,g+=k,R=R.next,m+=T=O.r,v+=S=O.g,y+=C=O.b,b+=$=O.a,w-=T,_-=S,x-=C,k-=$,O=O.next,h+=4;u+=I}for(r=0;I>r;r++){for(_=x=k=w=f=p=g=d=0,h=r<<2,m=K*(T=N[h]),v=K*(S=N[h+1]),y=K*(C=N[h+2]),b=K*($=N[h+3]),d+=L*T,f+=L*S,p+=L*C,g+=L*$,F=j,s=0;K>s;s++)F.r=T,F.g=S,F.b=C,F.a=$,F=F.next;for(l=I,s=1;o>=s;s++)h=l+r<<2,d+=(F.r=T=N[h])*(P=K-s),f+=(F.g=S=N[h+1])*P,p+=(F.b=C=N[h+2])*P,g+=(F.a=$=N[h+3])*P,w+=T,_+=S,x+=C,k+=$,F=F.next,E>s&&(l+=I);for(h=r,R=j,O=W,a=0;D>a;a++)c=h<<2,N[c+3]=$=g*H>>B,$>0?($=255/$,N[c]=(d*H>>B)*$,N[c+1]=(f*H>>B)*$,N[c+2]=(p*H>>B)*$):N[c]=N[c+1]=N[c+2]=0,d-=m,f-=v,p-=y,g-=b,m-=R.r,v-=R.g,y-=R.b,b-=R.a,c=r+((c=a+K)<E?c:E)*I<<2,d+=w+=R.r=N[c],f+=_+=R.g=N[c+1],p+=x+=R.b=N[c+2],g+=k+=R.a=N[c+3],R=R.next,m+=T=O.r,v+=S=O.g,y+=C=O.b,b+=$=O.a,w-=T,_-=S,x-=C,k-=$,O=O.next,h+=I}}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var n=0|this.getFilterRadius();n>0&&e(t,n)},Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filterRadius",0)}(),function(){function t(t,e,n){var i=4*(n*t.width+e),o=[];return o.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),o}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function n(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function i(i,o){var r=t(i,0,0),a=t(i,i.width-1,0),s=t(i,0,i.height-1),c=t(i,i.width-1,i.height-1),l=o||10;if(e(r,a)<l&&e(a,c)<l&&e(c,s)<l&&e(s,r)<l){for(var h=n([a,r,c,s]),u=[],d=0;d<i.width*i.height;d++){var f=e(h,[i.data[4*d],i.data[4*d+1],i.data[4*d+2]]);u[d]=l>f?0:255}return u}}function o(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function r(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;n>s;s++)for(var c=0;e>c;c++){for(var l=s*e+c,h=0,u=0;o>u;u++)for(var d=0;o>d;d++){var f=s+u-r,p=c+d-r;if(f>=0&&n>f&&p>=0&&e>p){var g=f*e+p,m=i[u*o+d];h+=t[g]*m}}a[l]=2040===h?255:0}return a}function a(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;n>s;s++)for(var c=0;e>c;c++){for(var l=s*e+c,h=0,u=0;o>u;u++)for(var d=0;o>d;d++){var f=s+u-r,p=c+d-r;if(f>=0&&n>f&&p>=0&&e>p){var g=f*e+p,m=i[u*o+d];h+=t[g]*m}}a[l]=h>=1020?255:0}return a}function s(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;n>s;s++)for(var c=0;e>c;c++){for(var l=s*e+c,h=0,u=0;o>u;u++)for(var d=0;o>d;d++){var f=s+u-r,p=c+d-r;if(f>=0&&n>f&&p>=0&&e>p){var g=f*e+p,m=i[u*o+d];h+=t[g]*m}}a[l]=h}return a}Kinetic.Filters.Mask=function(t){var e=this.getFilterThreshold(),n=i(t,e);return n&&(n=r(n,t.width,t.height),n=a(n,t.width,t.height),n=s(n,t.width,t.height),o(t,n)),t},Kinetic.Node.addFilterGetterSetter(Kinetic.Image,"filterThreshold",0)}(),function(t){var e="/js/recorderWorker.js",n=function(t,n){var i=n||{},o=i.bufferLen||4096;this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,o,2,2);var r=new Worker(i.workerPath||e);r.postMessage({command:"init",config:{sampleRate:this.context.sampleRate}});var a,s=!1;this.node.onaudioprocess=function(t){s&&r.postMessage({command:"record",buffer:[t.inputBuffer.getChannelData(0),t.inputBuffer.getChannelData(1)]})},this.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])},this.record=function(){s=!0},this.stop=function(){s=!1},this.clear=function(){r.postMessage({command:"clear"})},this.getBuffer=function(t){a=t||i.callback,r.postMessage({command:"getBuffer"})},this.exportWAV=function(t,e){if(a=t||i.callback,e=e||i.type||"audio/wav",!a)throw new Error("Callback not set");r.postMessage({command:"exportWAV",type:e})},r.onmessage=function(t){var e=t.data;a(e)},t.connect(this.node),this.node.connect(this.context.destination)};n.forceDownload=function(e,n){var i=(t.URL||t.webkitURL).createObjectURL(e),o=t.document.createElement("a");o.href=i,o.download=n||"output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),o.dispatchEvent(r)},t.Recorder=n}(window);var jscolor={dir:"/images/",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var t=jscolor.detectDir();jscolor.dir=t!==!1?t:"jscolor/"}return jscolor.dir},detectDir:function(){for(var t=location.href,e=document.getElementsByTagName("base"),n=0;n<e.length;n+=1)e[n].href&&(t=e[n].href);for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n+=1)if(e[n].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(e[n].src)){var i=new jscolor.URI(e[n].src),o=i.toAbsolute(t);return o.path=o.path.replace(/[^\/]+$/,""),o.query=null,o.fragment=null,o.toString()}return!1},bind:function(){for(var t=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),e=document.getElementsByTagName("input"),n=0;n<e.length;n+=1){var i;if(!e[n].color&&e[n].className&&(i=e[n].className.match(t))){var o={};if(i[3])try{o=new Function("return ("+i[3]+")")()}catch(r){}e[n].color=new jscolor.color(e[n],o)}}},preload:function(){for(var t in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(t)&&jscolor.loadImage(t)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(t){jscolor.imgRequire[t]=!0},loadImage:function(t){jscolor.imgLoaded[t]||(jscolor.imgLoaded[t]=new Image,jscolor.imgLoaded[t].src=jscolor.getDir()+t)},fetchElement:function(t){return"string"==typeof t?document.getElementById(t):t},addEvent:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},fireEvent:function(t,e){if(t)if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}else if(document.createEventObject){var n=document.createEventObject();t.fireEvent("on"+e,n)}else t["on"+e]&&t["on"+e]()},getElementPos:function(t){var e=t,n=t,i=0,o=0;if(e.offsetParent)do i+=e.offsetLeft,o+=e.offsetTop;while(e=e.offsetParent);for(;(n=n.parentNode)&&"BODY"!==n.nodeName.toUpperCase();)i-=n.scrollLeft,o-=n.scrollTop;return[i,o]},getElementSize:function(t){return[t.offsetWidth,t.offsetHeight]},getRelMousePos:function(t){var e=0,n=0;return t||(t=window.event),"number"==typeof t.offsetX?(e=t.offsetX,n=t.offsetY):"number"==typeof t.layerX&&(e=t.layerX,n=t.layerY),{x:e,y:n}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(t){function e(t){for(var e="";t;)if("../"===t.substr(0,3)||"./"===t.substr(0,2))t=t.replace(/^\.+/,"").substr(1);else if("/./"===t.substr(0,3)||"/."===t)t="/"+t.substr(3);else if("/../"===t.substr(0,4)||"/.."===t)t="/"+t.substr(4),e=e.replace(/\/?[^\/]*$/,"");else if("."===t||".."===t)t="";else{var n=t.match(/^\/?[^\/]*/)[0];t=t.substr(n.length),e+=n}return e}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(t){var e=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this},this.toString=function(){var t="";return null!==this.scheme&&(t=t+this.scheme+":"),null!==this.authority&&(t=t+"//"+this.authority),null!==this.path&&(t+=this.path),null!==this.query&&(t=t+"?"+this.query),null!==this.fragment&&(t=t+"#"+this.fragment),t},this.toAbsolute=function(t){var t=new jscolor.URI(t),n=this,i=new jscolor.URI;return null===t.scheme?!1:(null!==n.scheme&&n.scheme.toLowerCase()===t.scheme.toLowerCase()&&(n.scheme=null),null!==n.scheme?(i.scheme=n.scheme,i.authority=n.authority,i.path=e(n.path),i.query=n.query):(null!==n.authority?(i.authority=n.authority,i.path=e(n.path),i.query=n.query):(""===n.path?(i.path=t.path,i.query=null!==n.query?n.query:t.query):("/"===n.path.substr(0,1)?i.path=e(n.path):(i.path=null!==t.authority&&""===t.path?"/"+n.path:t.path.replace(/[^\/]+$/,"")+n.path,i.path=e(i.path)),i.query=n.query),i.authority=t.authority),i.scheme=t.scheme),i.fragment=n.fragment,i)},t&&this.parse(t)},color:function(t,e){function n(t,e,n){var i=Math.min(Math.min(t,e),n),o=Math.max(Math.max(t,e),n),r=o-i;if(0===r)return[null,0,o];var a=t===i?3+(n-e)/r:e===i?5+(t-n)/r:1+(e-t)/r;return[6===a?0:a,r/o,o]}function i(t,e,n){if(null===t)return[n,n,n];var i=Math.floor(t),o=i%2?t-i:1-(t-i),r=n*(1-e),a=n*(1-e*o);switch(i){case 6:case 0:return[n,a,r];case 1:return[a,n,r];case 2:return[r,n,a];case 3:return[r,a,n];case 4:return[a,r,n];case 5:return[n,r,a]}}function o(){delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function r(e,n){function i(){var t=m.pickerInsetColor.split(/\s+/),e=t.length<2?t[0]:t[1]+" "+t[0]+" "+t[0]+" "+t[1];h.btn.style.borderColor=e}if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(m.pickerCloseText)};for(var o=0,r=4;o<jscolor.images.sld[1];o+=r){var l=document.createElement("div");l.style.height=r+"px",l.style.fontSize="1px",l.style.lineHeight="0",jscolor.picker.sld.appendChild(l)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var h=jscolor.picker;h.box.onmouseup=h.box.onmouseout=function(){t.focus()},h.box.onmousedown=function(){y=!0},h.box.onmousemove=function(t){(_||x)&&(_&&d(t),x&&f(t),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),p())},"ontouchstart"in window&&h.box.addEventListener("touchmove",function(t){var e={offsetX:t.touches[0].pageX-k.X,offsetY:t.touches[0].pageY-k.Y};(_||x)&&(_&&d(e),x&&f(e),p()),t.stopPropagation(),t.preventDefault()},!1),h.padM.onmouseup=h.padM.onmouseout=function(){_&&(_=!1,jscolor.fireEvent(b,"change"))},h.padM.onmousedown=function(t){switch(v){case 0:0===m.hsv[2]&&m.fromHSV(null,null,1);break;case 1:0===m.hsv[1]&&m.fromHSV(null,1,null)}x=!1,_=!0,d(t),p()},"ontouchstart"in window&&h.padM.addEventListener("touchstart",function(t){k={X:t.target.offsetParent.offsetLeft,Y:t.target.offsetParent.offsetTop},this.onmousedown({offsetX:t.touches[0].pageX-k.X,offsetY:t.touches[0].pageY-k.Y})}),h.sldM.onmouseup=h.sldM.onmouseout=function(){x&&(x=!1,jscolor.fireEvent(b,"change"))},h.sldM.onmousedown=function(t){_=!1,x=!0,f(t),p()},"ontouchstart"in window&&h.sldM.addEventListener("touchstart",function(t){k={X:t.target.offsetParent.offsetLeft,Y:t.target.offsetParent.offsetTop},this.onmousedown({offsetX:t.touches[0].pageX-k.X,offsetY:t.touches[0].pageY-k.Y})
});var u=a(m);h.box.style.width=u[0]+"px",h.box.style.height=u[1]+"px",h.boxB.style.position="absolute",h.boxB.style.clear="both",h.boxB.style.left=e+"px",h.boxB.style.top=n+"px",h.boxB.style.zIndex=m.pickerZIndex,h.boxB.style.border=m.pickerBorder+"px solid",h.boxB.style.borderColor=m.pickerBorderColor,h.boxB.style.background=m.pickerFaceColor,h.pad.style.width=jscolor.images.pad[0]+"px",h.pad.style.height=jscolor.images.pad[1]+"px",h.padB.style.position="absolute",h.padB.style.left=m.pickerFace+"px",h.padB.style.top=m.pickerFace+"px",h.padB.style.border=m.pickerInset+"px solid",h.padB.style.borderColor=m.pickerInsetColor,h.padM.style.position="absolute",h.padM.style.left="0",h.padM.style.top="0",h.padM.style.width=m.pickerFace+2*m.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",h.padM.style.height=h.box.style.height,h.padM.style.cursor="crosshair",h.sld.style.overflow="hidden",h.sld.style.width=jscolor.images.sld[0]+"px",h.sld.style.height=jscolor.images.sld[1]+"px",h.sldB.style.display=m.slider?"block":"none",h.sldB.style.position="absolute",h.sldB.style.right=m.pickerFace+"px",h.sldB.style.top=m.pickerFace+"px",h.sldB.style.border=m.pickerInset+"px solid",h.sldB.style.borderColor=m.pickerInsetColor,h.sldM.style.display=m.slider?"block":"none",h.sldM.style.position="absolute",h.sldM.style.right="0",h.sldM.style.top="0",h.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+m.pickerFace+2*m.pickerInset+"px",h.sldM.style.height=h.box.style.height;try{h.sldM.style.cursor="pointer"}catch(g){h.sldM.style.cursor="hand"}h.btn.style.display=m.pickerClosable?"block":"none",h.btn.style.position="absolute",h.btn.style.left=m.pickerFace+"px",h.btn.style.bottom=m.pickerFace+"px",h.btn.style.padding="0 15px",h.btn.style.height="18px",h.btn.style.border=m.pickerInset+"px solid",i(),h.btn.style.color=m.pickerButtonColor,h.btn.style.font="12px sans-serif",h.btn.style.textAlign="center";try{h.btn.style.cursor="pointer"}catch(g){h.btn.style.cursor="hand"}switch(h.btn.onmousedown=function(){m.hidePicker()},h.btnS.style.lineHeight=h.btn.style.height,v){case 0:var w="hs.png";break;case 1:var w="hv.png"}h.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",h.padM.style.backgroundRepeat="no-repeat",h.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",h.sldM.style.backgroundRepeat="no-repeat",h.pad.style.backgroundImage="url('"+jscolor.getDir()+w+"')",h.pad.style.backgroundRepeat="no-repeat",h.pad.style.backgroundPosition="0 0",s(),c(),jscolor.picker.owner=m,document.getElementsByTagName("body")[0].appendChild(h.boxB)}function a(t){var e=[2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[0]+(t.slider?2*t.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),t.pickerClosable?4*t.pickerInset+3*t.pickerFace+jscolor.images.pad[1]+t.pickerButtonHeight:2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[1]];return e}function s(){switch(v){case 0:var t=1;break;case 1:var t=2}var e=Math.round(m.hsv[0]/6*(jscolor.images.pad[0]-1)),n=Math.round((1-m.hsv[t])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=m.pickerFace+m.pickerInset+e-Math.floor(jscolor.images.cross[0]/2)+"px "+(m.pickerFace+m.pickerInset+n-Math.floor(jscolor.images.cross[1]/2))+"px";var o=jscolor.picker.sld.childNodes;switch(v){case 0:for(var r=i(m.hsv[0],m.hsv[1],1),a=0;a<o.length;a+=1)o[a].style.backgroundColor="rgb("+r[0]*(1-a/o.length)*100+"%,"+r[1]*(1-a/o.length)*100+"%,"+r[2]*(1-a/o.length)*100+"%)";break;case 1:var r,s,c=[m.hsv[2],0,0],a=Math.floor(m.hsv[0]),l=a%2?m.hsv[0]-a:1-(m.hsv[0]-a);switch(a){case 6:case 0:r=[0,1,2];break;case 1:r=[1,0,2];break;case 2:r=[2,0,1];break;case 3:r=[2,1,0];break;case 4:r=[1,2,0];break;case 5:r=[0,2,1]}for(var a=0;a<o.length;a+=1)s=1-1/(o.length-1)*a,c[1]=c[0]*(1-s*l),c[2]=c[0]*(1-s),o[a].style.backgroundColor="rgb("+100*c[r[0]]+"%,"+100*c[r[1]]+"%,"+100*c[r[2]]+"%)"}}function c(){switch(v){case 0:var t=2;break;case 1:var t=1}var e=Math.round((1-m.hsv[t])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(m.pickerFace+m.pickerInset+e-Math.floor(jscolor.images.arrow[1]/2))+"px"}function l(){return jscolor.picker&&jscolor.picker.owner===m}function h(){b===t&&m.importColor(),m.pickerOnfocus&&m.hidePicker()}function u(){b!==t&&m.importColor()}function d(t){var e=jscolor.getRelMousePos(t),n=e.x-m.pickerFace-m.pickerInset,i=e.y-m.pickerFace-m.pickerInset;switch(v){case 0:m.fromHSV(n*(6/(jscolor.images.pad[0]-1)),1-i/(jscolor.images.pad[1]-1),null,$);break;case 1:m.fromHSV(n*(6/(jscolor.images.pad[0]-1)),null,1-i/(jscolor.images.pad[1]-1),$)}}function f(t){var e=jscolor.getRelMousePos(t),n=e.y-m.pickerFace-m.pickerInset;switch(v){case 0:m.fromHSV(null,null,1-n/(jscolor.images.sld[1]-1),C);break;case 1:m.fromHSV(null,1-n/(jscolor.images.sld[1]-1),null,C)}}function p(){if(m.onImmediateChange){var t;t="string"==typeof m.onImmediateChange?new Function(m.onImmediateChange):m.onImmediateChange,t.call(m)}}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=t,this.styleElement=t,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var g in e)e.hasOwnProperty(g)&&(this[g]=e[g]);this.hidePicker=function(){l()&&o()},this.showPicker=function(){if(!l()){var e,n,i,o=jscolor.getElementPos(t),s=jscolor.getElementSize(t),c=jscolor.getViewPos(),h=jscolor.getViewSize(),u=a(this);switch(this.pickerPosition.toLowerCase()){case"left":e=1,n=0,i=-1;break;case"right":e=1,n=0,i=1;break;case"top":e=0,n=1,i=-1;break;default:e=0,n=1,i=1}var d=(s[n]+u[n])/2;if(this.pickerSmartPosition)var f=[-c[e]+o[e]+u[e]>h[e]&&-c[e]+o[e]+s[e]/2>h[e]/2&&o[e]+s[e]-u[e]>=0?o[e]+s[e]-u[e]:o[e],-c[n]+o[n]+s[n]+u[n]-d+d*i>h[n]?-c[n]+o[n]+s[n]/2>h[n]/2&&o[n]+s[n]-d-d*i>=0?o[n]+s[n]-d-d*i:o[n]+s[n]-d+d*i:o[n]+s[n]-d+d*i>=0?o[n]+s[n]-d+d*i:o[n]+s[n]-d-d*i];else var f=[o[e],o[n]+s[n]-d+d*i];r(f[e],f[n])}},this.importColor=function(){b?this.adjust?!this.required&&/^\s*$/.test(b.value)?(b.value="",w.style.backgroundImage=w.jscStyle.backgroundImage,w.style.backgroundColor=w.jscStyle.backgroundColor,w.style.color=w.jscStyle.color,this.exportColor(T|S)):this.fromString(b.value)||this.exportColor():this.fromString(b.value,T)||(w.style.backgroundImage=w.jscStyle.backgroundImage,w.style.backgroundColor=w.jscStyle.backgroundColor,w.style.color=w.jscStyle.color,this.exportColor(T|S)):this.exportColor()},this.exportColor=function(t){if(!(t&T)&&b){var e=this.toString();this.caps&&(e=e.toUpperCase()),this.hash&&(e="#"+e),b.value=e}t&S||!w||(w.style.backgroundImage="none",w.style.backgroundColor="#"+this.toString(),w.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),t&C||!l()||s(),t&$||!l()||c()},this.fromHSV=function(t,e,n,o){null!==t&&(t=Math.max(0,this.minH,Math.min(6,this.maxH,t))),null!==e&&(e=Math.max(0,this.minS,Math.min(1,this.maxS,e))),null!==n&&(n=Math.max(0,this.minV,Math.min(1,this.maxV,n))),this.rgb=i(null===t?this.hsv[0]:this.hsv[0]=t,null===e?this.hsv[1]:this.hsv[1]=e,null===n?this.hsv[2]:this.hsv[2]=n),this.exportColor(o)},this.fromRGB=function(t,e,o,r){null!==t&&(t=Math.max(0,Math.min(1,t))),null!==e&&(e=Math.max(0,Math.min(1,e))),null!==o&&(o=Math.max(0,Math.min(1,o)));var a=n(null===t?this.rgb[0]:t,null===e?this.rgb[1]:e,null===o?this.rgb[2]:o);null!==a[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,a[0]))),0!==a[2]&&(this.hsv[1]=null===a[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,a[1]))),this.hsv[2]=null===a[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,a[2]));var s=i(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=s[0],this.rgb[1]=s[1],this.rgb[2]=s[2],this.exportColor(r)},this.fromString=function(t,e){var n=t.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return n?(6===n[1].length?this.fromRGB(parseInt(n[1].substr(0,2),16)/255,parseInt(n[1].substr(2,2),16)/255,parseInt(n[1].substr(4,2),16)/255,e):this.fromRGB(parseInt(n[1].charAt(0)+n[1].charAt(0),16)/255,parseInt(n[1].charAt(1)+n[1].charAt(1),16)/255,parseInt(n[1].charAt(2)+n[1].charAt(2),16)/255,e),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var m=this,v="hvs"===this.pickerMode.toLowerCase()?1:0,y=!1,b=jscolor.fetchElement(this.valueElement),w=jscolor.fetchElement(this.styleElement),_=!1,x=!1,k={},T=1,S=2,C=4,$=8;if(jscolor.addEvent(t,"focus",function(){m.pickerOnfocus&&m.showPicker()}),jscolor.addEvent(t,"blur",function(){y?y=!1:window.setTimeout(function(){y||h(),y=!1},0)}),b){var P=function(){m.fromString(b.value,T),p()};jscolor.addEvent(b,"keyup",P),jscolor.addEvent(b,"input",P),jscolor.addEvent(b,"blur",u),b.setAttribute("autocomplete","off")}switch(w&&(w.jscStyle={backgroundImage:w.style.backgroundImage,backgroundColor:w.style.backgroundColor,color:w.style.color}),v){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};jscolor.install();var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-37775884-1"]),_gaq.push(["_setDomainName","jenniferdewalt.com"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),function(t){t.fn.disableSelection=function(){return this.attr("unselectable","on").css("user-select","none").on("selectstart",!1)}}(jQuery),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),$(document).ready(function(){var t={users:nothing,click_counter:clickCounter,one_page:onePage,make_a_dude:makeADude,keep_it_up:keepItUpGame,view_graph:viewGraph,king_of_comments:kingOfComments,pixshow:pixShow,your_space:yourSpace,hangman:hangmanGame,pv_calculator:pvCalculator,tiny_notes:tinyNotes,capture:captureGame,text_scroller:textScroller,hollywood:hollywoodSign,liquor_likes:liquorLikes,fishy_friend:fishyFriend,snare:snare,quick_words:quickWords,countdown:countdownClock,hourglass:hourglass,skinny_drinks:skinnyDrinks,pinwheel:pinwheel,typing_test:typingTest,swivel:swivelGame,mastermind:mastermindGame,sparklers:sparklers,postbored:postbored,text_to_braille:textToBraille,no_one_watching:noOneWatching,tos:tos,song_machine:songMachine,globulator:globulator,drying_paint:dryingPaint,word_clock:wordClock,emergency_off:emergencyOff,infinite_descent:infiniteDescent,wish:wish,serious_question:seriousQuestion,algae_tank:algaeTank,colorworks:colorWorks,effects:effects,down_the_weight:downTheWeight,check_sketch:checkSketch,window_sizer:windowSizer,image_palette:imagePalette,splodin_bacon:splodinBacon,glob_glob:globGlob,forest:forest,mishmosh:mishmosh,todo:nothing,button_maker:buttonMaker,brick_smasher:brickSmasher,balloon:balloon,plinky:plinky,screwdriver:screwdriver,confused_twitter:confusedTwitter,picnic:picnic,share_a_secret:shareASecret,here:herePage,photobooth:photobooth,cat_wall:catWall,word_cloud:wordCloud,sharks:sharks,need_drink:needDrink,signature:signature,image_editor:imageEditor,other_side:otherSide,open_note:openNote,more_drop_shadow:moreDropShadow,elevation:elevationPage,whats_my_ip:nothing,must_write:mustWrite,boom:boomPage,color_picker:colorPickerPage,tweet_time:tweetTime,morse_coder:morseCoder,ransom_note:ransomNote,moment_of_peace:momentOfPeace,pollsie:pollsie,audio_recorder:audioRecorder,salon:salonGalleries,portrait:portraitPhotos,letter_storm:letterStorm,lights_on:lightsOn,what_day:whatDay,color_walk:colorWalk,commerce:commerce,teammates:teammates,minesweeper:minesweeper,lunar_phase:lunarPhase,mousing:mousingPage,window:windowPage,picture_pen:picturePen,taste:nothing,audio_garden:audioGarden,assault:assault,coded:codedMessages,polychrome:polychrome,electro_bounce:electroBounce,gfboom:googleFontsBrowser,quick_compliments:quickCompliments,chromatones:chromatones,paths:pathsImages},e=window.location.pathname.replace(/^\//,"").replace(/\/.*/,"");t[e]()});var TasteEntry=Backbone.Model.extend({urlRoot:"entries"}),TodoTodo=Backbone.Model.extend({urlRoot:"todos"}),TasteEntriesCollection=Backbone.Collection.extend({model:TasteEntry,url:"taste/entries"}),TodoTodosCollection=Backbone.Collection.extend({model:TodoTodo,url:"todo/todos"});(function(){this.JST||(this.JST={}),this.JST["templates/taste_entries/entry"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="name attr">',get("name"),'</div>\n<div class="kind attr">Type: ',get("kind"),'</div>\n<div class="rating attr">Rating: ',get("rating"),'</div>\n<div class="label attr">Notes:</div>\n<div class="comments attr">',get("comments"),'</div>\n<a class="delete">X</a>\n');return __p.join("")}}).call(this),function(){this.JST||(this.JST={}),this.JST["templates/taste_entries/index"]=function(obj){var __p=[];with(obj||{})__p.push('<form id="entry_form">\n	<h3>ADD A NEW ENTRY</h3>\n\n	<table>\n		<tr class="form_field" id="name_wrapper">\n			<td><label>Item Name: </label></td><td class="inputs"><input id="name_input" type="text" maxlength="250" placeholder="Tequila Esperanto"></td>\n		</tr>\n\n		<tr class="form_field" id="kind_wrapper">\n			<td><label>Type: </label></td><td class="inputs"><input id="kind_input" type="text" maxlength="250" placeholder="Reposado"></td>\n		</tr>\n\n		<tr class="form_field" id="rating_wrapper">\n			<td><label>Rating: </label></td>\n			<td class="inputs"><select id="rating_input">\n				<option>0</option>\n				<option>1</option>\n				<option>2</option>\n				<option>3</option>\n				<option>4</option>\n				<option>5</option>\n			</select></td>\n		</tr>\n\n		<tr class="form_field" id="comments_wrapper">\n			<td><label class="notes">Notes: </label></td><td class="inputs"><textarea id="comments_input" placeholder="Lots of agave. Hints of orange peel and lime. Excellent for sipping!"></textarea></td>\n		</tr>\n	</table>\n\n	<div class="form_field" id="submit_wrapper">\n		<input class="btn" type="submit" val="Submit">\n	</div>\n</form>\n\n<div id="entries_container">\n	<ul id="entries_list"></ul>\n	<br class="clear">\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/todo_todos/index"]=function(obj){var __p=[];with(obj||{})__p.push('<div>\n	<h1>Your To Do List</h1>\n	<ul id="todos_list"></ul>\n</div>\n\n\n<form id="todo_form">\n	<h2>Add a new To Do</h2>\n	<div class="form_field" id="title_wrapper"><label>Title:</label><input maxlength="200" type="text" id="title_input"></div>\n	<div class="form_field" id="description_wrapper"><label>Description:</label><input maxlength="200" type="text" id="description_input"></div>\n	<div class="form_field" id="submit_wrapper"><input class="btn" type="submit" val="Submit"></div>\n</form>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/todo_todos/todo"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="title">',get("title"),'</div>\n<div class="description">',get("description"),'</div>\n<a class="delete">X</a>\n');return __p.join("")}}.call(this);var TasteEntriesIndexEntryView=Backbone.View.extend({events:{"click .delete":"remove"},render:function(){return this.$el.html(render("taste_entries/entry",this.model)),this},remove:function(){this.model.destroy()}}),TasteEntriesIndexFormView=Backbone.View.extend({events:{submit:"handleSubmit"},handleSubmit:function(t){t.preventDefault();var e=t.target[0].value,n=t.target[1].value,i=t.target[2].value,o=t.target[3].value;t.target[0].value="",t.target[1].value="",t.target[2].value="0",t.target[3].value="";var r=new TasteEntry({name:e,kind:n,rating:i,comments:o});r.save(),this.collection.add(r)}}),TasteEntriesIndexListView=Backbone.View.extend({initialize:function(){this.render(),this.collection.on("add",this.render,this),this.collection.on("remove",this.render,this)},render:function(){this.$el.html(""),this.collection.each(function(t){this.renderEntry(t)},this)},renderEntry:function(t){var e=new TasteEntriesIndexEntryView({tagName:"li",model:t});this.$el.prepend(e.render().el)}}),TasteEntriesIndexView=Backbone.View.extend({initialize:function(){this.initial_data=$("#data").data("response"),this.collection=new TasteEntriesCollection(this.initial_data),this.render(),this.taste_entries_index_list_view=new TasteEntriesIndexListView({el:"#entries_list",collection:this.collection}),this.taste_entries_index_form_view=new TasteEntriesIndexFormView({el:"#entry_form",collection:this.collection})},render:function(){this.$el.html(""),this.$el.html(render("taste_entries/index",{}))}}),TodoTodosIndexFormView=Backbone.View.extend({events:{submit:"handleSubmit"},handleSubmit:function(t){t.preventDefault();var e=t.target[0].value,n=t.target[1].value;t.target[0].value="",t.target[1].value="";var i=new TodoTodo({title:e,description:n});i.save(),this.collection.add(i)}}),TodoTodosIndexListView=Backbone.View.extend({initialize:function(){this.render(),this.collection.on("add",this.render,this),this.collection.on("remove",this.render,this)},render:function(){this.$el.html(""),this.collection.each(function(t){this.renderTodo(t)},this)},renderTodo:function(t){var e=new TodoTodosIndexTodoView({tagName:"li",model:t});this.$el.append(e.render().el)}}),TodoTodosIndexTodoView=Backbone.View.extend({events:{"click .delete":"remove"},render:function(){return this.$el.html(render("todo_todos/todo",this.model)),this},remove:function(){this.model.destroy()}}),TodoTodosIndexView=Backbone.View.extend({initialize:function(){this.initial_data=$("#data").data("response"),this.collection=new TodoTodosCollection(this.initial_data),this.render(),this.todo_todos_index_list_view=new TodoTodosIndexListView({el:"#todos_list",collection:this.collection}),this.todo_todos_index_form_view=new TodoTodosIndexFormView({el:"#todo_form",collection:this.collection})},render:function(){this.$el.html(""),this.$el.html(render("todo_todos/index",{}))}}),BbRouter=Backbone.Router.extend({routes:{"todo/todos":"todo_index","taste/entries":"taste_index"},todo_index:function(){new TodoTodosIndexView({el:"#todos_index_container"})},taste_index:function(){new TasteEntriesIndexView({el:"#entries_index_container"})}});new BbRouter,$(document).ready(function(){Backbone.history.start({pushState:!0})});